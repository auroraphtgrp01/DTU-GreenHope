/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

(function(Me,Ie){typeof exports=="object"&&typeof module!="undefined"?Ie(exports,require("@nocobase/client"),require("@formily/react"),require("react/jsx-runtime"),require("react"),require("antd")):typeof define=="function"&&define.amd?define(["exports","@nocobase/client","@formily/react","react/jsx-runtime","react","antd"],Ie):(Me=typeof globalThis!="undefined"?globalThis:Me||self,Ie(Me["@dtu-olp-2024/solidity-editor-nocobase"]={},Me["@nocobase/client"],Me["@formily/react"],Me.jsxRuntime,Me.react,Me.antd))})(this,function(Me,Ie,ft,tt,Ee,qe){"use strict";var GN=Object.defineProperty,FN=Object.defineProperties;var VN=Object.getOwnPropertyDescriptors;var q1=Object.getOwnPropertySymbols;var HN=Object.prototype.hasOwnProperty,WN=Object.prototype.propertyIsEnumerable;var Yn=Math.pow,U1=(Me,Ie,ft)=>Ie in Me?GN(Me,Ie,{enumerable:!0,configurable:!0,writable:!0,value:ft}):Me[Ie]=ft,Q=(Me,Ie)=>{for(var ft in Ie||(Ie={}))HN.call(Ie,ft)&&U1(Me,ft,Ie[ft]);if(q1)for(var ft of q1(Ie))WN.call(Ie,ft)&&U1(Me,ft,Ie[ft]);return Me},J=(Me,Ie)=>FN(Me,VN(Ie));var We=(Me,Ie,ft)=>new Promise((tt,Ee)=>{var qe=wn=>{try{Si(ft.next(wn))}catch(no){Ee(no)}},Va=wn=>{try{Si(ft.throw(wn))}catch(no){Ee(no)}},Si=wn=>wn.done?tt(wn.value):Promise.resolve(wn.value).then(qe,Va);Si((ft=ft.apply(Me,Ie)).next())});const Va="Solidity Editor",Si="solidityeditor",wn=new Ie.SchemaSettings({name:`blockSettings:${Si}`,items:[{type:"remove",name:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),no={type:"void","x-component":"CardItem","x-decorator":"DataBlockProvider","x-decorator-props":{[Si]:{},dataSource:"main",collection:"smart_contracts",action:"list"},"x-settings":wn.name,"x-toolbar":"BlockSchemaToolbar",properties:{[Si]:{type:"void","x-component":"SolidityEditor","x-use-component-props":"useCodeBlockProps"}}},Dr={type:"item",name:Si,icon:"FileOutlined",useComponentProps(){const{insert:n}=Ie.useSchemaInitializer();return{title:Va,componentType:"SolidityEditor",onClick:()=>{n(no)}}}};function Ha(){return Ha=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ha.apply(null,arguments)}function G1(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}class ye{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=jr(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),xn.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=jr(this,e,t);let i=[];return this.decompose(e,t,i,0),xn.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new io(this),s=new io(e);for(let o=t,a=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new io(this,e)}iterRange(e,t=this.length){return new gm(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Om(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ye.empty:e.length<=32?new Ue(e):xn.from(Ue.split(e,[]))}}class Ue extends ye{constructor(e,t=F1(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((t?i:a)>=e)return new V1(r,a,i,o);r=a+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new Ue(mm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=Wa(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Ue(a,o.length+s.length));else{let l=a.length>>1;i.push(new Ue(a.slice(0,l)),new Ue(a.slice(l)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Ue))return super.replace(e,t,i);[e,t]=jr(this,e,t);let r=Wa(this.text,Wa(i.text,mm(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new Ue(r,s):xn.from(Ue.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=jr(this,e,t);let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&t>s&&(r+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new Ue(i,r)),i=[],r=-1);return r>-1&&t.push(new Ue(i,r)),t}}class xn extends ye{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,i,r);r=a+1,i=l+1}}decompose(e,t,i,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let h=r&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!h?i.push(a):a.decompose(e-o,t-o,i,h)}o=l+1}}replace(e,t,i){if([e,t]=jr(this,e,t),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,i),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let c=this.children.slice();return c[r]=l,new xn(c,this.length-(t-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=jr(this,e,t);let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&t>o&&(r+=a.sliceString(e-o,t-o,i)),o=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof xn))return 0;let i=0,[r,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==a)return i;let l=this.children[r],h=e.children[s];if(l!=h)return i+l.scanIdentical(h,t);i+=l.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new Ue(d,t)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,h=-1,c=[];function u(d){let p;if(d.lines>s&&d instanceof xn)for(let m of d.children)u(m);else d.lines>o&&(l>o||!l)?(f(),a.push(d)):d instanceof Ue&&l&&(p=c[c.length-1])instanceof Ue&&d.lines+p.lines<=32?(l+=d.lines,h+=d.length+1,c[c.length-1]=new Ue(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>r&&f(),l+=d.lines,h+=d.length+1,c.push(d))}function f(){l!=0&&(a.push(c.length==1?c[0]:xn.from(c,h)),h=-1,l=c.length=0)}for(let d of e)u(d);return f(),a.length==1?a[0]:new xn(a,t)}}ye.empty=new Ue([""],0);function F1(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Wa(n,e,t=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let a=n[s],l=r+a.length;l>=t&&(l>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function mm(n,e,t){return Wa(n,[""],e,t)}class io{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ue?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Ue?r.text.length:r.children.length;if(o==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ue){let l=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Ue?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class gm{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new io(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Om{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(ye.prototype[Symbol.iterator]=function(){return this.iter()},io.prototype[Symbol.iterator]=gm.prototype[Symbol.iterator]=Om.prototype[Symbol.iterator]=function(){return this});class V1{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function jr(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let qr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<qr.length;n++)qr[n]+=qr[n-1];function H1(n){for(let e=1;e<qr.length;e+=2)if(qr[e]>n)return qr[e-1]<=n;return!1}function ym(n){return n>=127462&&n<=127487}const bm=8205;function at(n,e,t=!0,i=!0){return(t?vm:W1)(n,e,i)}function vm(n,e,t){if(e==n.length)return e;e&&wm(n.charCodeAt(e))&&xm(n.charCodeAt(e-1))&&e--;let i=lt(n,e);for(e+=Yt(i);e<n.length;){let r=lt(n,e);if(i==bm||r==bm||t&&H1(r))e+=Yt(r),i=r;else if(ym(r)){let s=0,o=e-2;for(;o>=0&&ym(lt(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function W1(n,e,t){for(;e>0;){let i=vm(n,e-2,t);if(i<e)return i;e--}return 0}function wm(n){return n>=56320&&n<57344}function xm(n){return n>=55296&&n<56320}function lt(n,e){let t=n.charCodeAt(e);if(!xm(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return wm(i)?(t-55296<<10)+(i-56320)+65536:t}function Fh(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Yt(n){return n<65536?1:2}const Vh=/\r\n?|\n/;var ct=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ct||(ct={}));class Sn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,t=!1){Hh(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Sn(e)}composeDesc(e){return this.empty?e:e.empty?this:Sm(this,e)}mapDesc(e,t=!1){return e.empty?this:Wh(this,e,t)}mapPos(e,t=-1,i=ct.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],h=r+a;if(l<0){if(h>e)return s+(e-r);s+=a}else{if(i!=ct.Simple&&h>=e&&(i==ct.TrackDel&&r<e&&h>e||i==ct.TrackBefore&&r<e||i==ct.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?s:s+l;s+=l}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Sn(e)}static create(e){return new Sn(e)}}class ze extends Sn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Hh(this,(t,i,r,s,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return Wh(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(ye.empty);i.push(o?e.slice(s,s+o):ye.empty)}s+=o}return new ze(t,i)}compose(e){return this.empty?e:e.empty?this:Sm(this,e,!0)}map(e,t=!1){return e.empty?this:Wh(this,e,t,!0)}iterChanges(e,t=!1){Hh(this,e,t)}get desc(){return Sn.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new ro(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);dt(r,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;dt(t,c,u),u>0&&Ai(i,t,s.text),s.forward(c),a+=c}let h=e[o++];for(;a<h;){if(s.done)break e;let c=Math.min(s.len,h-a);dt(t,c,-1),dt(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new ze(t,i),filtered:Sn.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<t&&dt(r,t-o,-1);let u=new ze(r,s);a=a?a.compose(u.map(a)):u,r=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof ze){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:u,to:f=u,insert:d}=c;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?ye.of(d.split(i||Vh)):d:ye.empty,m=p.length;if(u==f&&m==0)return;u<o&&l(),u>o&&dt(r,u-o,-1),dt(r,f-u,m),Ai(s,r,p),o=f}}return h(e),l(!a),a}static empty(e){return new ze(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(ye.empty);i[r]=ye.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new ze(t,i)}static createSet(e,t){return new ze(e,t)}}function dt(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Ai(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(ye.empty);n.push(t)}}function Hh(n,e,t){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)r+=a,s+=a;else{let h=r,c=s,u=ye.empty;for(;h+=a,c+=l,l&&i&&(u=u.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(r,h,s,c,u),r=h,s=c}}}function Wh(n,e,t,i=!1){let r=[],s=i?[]:null,o=new ro(n),a=new ro(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);dt(r,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let h=a.len;for(dt(r,a.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&l<o.i&&o.len<=c&&(dt(r,0,o.ins),s&&Ai(s,r,o.text),l=o.i),o.forward(c),h-=c}a.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(a.ins==-1){let u=Math.min(c,a.len);h+=u,c-=u,a.forward(u)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;dt(r,h,l<o.i?o.ins:0),s&&l<o.i&&Ai(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?ze.createSet(r,s):Sn.create(r);throw new Error("Mismatched change set lengths")}}function Sm(n,e,t=!1){let i=[],r=t?[]:null,s=new ro(n),o=new ro(e);for(let a=!1;;){if(s.done&&o.done)return r?ze.createSet(i,r):Sn.create(i);if(s.ins==0)dt(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)dt(i,0,o.ins,a),r&&Ai(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;dt(i,l,c,a),r&&c&&Ai(r,i,o.text)}else o.ins==-1?(dt(i,s.off?0:s.len,l,a),r&&Ai(r,i,s.textBit(l))):(dt(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ai(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>h),s.forward2(l),o.forward(l)}}}}class ro{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ye.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ye.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class er{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new er(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return $.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return $.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return $.range(e.anchor,e.head)}static create(e,t,i){return new er(e,t,i)}}class ${constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:$.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new $([this.main],0)}addRange(e,t=!0){return $.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,$.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new $(e.ranges.map(t=>er.fromJSON(t)),e.main)}static single(e,t=e){return new $([$.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return $.normalized(e.slice(),t);i=s.to}return new $(e,t)}static cursor(e,t=0,i,r){return er.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r!=null?r:16777215)<<6)}static range(e,t,i,r){let s=(i!=null?i:16777215)<<6|(r==null?7:Math.min(6,r));return t<e?er.create(t,e,48|s):er.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?$.range(l,a):$.range(a,l))}}return new $(e,t)}}function Am(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let zh=0;class G{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=zh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new G(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Yh),!!e.static,e.enables)}of(e){return new za([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new za(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new za(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Yh(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class za{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=zh++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,f){if(l&&f.docChanged||h&&(f.docChanged||f.selection)||Kh(u,c)){let d=i(u);if(a?!km(d,u.values[o],r):!r(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d,p=f.config.address[s];if(p!=null){let m=Ja(f,p);if(this.dependencies.every(g=>g instanceof G?f.facet(g)===u.facet(g):g instanceof nt?f.field(g,!1)==u.field(g,!1):!0)||(a?km(d=i(u),m,r):r(d=i(u),m)))return u.values[o]=m,0}else d=i(u);return u.values[o]=d,1}}}}function km(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Kh(n,e){let t=!1;for(let i of e)oo(n,i)&1&&(t=!0);return t}function z1(n,e,t){let i=t.map(l=>n[l.id]),r=t.map(l=>l.type),s=i.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let h=[];for(let c=0;c<i.length;c++){let u=Ja(l,i[c]);if(r[c]==2)for(let f of u)h.push(f);else h.push(u)}return e.combine(h)}return{create(l){for(let h of i)oo(l,h);return l.values[o]=a(l),1},update(l,h){if(!Kh(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,h){let c=Kh(l,i),u=h.config.facets[e.id],f=h.facet(e);if(u&&!c&&Yh(t,u))return l.values[o]=f,0;let d=a(l);return e.compare(d,f)?(l.values[o]=f,0):(l.values[o]=d,1)}}}const Pm=G.define({static:!0});class nt{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new nt(zh++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Pm).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Pm.of({field:this,create:e})]}get extension(){return this}}const tr={lowest:4,low:3,default:2,high:1,highest:0};function so(n){return e=>new Tm(e,n)}const ki={highest:so(tr.highest),high:so(tr.high),default:so(tr.default),low:so(tr.low),lowest:so(tr.lowest)};class Tm{constructor(e,t){this.inner=e,this.prec=t}}class Ya{of(e){return new Jh(this,e)}reconfigure(e){return Ya.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Jh{constructor(e,t){this.compartment=e,this.inner=t}}class Ka{constructor(e,t,i,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),o=new Map;for(let f of Y1(e,t,o))f instanceof nt?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],h=[];for(let f of r)a[f.id]=h.length<<1,h.push(d=>f.slot(d));let c=i==null?void 0:i.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=c&&c[f]||[];if(d.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,Yh(m,d))l.push(i.facet(p));else{let g=p.combine(d.map(O=>O.value));l.push(i&&p.compare(g,i.facet(p))?i.facet(p):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=h.length<<1,h.push(O=>g.dynamicSlot(O)));a[p.id]=h.length<<1,h.push(g=>z1(g,p,d))}}let u=h.map(f=>f(a));return new Ka(e,o,u,a,l,s)}}function Y1(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let h=i[l].indexOf(o);h>-1&&i[l].splice(h,1),o instanceof Jh&&t.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof Jh){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,a)}else if(o instanceof Tm)s(o.inner,o.prec);else if(o instanceof nt)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof za)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,tr.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(n,tr.default),i.reduce((o,a)=>o.concat(a))}function oo(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function Ja(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Em=G.define(),eu=G.define({combine:n=>n.some(e=>e),static:!0}),_m=G.define({combine:n=>n.length?n[0]:void 0,static:!0}),Qm=G.define(),Cm=G.define(),Im=G.define(),Rm=G.define({combine:n=>n.length?n[0]:!1});class An{constructor(e,t){this.type=e,this.value=t}static define(){return new K1}}class K1{of(e){return new An(this,e)}}class J1{constructor(e){this.map=e}of(e){return new oe(this,e)}}class oe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new oe(this.type,t)}is(e){return this.type==e}static define(e={}){return new J1(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}}oe.reconfigure=oe.define(),oe.appendConfig=oe.define();let bt=class Fa{constructor(e,t,i,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Am(i,t.newLength),s.some(a=>a.type==Fa.time)||(this.annotations=s.concat(Fa.time.of(Date.now())))}static create(e,t,i,r,s,o){return new Fa(e,t,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Fa.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};bt.time=An.define(),bt.userEvent=An.define(),bt.addToHistory=An.define(),bt.remote=An.define();function eS(n,e){let t=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],o=n[i++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function $m(n,e,t){var i;let r,s,o;return t?(r=e.changes,s=ze.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:oe.mapEffects(n.effects,r).concat(oe.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function tu(n,e,t){let i=e.selection,r=Ur(e.annotations);return e.userEvent&&(r=r.concat(bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof ze?e.changes:ze.of(e.changes||[],t,n.facet(_m)),selection:i&&(i instanceof $?i:$.single(i.anchor,i.head)),effects:Ur(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Mm(n,e,t){let i=tu(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=$m(i,tu(n,e[s],o?i.changes.newLength:n.doc.length),o)}let r=bt.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return nS(t?tS(r):r)}function tS(n){let e=n.startState,t=!0;for(let r of e.facet(Qm)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:eS(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=ze.empty(e.doc.length);else{let o=n.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=bt.create(e,r,n.selection&&n.selection.map(s),oe.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(Cm);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof bt?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof bt?n=s[0]:n=Mm(e,Ur(s),!1)}return n}function nS(n){let e=n.startState,t=e.facet(Im),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=$m(i,tu(e,s,n.changes.newLength),!0))}return i==n?n:bt.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const iS=[];function Ur(n){return n==null?iS:Array.isArray(n)?n:[n]}var Be=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Be||(Be={}));const rS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let nu;try{nu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(n){}function sS(n){if(nu)return nu.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||rS.test(t)))return!0}return!1}function oS(n){return e=>{if(!/\S/.test(e))return Be.Space;if(sS(e))return Be.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Be.Word;return Be.Other}}class me{constructor(e,t,i,r,s,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)oo(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return oo(this,i),Ja(this,i)}update(...e){return Mm(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(Ya.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,h)=>r.set(h,l)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(oe.reconfigure)?(t=null,i=a.value):a.is(oe.appendConfig)&&(t=null,i=Ur(i).concat(a.value));let s;t?s=e.startState.values.slice():(t=Ka.resolve(i,r,this),s=new me(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values);let o=e.startState.facet(eu)?e.newSelection:e.newSelection.asSingle();new me(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:$.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Ur(i.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),h=this.changes(l.changes),c=h.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(c);let u=r.mapDesc(h,!0);s.push(l.range.map(u)),r=r.compose(c),o=oe.mapEffects(o,c).concat(oe.mapEffects(Ur(l.effects),u))}return{changes:r,selection:$.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ze?e:ze.of(e,this.doc.length,this.facet(me.lineSeparator))}toText(e){return ye.of(e.split(this.facet(me.lineSeparator)||Vh))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(oo(this,t),Ja(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof nt&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return me.create({doc:e.doc,selection:$.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ka.resolve(e.extensions||[],new Map),i=e.doc instanceof ye?e.doc:ye.of((e.doc||"").split(t.staticFacet(me.lineSeparator)||Vh)),r=e.selection?e.selection instanceof $?e.selection:$.single(e.selection.anchor,e.selection.head):$.single(0);return Am(r,i.length),t.staticFacet(eu)||(r=r.asSingle()),new me(t,i,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(me.tabSize)}get lineBreak(){return this.facet(me.lineSeparator)||`
`}get readOnly(){return this.facet(Rm)}phrase(e,...t){for(let i of this.facet(me.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(Em))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return oS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=at(t,o,!1);if(s(t.slice(l,o))!=Be.Word)break;o=l}for(;a<r;){let l=at(t,a);if(s(t.slice(a,l))!=Be.Word)break;a=l}return o==a?null:$.range(o+i,a+i)}}me.allowMultipleSelections=eu,me.tabSize=G.define({combine:n=>n.length?n[0]:4}),me.lineSeparator=_m,me.readOnly=Rm,me.phrases=G.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}}),me.languageData=Em,me.changeFilter=Qm,me.transactionFilter=Cm,me.transactionExtender=Im,Ya.reconfigure=oe.define();function kn(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class nr{eq(e){return this==e}range(e,t=e){return iu.create(e,t,this)}}nr.prototype.startSide=nr.prototype.endSide=0,nr.prototype.point=!1,nr.prototype.mapMode=ct.TrackDel;let iu=class X1{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new X1(e,t,i)}};function ru(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class su{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,h=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return h>=0?o:a;h>=0?a=l:o=l+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],c=this.from[l]+e,u=this.to[l]+e,f,d;if(c==u){let p=t.mapPos(c,h.startSide,h.mapMode);if(p==null||(f=d=p,h.startSide!=h.endSide&&(d=t.mapPos(c,h.endSide),d<f)))continue}else if(f=t.mapPos(c,h.startSide),d=t.mapPos(u,h.endSide),f>d||f==d&&h.startSide>0&&h.endSide<=0)continue;(d-f||h.endSide-h.startSide)<0||(o<0&&(o=f),h.point&&(a=Math.max(a,d-f)),i.push(h),r.push(f-o),s.push(d-o))}return{mapped:i.length?new su(r,s,i,a):null,pos:o}}}class be{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new be(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(ru)),this.isEmpty)return t.length?be.of(t):this;let a=new Zm(this,null,-1).goto(0),l=0,h=[],c=new Kn;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let u=t[l++];c.addInner(u.from,u.to,u.value)||h.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||h.push(iu.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?be.empty:this.nextLayer.update({add:h,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],h=e.touchesRange(a,a+l.length);if(h===!1)r=Math.max(r,l.maxPoint),t.push(l),i.push(e.mapPos(a));else if(h===!0){let{mapped:c,pos:u}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),t.push(c),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new be(i,t,s||be.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return ao.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ao.from(e).goto(t)}static compare(e,t,i,r,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=Bm(o,a,i),h=new lo(o,l,s),c=new lo(a,l,s);i.iterGaps((u,f,d)=>Lm(h,u,c,f,d,r)),i.empty&&i.length==0&&Lm(h,0,c,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Bm(s,o),l=new lo(s,a,0).goto(i),h=new lo(o,a,0).goto(i);for(;;){if(l.to!=h.to||!au(l.active,h.active)||l.point&&(!h.point||!l.point.eq(h.point)))return!1;if(l.to>r)return!0;l.next(),h.next()}}static spans(e,t,i,r,s=-1){let o=new lo(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);r.point(a,h,o.point,c,u,o.pointRank),l=Math.min(o.openEnd(h),c.length)}else h>a&&(r.span(a,h,o.active,l),l=o.openEnd(h));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,t=!1){let i=new Kn;for(let r of e instanceof iu?[e]:t?aS(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return be.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=be.empty;r=r.nextLayer)t=new be(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}be.empty=new be([],[],null,-1);function aS(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(ru(e,i)>0)return n.slice().sort(ru);e=i}return n}be.empty.nextLayer=be.empty;class Kn{finishChunk(e){this.chunks.push(new su(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Kn)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(be.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=be.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Bm(n,e,t){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class Zm{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ao{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new Zm(o,t,i,s));return r.length==1?r[0]:new ao(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)ou(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)ou(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ou(this.heap,0)}}}function ou(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class lo{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ao.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){el(this.active,e),el(this.activeTo,e),el(this.activeRank,e),this.minActive=Nm(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||r-this.activeTo[t])>0;)t++;tl(this.active,t,i),tl(this.activeTo,t,r),tl(this.activeRank,t,s),e&&tl(e,t,this.cursor.from),this.minActive=Nm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&el(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Lm(n,e,t,i,r,s){n.goto(e),t.goto(i);let o=i+r,a=i,l=i-e;for(;;){let h=n.to+l-t.to||n.endSide-t.endSide,c=h<0?n.to+l:t.to,u=Math.min(c,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&au(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,u,n.point,t.point):u>a&&!au(n.active,t.active)&&s.compareRange(a,u,n.active,t.active),c>o)break;a=c,h<=0&&n.next(),h>=0&&t.next()}}function au(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function el(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function tl(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function Nm(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Xr(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=at(n,r));return i}function lu(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=at(n,r)}return i===!0?-1:n.length}const cu="ͼ",Dm=typeof Symbol=="undefined"?"__"+cu:Symbol.for(cu),hu=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),jm=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Pi{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,c,f)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||f)&&l.push((i&&!u&&!h?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=jm[Dm]||1;return jm[Dm]=e+1,cu+e.toString(36)}static mount(e,t,i){let r=e[hu],s=i&&i.nonce;r?s&&r.setNonce(s):r=new lS(e,s),r.mount(Array.isArray(t)?t:[t],e)}}let qm=new Map;class lS{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=qm.get(i);if(s)return e[hu]=s;this.sheet=new r.CSSStyleSheet,qm.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[hu]=this}mount(e,t){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},co={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cS=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),hS=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ht=0;ht<10;ht++)Ti[48+ht]=Ti[96+ht]=String(ht);for(var ht=1;ht<=24;ht++)Ti[ht+111]="F"+ht;for(var ht=65;ht<=90;ht++)Ti[ht]=String.fromCharCode(ht+32),co[ht]=String.fromCharCode(ht);for(var uu in Ti)co.hasOwnProperty(uu)||(co[uu]=Ti[uu]);function uS(n){var e=cS&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||hS&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?co:Ti)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ho(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function fu(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function nl(n,e){if(!e.anchorNode)return!1;try{return fu(n,e.anchorNode)}catch(t){return!1}}function Gr(n){return n.nodeType==3?rr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function uo(n,e,t,i){return t?Um(n,e,t,i,-1)||Um(n,e,t,i,1):!1}function ir(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function il(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Um(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Pn(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=ir(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Pn(n):0}else return!1}}function Pn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function fo(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function fS(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Xm(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function dS(n,e,t,i,r,s,o,a){let l=n.ownerDocument,h=l.defaultView||window;for(let c=n,u=!1;c&&!u;)if(c.nodeType==1){let f,d=c==l.body,p=1,m=1;if(d)f=fS(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:m}=Xm(c,y)),f={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*m}}let g=0,O=0;if(r=="nearest")e.top<f.top?(O=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+O&&(O=e.bottom-f.bottom+O+o)):e.bottom>f.bottom&&(O=e.bottom-f.bottom+o,t<0&&e.top-O<f.top&&(O=-(f.top+O-e.top+o)));else{let y=e.bottom-e.top,w=f.bottom-f.top;O=(r=="center"&&y<=w?e.top+y/2-w/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(g=-(f.left-e.left+s),t>0&&e.right>f.right+g&&(g=e.right-f.right+g+s)):e.right>f.right&&(g=e.right-f.right+s,t<0&&e.left<f.left+g&&(g=-(f.left+g-e.left+s))):g=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,g||O)if(d)h.scrollBy(g,O);else{let y=0,w=0;if(O){let k=c.scrollTop;c.scrollTop+=O/m,w=(c.scrollTop-k)*m}if(g){let k=c.scrollLeft;c.scrollLeft+=g/p,y=(c.scrollLeft-k)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-g)<1&&(i="nearest"),w&&Math.abs(w-O)<1&&(r="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function pS(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class mS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Pn(t):0),i,Math.min(e.focusOffset,i?Pn(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Fr=null;function Gm(n){if(n.setActive)return n.setActive();if(Fr)return n.focus(Fr);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Fr==null?{get preventScroll(){return Fr={preventScroll:!0},!0}}:void 0),!Fr){Fr=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Fm;function rr(n,e,t=e){let i=Fm||(Fm=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Vr(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function gS(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Vm(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function OS(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Pn(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Pn(t))}else{if(t==n)return!0;i=ir(t),t=t.parentNode}}function Hm(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Wm(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Pn(t)}else if(t.parentNode&&!il(t))i=ir(t),t=t.parentNode;else return null}}function zm(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!il(t))i=ir(t)+1,t=t.parentNode;else return null}}class pt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new pt(e.parentNode,ir(e),t)}static after(e,t){return new pt(e.parentNode,ir(e)+1,t)}}const du=[];class ke{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=ke.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Ym(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=Ym(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=Pn(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ke.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,h=i,c=i;l<this.children.length;l++){let u=this.children[l],f=h+u.length;if(h<e&&f>t)return u.domBoundsAround(e,t,h);if(f>=e&&r==-1&&(r=l,s=h),h>t&&u.dom.parentNode==this.dom){o=l,a=c;break}c=f,h=f+u.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=du){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Km(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ke.prototype.breakAfter=0;function Ym(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Km{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Jm(n,e,t,i,r,s,o,a,l){let{children:h}=n,c=h.length?h[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==i&&c&&!o&&!f&&s.length<2&&c.merge(t,r,s.length?u:null,t==0,a,l))){if(i<h.length){let d=h[i];d&&(r<d.length||d.breakAfter&&(u!=null&&u.breakAfter))?(e==i&&(d=d.split(r),r=0),!f&&u&&d.merge(0,r,u,!0,0,l)?s[s.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,l),s.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(h[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,l)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}function eg(n,e,t,i,r,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),u=e-t;for(let f of i)u+=f.length;n.length+=u,Jm(n,h,c,a,l,i,0,r,s)}let _t=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},pu=typeof document!="undefined"?document:{documentElement:{style:{}}};const mu=/Edge\/(\d+)/.exec(_t.userAgent),tg=/MSIE \d/.test(_t.userAgent),gu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_t.userAgent),rl=!!(tg||gu||mu),ng=!rl&&/gecko\/(\d+)/i.test(_t.userAgent),Ou=!rl&&/Chrome\/(\d+)/.exec(_t.userAgent),ig="webkitFontSmoothing"in pu.documentElement.style,rg=!rl&&/Apple Computer/.test(_t.vendor),sg=rg&&(/Mobile\/\w+/.test(_t.userAgent)||_t.maxTouchPoints>2);var V={mac:sg||/Mac/.test(_t.platform),windows:/Win/.test(_t.platform),linux:/Linux|X11/.test(_t.platform),ie:rl,ie_version:tg?pu.documentMode||6:gu?+gu[1]:mu?+mu[1]:0,gecko:ng,gecko_version:ng?+(/Firefox\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,chrome:!!Ou,chrome_version:Ou?+Ou[1]:0,ios:sg,android:/Android\b/.test(_t.userAgent),webkit:ig,safari:rg,webkit_version:ig?+(/\bAppleWebKit\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,tabSize:pu.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const yS=256;class hn extends ke{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof hn)||this.length-(t-e)+i.length>yS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new hn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new pt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return bS(this.dom,e,t)}}class Jn extends ke{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Vm(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,s,o){return i&&(!(i instanceof Jn&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(eg(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Jn(this.mark,t,o)}domAtPos(e){return og(this,e)}coordsAt(e,t){return lg(this,e,t)}}function bS(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?V.chrome||V.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):t<0?r--:s<i&&s++;let a=rr(n,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return V.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,h=>h.width)||l),o?fo(l,o<0):l||null}class Ei extends ke{static create(e,t,i){return new Ei(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ei.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,s,o){return i&&(!(i instanceof Ei)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ei&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ye.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ye.empty}domAtPos(e){return(this.length?e==0:this.side>0)?pt.before(this.dom):pt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return fo(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Hr extends ke{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Hr&&e.side==this.side}split(){return new Hr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?pt.before(this.dom):pt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ye.empty}get isHidden(){return!0}}hn.prototype.children=Ei.prototype.children=Hr.prototype.children=du;function og(n,e){let t=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new pt(t,0)}function ag(n,e,t){let i,{children:r}=n;t>0&&e instanceof Jn&&r.length&&(i=r[r.length-1])instanceof Jn&&i.mark.eq(e.mark)?ag(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function lg(n,e,t){let i=null,r=-1,s=null,o=-1;function a(h,c){for(let u=0,f=0;u<h.children.length&&f<=c;u++){let d=h.children[u],p=f+d.length;p>=c&&(d.children.length?a(d,c-f):(!s||s.isHidden&&t>0)&&(p>c||f==p&&d.getSide()>0)?(s=d,o=c-f):(f<c||f==p&&d.getSide()<0&&!d.isHidden)&&(i=d,r=c-f)),f=p}}a(n,e);let l=(t<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),t):vS(n)}function vS(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Gr(e);return t[t.length-1]||null}function yu(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const cg=Object.create(null);function sl(n,e,t){if(n==e)return!0;n||(n=cg),e||(e=cg);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(r.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function bu(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function wS(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Tn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var vt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(vt||(vt={}));class z extends nr{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new po(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new _i(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=hg(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new _i(e,i,r,t,e.widget||null,!0)}static line(e){return new mo(e)}static set(e,t=!1){return be.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}z.none=be.empty;class po extends z{constructor(e){let{start:t,end:i}=hg(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof po&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&sl(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}po.prototype.point=!1;class mo extends z{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof mo&&this.spec.class==e.spec.class&&sl(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}mo.prototype.mapMode=ct.TrackBefore,mo.prototype.point=!0;class _i extends z{constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?ct.TrackBefore:ct.TrackAfter:ct.TrackDel}get type(){return this.startSide!=this.endSide?vt.WidgetRange:this.startSide<=0?vt.WidgetBefore:vt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof _i&&xS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}_i.prototype.point=!0;function hg(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function xS(n,e){return n==e||!!(n&&e&&n.compare(e))}function vu(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Fe extends ke{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,o){if(i){if(!(i instanceof Fe))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),eg(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new Fe;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sl(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ag(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=yu(t,this.attrs||{})),i&&(this.attrs=yu({class:i},this.attrs||{}))}domAtPos(e){return og(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Vm(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bu(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ke.get(r)instanceof Jn;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=ke.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!V.ios||!this.children.some(s=>s instanceof hn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof hn)||/[^ -~]/.test(i.text))return null;let r=Gr(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=lg(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Fe&&this.children.length==0&&e.children.length==0&&sl(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=t){if(s instanceof Fe)return s;if(o>t)break}r=o+s.breakAfter}return null}}class ei extends ke{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,o){return i&&(!(i instanceof ei)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?pt.before(this.dom):pt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new ei(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return du}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ye.empty}domBoundsAround(){return null}become(e){return e instanceof ei&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof wu?null:fo(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class wu extends Tn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class go{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ei&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Fe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ol(new Hr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ei)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(ol(new hn(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof _i){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof _i)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ei(i.widget||Wr.block,a,i));else{let l=Ei.create(i.widget||Wr.inline,a,a?0:i.startSide),h=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<t||i.startSide>0),c=!l.isEditable&&(e<t||s>r.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(u.append(ol(new Hr(1),r),s),s=r.length+Math.max(0,s-r.length)),u.append(ol(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let o=new go(e,t,i,s);return o.openEnd=be.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ol(n,e){for(let t of e)n=new Jn(t,[n],n.length);return n}class Wr extends Tn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Wr.inline=new Wr("span"),Wr.block=new Wr("div");var Re=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Re||(Re={}));const sr=Re.LTR,xu=Re.RTL;function ug(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const SS=ug("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),AS=ug("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Su=Object.create(null),En=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Su[e]=t,Su[t]=-e}function fg(n){return n<=247?SS[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?AS[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const kS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Qi{get dir(){return this.level%2?xu:sr}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function dg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!dg(i.inner,r.inner))return!1}return!0}const Pe=[];function PS(n,e,t,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:t,l=s?256:r;for(let h=o,c=l,u=l;h<a;h++){let f=fg(n.charCodeAt(h));f==512?f=c:f==8&&u==4&&(f=16),Pe[h]=f==4?2:f,f&7&&(u=f),c=f}for(let h=o,c=l,u=l;h<a;h++){let f=Pe[h];if(f==128)h<a-1&&c==Pe[h+1]&&c&24?f=Pe[h]=c:Pe[h]=256;else if(f==64){let d=h+1;for(;d<a&&Pe[d]==64;)d++;let p=h&&c==8||d<t&&Pe[d]==8?u==1?1:8:256;for(let m=h;m<d;m++)Pe[m]=p;h=d-1}else f==8&&u==1&&(Pe[h]=1);c=f,f&7&&(u=f)}}}function TS(n,e,t,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let h=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let u=h,f,d,p;u<c;u++)if(d=Su[f=n.charCodeAt(u)])if(d<0){for(let m=a-3;m>=0;m-=3)if(En[m+1]==-d){let g=En[m+2],O=g&2?r:g&4?g&1?s:r:0;O&&(Pe[u]=Pe[En[m]]=O),a=m;break}}else{if(En.length==189)break;En[a++]=u,En[a++]=f,En[a++]=l}else if((p=Pe[u])==2||p==1){let m=p==r;l=m?0:1;for(let g=a-3;g>=0;g-=3){let O=En[g+2];if(O&2)break;if(m)En[g+2]|=2;else{if(O&4)break;En[g+2]|=4}}}}}function ES(n,e,t,i){for(let r=0,s=i;r<=t.length;r++){let o=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let l=o;l<a;){let h=Pe[l];if(h==256){let c=l+1;for(;;)if(c==a){if(r==t.length)break;c=t[r++].to,a=r<t.length?t[r].from:e}else if(Pe[c]==256)c++;else break;let u=s==1,f=(c<e?Pe[c]:i)==1,d=u==f?u?1:2:i;for(let p=c,m=r,g=m?t[m-1].to:n;p>l;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),Pe[--p]=d;l=c}else s=h,l++}}}function Au(n,e,t,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,h=0;l<t;){let c=!0,u=!1;if(h==s.length||l<s[h].from){let m=Pe[l];m!=a&&(c=!1,u=m==16)}let f=!c&&a==1?[]:null,d=c?i:i+1,p=l;e:for(;;)if(h<s.length&&p==s[h].from){if(u)break e;let m=s[h];if(!c)for(let g=m.to,O=h+1;;){if(g==t)break e;if(O<s.length&&s[O].from==g)g=s[O++].to;else{if(Pe[g]==a)break e;break}}if(h++,f)f.push(m);else{m.from>l&&o.push(new Qi(l,m.from,d));let g=m.direction==sr!=!(d%2);ku(n,g?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==t||(c?Pe[p]!=a:Pe[p]==a))break;p++}f?Au(n,l,p,i+1,r,f,o):l<p&&o.push(new Qi(l,p,d)),l=p}else for(let l=t,h=s.length;l>e;){let c=!0,u=!1;if(!h||l>s[h-1].to){let m=Pe[l-1];m!=a&&(c=!1,u=m==16)}let f=!c&&a==1?[]:null,d=c?i:i+1,p=l;e:for(;;)if(h&&p==s[h-1].to){if(u)break e;let m=s[--h];if(!c)for(let g=m.from,O=h;;){if(g==e)break e;if(O&&s[O-1].to==g)g=s[--O].from;else{if(Pe[g-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Qi(m.to,l,d));let g=m.direction==sr!=!(d%2);ku(n,g?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?Pe[p-1]!=a:Pe[p-1]==a))break;p--}f?Au(n,p,l,i+1,r,f,o):p<l&&o.push(new Qi(p,l,d)),l=p}}function ku(n,e,t,i,r,s,o){let a=e%2?2:1;PS(n,r,s,i,a),TS(n,r,s,i,a),ES(r,s,i,a),Au(n,r,s,e,t,i,o)}function _S(n,e,t){if(!n)return[new Qi(0,0,e==xu?1:0)];if(e==sr&&!t.length&&!kS.test(n))return pg(n.length);if(t.length)for(;n.length>Pe.length;)Pe[Pe.length]=256;let i=[],r=e==sr?0:1;return ku(n,r,r,t,0,n.length,i),i}function pg(n){return[new Qi(0,n,0)]}let mg="";function QS(n,e,t,i,r){var s;let o=i.head-n.from,a=Qi.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],h=l.side(r,t);if(o==h){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,t),h=l.side(r,t)}let c=at(n.text,o,l.forward(r,t));(c<l.from||c>l.to)&&(c=h),mg=n.text.slice(Math.min(o,c),Math.max(o,c));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&c==h&&u.level+(r?0:1)<l.level?$.cursor(u.side(!r,t)+n.from,u.forward(r,t)?1:-1,u.level):$.cursor(c+n.from,l.forward(r,t)?-1:1,l.level)}function CS(n,e,t){for(let i=e;i<t;i++){let r=fg(n.charCodeAt(i));if(r==1)return sr;if(r==2||r==4)return xu}return sr}const gg=G.define(),Og=G.define(),yg=G.define(),bg=G.define(),Pu=G.define(),vg=G.define(),wg=G.define(),Tu=G.define(),Eu=G.define(),xg=G.define({combine:n=>n.some(e=>e)}),Sg=G.define({combine:n=>n.some(e=>e)}),Ag=G.define();class zr{constructor(e,t="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new zr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new zr($.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const al=oe.define({map:(n,e)=>n.map(e)}),kg=oe.define();function Qt(n,e,t){let i=n.facet(bg);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ci=G.define({combine:n=>n.length?n[0]:!0});let IS=0;const Oo=G.define();class Xe{constructor(e,t,i,r,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=t||{};return new Xe(IS++,e,i,r,a=>{let l=[Oo.of(a)];return o&&l.push(yo.of(h=>{let c=h.plugin(a);return c?o(c):z.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return Xe.define(i=>new e(i),t)}}class _u{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Qt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(r){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Qt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Qt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Pg=G.define(),Qu=G.define(),yo=G.define(),Tg=G.define(),Cu=G.define(),Eg=G.define();function _g(n,e){let t=n.state.facet(Eg);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(n):s),r=[];return be.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let h=s-e.from,c=o-e.from,u=r;for(let f=a.length-1;f>=0;f--,l--){let d=a[f].spec.bidiIsolate,p;if(d==null&&(d=CS(e.text,h,c)),l>0&&u.length&&(p=u[u.length-1]).to==h&&p.direction==d)p.to=c,u=p.inner;else{let m={from:h,to:c,direction:d,inner:[]};u.push(m),u=m.inner}}}}),r}const Qg=G.define();function Iu(n){let e=0,t=0,i=0,r=0;for(let s of n.state.facet(Qg)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:i,bottom:r}}const bo=G.define();class Kt{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Kt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],h=o-a,c=l?l.fromB:1e9;for(;s<t.length&&t[s]<c;){let u=t[s],f=t[s+1],d=Math.max(a,u),p=Math.min(c,f);if(d<=p&&new Kt(d+h,p+h,d,p).addToSet(i),f>c)break;s+=2}if(!l)return i;new Kt(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class ll{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ze.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Kt(s,o,a,l))),this.changedRanges=r}static create(e,t,i){return new ll(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Cg extends ke{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=z.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Fe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Kt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!NS(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?$S(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:c}=this.hasComposition;i=new Kt(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(V.ie||V.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=ZS(o,a,e.changes);return i=Kt.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=V.chrome||V.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ei&&o.widget instanceof wu&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:h,fromB:c,toB:u}=a,f,d,p,m;if(i&&i.range.fromB<u&&i.range.toB>c){let k=go.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),x=go.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,p=k.openStart,m=x.openEnd;let T=this.compositionView(i);x.breakAtStart?T.breakAfter=1:x.content.length&&T.merge(T.length,T.length,x.content[0],!1,x.openStart,0)&&(T.breakAfter=x.content[0].breakAfter,x.content.shift()),k.content.length&&T.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(T).concat(x.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:m}=go.build(this.view.state.doc,c,u,this.decorations,this.dynamicDecorationMap));let{i:g,off:O}=s.findPos(h,1),{i:y,off:w}=s.findPos(l,-1);Jm(this,y,w,g,O,f,d,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(kg)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new hn(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new Jn(r,[t],t.length);let i=new Fe;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=ke.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],t(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&nl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(V.gecko&&a.empty&&!this.hasComposition&&RS(l)){let u=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(u,l.node.childNodes[l.offset]||null)),l=h=new pt(u,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!uo(l.node,l.offset,c.anchorNode,c.anchorOffset)||!uo(h.node,h.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{V.android&&V.chrome&&this.dom.contains(c.focusNode)&&LS(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=ho(this.view.root);if(u)if(a.empty){if(V.gecko){let f=MS(l.node,l.offset);if(f&&f!=3){let d=(f==1?Wm:zm)(l.node,l.offset);d&&(l=new pt(d.node,d.offset))}}u.collapse(l.node,l.offset),a.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=a.bidiLevel)}else if(u.extend){u.collapse(l.node,l.offset);try{u.extend(h.node,h.offset)}catch(f){}}else{let f=document.createRange();a.anchor>a.head&&([l,h]=[h,l]),f.setEnd(h.node,h.offset),f.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,h)),this.impreciseAnchor=l.precise?null:new pt(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new pt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&uo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=ho(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Fe.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!l||!h||l.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(r,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let s=ke.get(t.childNodes[r]);s instanceof Fe&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=ke.get(t.childNodes[r]);s instanceof Fe&&(i=s.domAtPos(s.length))}return i?new pt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ke.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Fe)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,h=l-a.length;if(l<e)break;if(h<=e&&(h<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof Fe&&!(i instanceof Fe&&t>=0)))i=a,r=h;else if(i&&h==e&&l==e&&a instanceof ei&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Fe))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof hn))return null;let s=at(r.text,i);if(s==i)return null;let o=rr(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Re.LTR;for(let h=0,c=0;c<this.children.length;c++){let u=this.children[c],f=h+u.length;if(f>r)break;if(h>=i){let d=u.dom.getBoundingClientRect();if(t.push(d.height),o){let p=u.dom.lastChild,m=p?Gr(p):[];if(m.length){let g=m[m.length-1],O=l?g.right-d.left:d.right-g.left;O>a&&(a=O,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=f)}}}h=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Re.RTL:Re.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Fe){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Gr(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Km(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(z.replace({widget:new wu(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return z.set(e)}updateDeco(){let e=1,t=this.view.state.facet(yo).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Tg).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(be.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Ag))try{if(h(this.view,e.range,e))return!0}catch(c){Qt(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Iu(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;dS(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Re.LTR)}}function RS(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Ig(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Wm(t.focusNode,t.focusOffset),r=zm(t.focusNode,t.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=ke.get(r.node);if(!a||a instanceof hn&&a.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let l=ke.get(i.node);!l||l instanceof hn&&l.text!=i.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function $S(n,e,t){let i=Ig(n,t);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,h=new Kt(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let u=r.parentNode;;u=u.parentNode){let f=ke.get(u);if(f instanceof Jn)c.push({node:u,deco:f.mark});else{if(f instanceof Fe||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:h,text:r,marks:c,line:u};if(u!=n.contentDOM)c.push({node:u,deco:new po({inclusive:!0,attributes:wS(u),tagName:u.tagName.toLowerCase()})});else return null}}}function MS(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let BS=class{constructor(){this.changes=[]}compareRange(e,t){vu(e,t,this.changes)}comparePoint(e,t){vu(e,t,this.changes)}};function ZS(n,e,t){let i=new BS;return be.compare(n,e,t,i),i.changes}function LS(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function NS(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function DS(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return $.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,a=s;t<0?o=at(r.text,s,!1):a=at(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let h=at(r.text,o,!1);if(i(r.text.slice(h,o))!=l)break;o=h}for(;a<r.length;){let h=at(r.text,a);if(i(r.text.slice(a,h))!=l)break;a=h}return $.range(o+r.from,a+r.from)}function jS(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function qS(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Ru(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Rg(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function $g(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function $u(n,e,t){let i,r,s,o,a=!1,l,h,c,u;for(let p=n.firstChild;p;p=p.nextSibling){let m=Gr(p);for(let g=0;g<m.length;g++){let O=m[g];r&&Ru(r,O)&&(O=Rg($g(O,r.bottom),r.top));let y=jS(e,O),w=qS(t,O);if(y==0&&w==0)return p.nodeType==3?Mg(p,e,t):$u(p,e,t);if(!i||o>w||o==w&&s>y){i=p,r=O,s=y,o=w;let k=w?t<O.top?-1:1:y?e<O.left?-1:1:0;a=!k||(k>0?g<m.length-1:g>0)}y==0?t>O.bottom&&(!c||c.bottom<O.bottom)?(l=p,c=O):t<O.top&&(!u||u.top>O.top)&&(h=p,u=O):c&&Ru(c,O)?c=$g(c,O.bottom):u&&Ru(u,O)&&(u=Rg(u,O.top))}}if(c&&c.bottom>=t?(i=l,r=c):u&&u.top<=t&&(i=h,r=u),!i)return{node:n,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Mg(i,f,t);if(a&&i.contentEditable!="false")return $u(i,f,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:d}}function Mg(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=rr(n,a,a+1).getClientRects();for(let h=0;h<l.length;h++){let c=l[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<s){let f=e>=(c.left+c.right)/2,d=f;if((V.chrome||V.gecko)&&rr(n,a).getBoundingClientRect().left==c.right&&(d=!f),u<=0)return{node:n,offset:a+(d?1:0)};r=a+(d?1:0),s=u}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function Bg(n,e,t,i=-1){var r,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:h}=n.viewState,{x:c,y:u}=e,f=u-a;if(f<0)return 0;if(f>h)return n.state.doc.length;for(let k=n.viewState.heightOracle.textHeight/2,x=!1;l=n.elementAtHeight(f),l.type!=vt.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=h);){if(x)return t?null:0;x=!0,i=-i}u=a+f;let d=l.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:Zg(n,o,l,c,u);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Zg(n,o,l,c,u);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(c,u);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(o.left+1,Math.min(o.right-1,c)),g=m.elementFromPoint(c,u),g&&!n.contentDOM.contains(g)&&(g=null));let O,y=-1;if(g&&((r=n.docView.nearest(g))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(c,u);k&&({offsetNode:O,offset:y}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(c,u);k&&({startContainer:O,startOffset:y}=k,(!n.contentDOM.contains(O)||V.safari&&US(O,y,c)||V.chrome&&XS(O,y,c))&&(O=void 0))}O&&(y=Math.min(Pn(O),y))}if(!O||!n.docView.dom.contains(O)){let k=Fe.find(n.docView,d);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:O,offset:y}=$u(k.dom,c,u))}let w=n.docView.nearest(O);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(O,y)+w.posAtStart}function Zg(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+lu(o,s,n.state.tabSize)}function US(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return rr(n,i-1,i).getBoundingClientRect().left>t}function XS(n,e,t){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():rr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Mu(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==vt.Text))return i}return t}function GS(n,e,t,i){let r=Mu(n,e.head),s=!i||r.type!=vt.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),l=n.posAtCoords({x:t==(a==Re.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return $.cursor(l,t?-1:1)}return $.cursor(t?r.to:r.from,t?-1:1)}function Lg(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let a=e,l=null;;){let h=QS(r,s,o,a,t),c=mg;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;c=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(l){if(!l(c))return a}else{if(!i)return h;l=i(c)}a=h}}function FS(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let o=i(s);return r==Be.Space&&(r=o),r==o}}function VS(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return $.cursor(r,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),c=n.documentTop;if(h)o==null&&(o=h.left-l.left),a=s<0?h.top:h.bottom;else{let d=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(r-d.from))),a=(s<0?d.top:d.bottom)+c}let u=l.left+o,f=i!=null?i:n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(f+d)*s,m=Bg(n,{x:u,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r)){let g=n.docView.coordsForChar(m),O=!g||p<g.top?-1:1;return $.cursor(m,O,void 0,o)}}}function cl(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||t||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Bu(n,e,t){let i=cl(n.state.facet(Cu).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:$.cursor(i,i<t.from?1:-1)}const vo="￿";class HS{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(me.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=vo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let a=ke.get(r),l=ke.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:il(r))||il(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=ke.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(WS(e,i.node,i.offset)?t:0))}}function WS(n,e,t){for(;;){if(!e||t<Pn(e))return!1;if(e==n)return!0;t=ir(e)+1,e=e.parentNode}}class Ng{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class zS{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=s||o?[]:JS(e),l=new HS(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=eA(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!fu(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!fu(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((V.ios||V.chrome)&&e.state.selection.main.empty&&l!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(l,h),f=Math.max(l,h),d=c.from-u,p=c.to-f;(d==0||d==1||u==0)&&(p==0||p==-1||f==e.state.doc.length)&&(l=0,h=e.state.doc.length)}this.newSel=$.single(h,l)}}}function Dg(n,e){let t,{newSel:i}=e,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,h=null;(s===8||V.android&&e.text.length<a-o)&&(l=r.to,h="end");let c=KS(n.state.doc.sliceString(o,a,vo),e.text,l-o,h);c&&(V.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==vo+vo&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:ye.of(e.text.slice(c.from,c.toB).split(vo))})}else i&&(!n.hasFocus&&n.state.facet(Ci)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(V.mac||V.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=$.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:ye.of([" "])}):V.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=$.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:ye.of([" "])}),t)return Zu(n,t,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function Zu(n,e,t,i=-1){if(V.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(V.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Vr(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Vr(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Vr(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=YS(n,e,t));return n.state.facet(vg).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function YS(n,e,t){let i,r=n.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=r.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=n.state.sliceDoc(e.from,e.to),c,u=t&&Ig(n,t.main.head);if(u){let p=e.insert.length-(e.to-e.from);c={from:u.from,to:u.to-p}}else c=n.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,g=m-h.length;if(p.to-p.from!=d||n.state.sliceDoc(g,m)!=h||p.to>=c.from&&p.from<=c.to)return{range:p};let O=r.changes({from:g,to:m,insert:e.insert}),y=p.to-s.to;return{changes:O,range:l?$.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(O)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function KS(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function JS(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new Ng(t,i)),(r!=t||s!=i)&&e.push(new Ng(r,s))),e}function eA(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?$.single(t+e,i+e):null}class tA{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,V.safari&&e.contentDOM.addEventListener("input",()=>null),V.gecko&&OA(e.contentDOM.ownerDocument)}handleEvent(e){!cA(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=nA(e),i=this.handlers,r=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ug.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),V.android&&V.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return V.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=qg.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||iA.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Vr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:V.safari&&!V.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function jg(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){Qt(t.state,r)}}}function nA(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&t(s).handlers.push(jg(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&t(s).observers.push(jg(i.value,o))}}for(let i in un)t(i).handlers.push(un[i]);for(let i in Jt)t(i).observers.push(Jt[i]);return e}const qg=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],iA="dthko",Ug=[16,17,18,20,91,92,224,225],hl=6;function ul(n){return Math.max(0,n)*.7+8}function rA(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class sA{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=pS(e.contentDOM),this.atoms=e.state.facet(Cu).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(me.allowMultipleSelections)&&oA(e,t),this.dragging=lA(e,t)&&Kg(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&rA(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Iu(this.view);e.clientX-l.left<=r+hl?t=-ul(r-e.clientX):e.clientX+l.right>=o-hl&&(t=ul(e.clientX-o)),e.clientY-l.top<=s+hl?i=-ul(s-e.clientY):e.clientY+l.bottom>=a-hl&&(i=ul(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=cl(this.atoms,r.from,0);o!=r.from&&(s=$.cursor(o,-1))}else{let o=cl(this.atoms,r.from,-1),a=cl(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=$.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?$.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function oA(n,e){let t=n.state.facet(gg);return t.length?t[0](e):V.mac?e.metaKey:e.ctrlKey}function aA(n,e){let t=n.state.facet(Og);return t.length?t[0](e):V.mac?!e.altKey:!e.ctrlKey}function lA(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=ho(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function cA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ke.get(t))&&i.ignoreEvent(e))return!1;return!0}const un=Object.create(null),Jt=Object.create(null),Xg=V.ie&&V.ie_version<15||V.ios&&V.webkit_version<604;function hA(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Gg(n,t.value)},50)}function fl(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Gg(n,e){e=fl(n.state,Tu,e);let{state:t}=n,i,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Lu!=null&&t.selection.ranges.every(l=>l.empty)&&Lu==s.toString()){let l=-1;i=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==l)return{range:h};l=c.from;let u=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:$.cursor(h.from+u.length)}})}else o?i=t.changeByRange(l=>{let h=s.line(r++);return{changes:{from:l.from,to:l.to,insert:h.text},range:$.cursor(l.from+h.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Jt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft},un.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1),Jt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Jt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},un.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(yg))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=dA(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new sA(n,e,t,i)),i&&n.observer.ignore(()=>{Gm(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Fg(n,e,t,i){if(i==1)return $.cursor(e,t);if(i==2)return DS(n.state,e,t);{let r=Fe.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,$.range(o,a)}}let Vg=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function uA(n,e,t,i){let r=Fe.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Vg(t,i,o))return-1;let a=r.coordsAt(s,1);return a&&Vg(t,i,a)?1:o&&o.bottom>=i?-1:1}function Hg(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:uA(n,t,e.clientX,e.clientY)}}const fA=V.ie&&V.ie_version<=11;let Wg=null,zg=0,Yg=0;function Kg(n){if(!fA)return n.detail;let e=Wg,t=Yg;return Wg=n,Yg=Date.now(),zg=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(zg+1)%3:1}function dA(n,e){let t=Hg(n,e),i=Kg(e),r=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),r=r.map(s.changes))},get(s,o,a){let l=Hg(n,s),h,c=Fg(n,l.pos,l.bias,i);if(t.pos!=l.pos&&!o){let u=Fg(n,t.pos,t.bias,i),f=Math.min(u.from,c.from),d=Math.max(u.to,c.to);c=f<c.from?$.range(f,d):$.range(d,f)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(h=pA(r,l.pos))?h:a?r.addRange(c):$.create([c])}}}function pA(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return $.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}un.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=t.to||o<=t.from)&&(t=$.range(s,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",fl(n.state,Eu,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1},un.dragend=n=>(n.inputState.draggedContent=null,!1);function Jg(n,e,t,i){if(t=fl(n.state,Tu,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=i&&s&&aA(n,e)?{from:s.from,to:s.to}:null,a={from:r,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}un.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,s=()=>{++r==t.length&&Jg(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Jg(n,e,i,!0),!0}return!1},un.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Xg?null:e.clipboardData;return t?(Gg(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(hA(n),!1)};function mA(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function gA(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:fl(n,Eu,e.join(n.lineBreak)),ranges:t,linewise:i}}let Lu=null;un.copy=un.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=gA(n.state);if(!t&&!r)return!1;Lu=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Xg?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(mA(n,t),!1)};const e0=An.define();function t0(n,e){let t=[];for(let i of n.facet(wg)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:e0.of(!0)}):null}function n0(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=t0(n.state,e);t?n.dispatch(t):n.update([])}},10)}Jt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),n0(n)},Jt.blur=n=>{n.observer.clearSelectionRange(),n0(n)},Jt.compositionstart=Jt.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))},Jt.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,V.chrome&&V.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))},Jt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},un.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return Zu(n,{from:l,to:h,insert:n.state.toText(s)},null),!0}}let r;if(V.chrome&&V.android&&(r=qg.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return V.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),V.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Jt.compositionend(n,e),20),!1};const i0=new Set;function OA(n){i0.has(n)||(i0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const r0=["pre-wrap","normal","pre-line","break-spaces"];let Yr=!1;function s0(){Yr=!1}class yA{constructor(e){this.lineWrapping=e,this.doc=ye.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return r0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s,o){let a=r0.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class bA{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class _n{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?vt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof _i?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new _n(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var $e=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}($e||($e={}));const dl=.001;class wt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>dl&&(Yr=!0),this.height=e)}replace(e,t,i){return wt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:c,toB:u}=r[a],f=s.lineAt(l,$e.ByPosNoHeight,i.setDoc(t),0,0),d=f.to>=h?f:s.lineAt(h,$e.ByPosNoHeight,i,0,0);for(u+=d.to-h,h=d.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,$e.ByPosNoHeight,i,0,0));c+=f.from-l,l=f.from;let p=Nu.build(i.setDoc(o),e,c,u);s=pl(s,s.replace(l,h,p))}return s.updateHeight(i,0)}static empty(){return new qt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new vA(wt.of(e.slice(0,t)),o,wt.of(e.slice(i)))}}function pl(n,e){return n==e?n:(n.constructor!=e.constructor&&(Yr=!0),e)}wt.prototype.size=1;class o0 extends wt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new _n(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qt extends o0{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new _n(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof qt||r instanceof ut&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof ut?r=new qt(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):wt.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ut extends wt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,t,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(h),u=a+c.length*l,f=Math.max(i,e-u/2);return new _n(c.from,c.length,f,u,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:u}=t.doc.line(s+h);return new _n(c,u,i+a*h,a,0)}}lineAt(e,t,i,r,s){if(t==$e.ByHeight)return this.blockAt(e,i,r,s);if(t==$e.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new _n(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),h=i.doc.lineAt(e),c=a+h.length*l,u=h.number-o,f=r+a*u+l*(h.from-s-u);return new _n(h.from,h.length,Math.max(r,Math.min(f,r+this.height-c)),c,0)}forEachLine(e,t,i,r,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(i,s);for(let c=e,u=r;c<=t;){let f=i.doc.lineAt(c);if(c==e){let p=f.number-a;u+=l*p+h*(e-s-p)}let d=l+h*f.length;o(new _n(f.from,f.length,u,d,0)),u+=d,c=f.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof ut?i[i.length-1]=new ut(s.length+r):i.push(null,new ut(r-1))}if(e>0){let s=i[0];s instanceof ut?i[0]=new ut(e+s.length):i.unshift(new ut(e-1),null)}return wt.of(i)}decomposeLeft(e,t){t.push(new ut(e-1),null)}decomposeRight(e,t){t.push(null,new ut(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],a=Math.max(t,r.from),l=-1;for(r.from>t&&o.push(new ut(r.from-t-1).updateHeight(e,t));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let u=r.heights[r.index++];l==-1?l=u:Math.abs(u-l)>=dl&&(l=-2);let f=new qt(c,u);f.outdated=!1,o.push(f),a+=c+1}a<=s&&o.push(null,new ut(s-a).updateHeight(e,a));let h=wt.of(o);return(l<0||Math.abs(h.height-this.height)>=dl||Math.abs(l-this.heightMetrics(e,t).perLine)>=dl)&&(Yr=!0),pl(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class vA extends wt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=t==$e.ByHeight?e<o:e<a,h=l?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,o,a);if(this.break||(l?h.to<a:h.from>a))return h;let c=t==$e.ByPosNoHeight?$e.ByPosNoHeight:$e.ByPos;return l?h.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(h)}forEachLine(e,t,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,r,s,o),t>=l&&this.right.forEachLine(e,t,i,a,l,o);else{let h=this.lineAt(l,$e.ByPos,i,r,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,l,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&a0(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),a0(s,a)}return wt.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?wt.of(this.break?[e,null,t]:[e,t]):(this.left=pl(this.left,e),this.right=pl(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return r&&r.from<=t+s.length&&r.more?l=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function a0(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof ut&&(i=n[e+1])instanceof ut&&n.splice(e-1,3,new ut(t.length+1+i.length))}const wA=5;class Nu{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof qt?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new qt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new o0(o,r,i)):(o||s||r>=wA)&&this.addLineDeco(r,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new ut(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qt)return e;let t=new qt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof qt)&&!this.isCovered?this.nodes.push(new qt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof qt&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Nu(i,e);return be.spans(t,i,r,s,0),s.finish(i)}}function xA(n,e,t){let i=new SA;return be.compare(n,e,t,i,0),i.changes}class SA{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&vu(e,t,this.changes,5)}}function AA(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(h==n.parentNode?r.innerHeight:l,f.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function kA(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Du{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,t){return z.replace({widget:new PA(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class PA extends Tn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class l0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=c0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Re.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Qu).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new yA(t),this.stateDeco=e.facet(yo).filter(i=>typeof i!="function"),this.heightMap=wt.empty().applyChanges(this.stateDeco,ye.empty,this.heightOracle.setDoc(e.doc),[new Kt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=z.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new ml(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?c0:new ju(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(wo(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(yo).filter(c=>typeof c!="function");let r=e.changedRanges,s=Kt.extendWithRanges(r,xA(i,this.stateDeco,e?e.changes:ze.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);s0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Yr)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let h=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Sg)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Re.RTL:Re.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,c=0;if(a.width&&a.height){let{scaleX:k,scaleY:x}=Xm(t,a);(k>.005&&Math.abs(this.scaleX-k)>.005||x>.005&&Math.abs(this.scaleY-x)>.005)&&(this.scaleX=k,this.scaleY=x,h|=8,o=l=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Hm(e.scrollDOM);let p=(this.printing?kA:AA)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:x,charWidth:T,textHeight:A}=e.docView.measureTextSize();o=x>0&&r.refresh(s,x,T,A,y/T,k),o&&(e.docView.minWidth=0,h|=8)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),s0();for(let x of this.viewports){let T=x.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?wt.empty().applyChanges(this.stateDeco,ye.empty,this.heightOracle,[new Kt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new bA(x.from,T))}Yr&&(h|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ml(r.lineAt(o-i*1e3,$e.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,$e.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<l.from||h>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(h,$e.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<l.from?f=u.top:f=u.bottom-c,l=new ml(r.lineAt(f-1e3/2,$e.ByHeight,s,0,0).from,r.lineAt(f+c+1e3/2,$e.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ml(this.heightMap.lineAt(i,$e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,$e.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Du(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Re.LTR&&!i)return[];let a=[],l=(c,u,f,d)=>{if(u-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let O of m)if(O>c&&O<u){l(c,O-10,f,d),l(O+10,u,f,d);return}let g=EA(e,O=>O.from>=f.from&&O.to<=f.to&&Math.abs(O.from-c)<s&&Math.abs(O.to-u)<s&&!m.some(y=>O.from<y&&O.to>y));if(!g){if(u<f.to&&t&&i&&t.visibleRanges.some(w=>w.from<=u&&w.to>=u)){let w=t.moveToLineBoundary($.cursor(u),!1,!0).head;w>c&&(u=w)}let O=this.gapSize(f,c,u,d),y=i||O<2e6?O:2e6;g=new Du(c,u,O,y)}a.push(g)},h=c=>{if(c.length<o||c.type!=vt.Text)return;let u=TA(c.from,c.to,this.stateDeco);if(u.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,O;if(f!=null){let y=Ol(u,f),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=y-w,O=y+w}else g=(this.visibleTop-c.top-m)/c.height,O=(this.visibleBottom-c.top+m)/c.height;d=gl(u,g),p=gl(u,O)}else{let m=u.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,O=0;if(m>2e6)for(let T of e)T.from>=c.from&&T.from<c.to&&T.size!=T.displaySize&&T.from*this.heightOracle.charWidth+O<this.pixelViewport.left&&(O=T.size-T.displaySize);let y=this.pixelViewport.left+O,w=this.pixelViewport.right+O,k,x;if(f!=null){let T=Ol(u,f),A=((w-y)/2+g)/m;k=T-A,x=T+A}else k=(y-g)/m,x=(w+g)/m;d=gl(u,k),p=gl(u,x)}d>c.from&&l(c.from,d,c,u),p<c.to&&l(p,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return a}gapSize(e,t,i,r){let s=Ol(r,i)-Ol(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Du.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=z.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];be.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||wo(this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||wo(this.heightMap.lineAt(this.scaler.fromDOM(e),$e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return wo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ml{constructor(e,t){this.from=e,this.to=t}}function TA(n,e,t){let i=[],r=n,s=0;return be.spans(t,n,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function gl({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Ol(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function EA(n,e){for(let t of n)if(e(t))return t}const c0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class ju{constructor(e,t,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let h=t.lineAt(a,$e.ByPos,e,0,0).top,c=t.lineAt(l,$e.ByPos,e,0,0).bottom;return r+=c-h,{from:a,to:l,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof ju?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function wo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new _n(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>wo(r,e)):n._content)}const yl=G.define({combine:n=>n.join(" ")}),qu=G.define({combine:n=>n.indexOf(!0)>-1}),Uu=Pi.newName(),h0=Pi.newName(),u0=Pi.newName(),f0={"&light":"."+h0,"&dark":"."+u0};function Xu(n,e,t){return new Pi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const _A=Xu("."+Uu,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},f0),QA={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Gu=V.ie&&V.ie_version<=11;class CA{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new mS,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(V.ie&&V.ie_version<=11||V.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(V.chrome&&V.chrome_version<126)&&(this.editContext=new RA(e),e.state.facet(Ci)&&(e.contentDOM.editContext=this.editContext.editContext)),Gu&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Ci)?i.root.activeElement!=this.dom:!nl(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(V.ie&&V.ie_version<=11||V.android&&V.chrome)&&!i.state.selection.main.empty&&r.focusNode&&uo(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ho(e.root);if(!t)return!1;let i=V.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&IA(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=nl(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&OS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,QA),Gu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Gu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Vr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&nl(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new zS(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=Dg(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=d0(t,e.previousSibling||e.target.previousSibling,-1),r=d0(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ci)!=e.state.facet(Ci)&&(e.view.contentDOM.editContext=e.state.facet(Ci)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function d0(n,e,t){for(;e;){let i=ke.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function p0(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return uo(o.node,o.offset,r,s)&&([t,i,r,s]=[r,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}}function IA(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return p0(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?p0(n,t):null}class RA{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s=this.toEditorPos(i.updateRangeStart),o=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:ye.of(i.text.split(`
`))};if(a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),!(a.from==a.to&&!a.insert.length)){if(this.pendingContextChange=a,!e.state.readOnly){let l=this.to-this.from+(a.to-a.from+a.insert.length);Zu(e,a,$.single(this.toEditorPos(i.selectionStart,l),this.toEditorPos(i.selectionEnd,l)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))}},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(l<h){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(z.mark({attributes:{style:c}}).range(l,h))}}}e.dispatch({effects:kg.of(z.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=ho(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,h)=>{if(i)return;let c=h.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||gS(e.parent)||document,this.viewState=new l0(e.state||me.create(e)),e.scrollTo&&e.scrollTo.is(al)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Oo).map(r=>new _u(r));for(let r of this.plugins)r.update(this);this.observer=new CA(this),this.inputState=new tA(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Cg(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(e0))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=t0(s,o),l||(a=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(me.phrases)!=this.state.facet(me.phrases))return this.setState(s);r=ll.create(this,s,e),r.flags|=a;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(u&&(u=u.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;u=new zr(d.empty?d:$.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(al)&&(u=d.value.clip(this.state))}this.viewState.update(r,u),this.bidiCache=bl.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(bo)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(yl)!=r.state.facet(yl)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(Pu))try{f(r)}catch(d){Qt(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!Dg(this,c)&&h.force&&Vr(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new l0(e),this.plugins=e.facet(Oo).map(i=>new _u(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Cg(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Oo),i=e.state.facet(Oo);if(t!=i){let r=[];for(let s of i){let o=t.indexOf(s);if(o<0)r.push(new _u(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Qt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Hm(i))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];l&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(d=>{try{return d.read(this)}catch(p){return Qt(this.state,p),m0}}),u=ll.create(this,this.state,[]),f=!1;u.flags|=l,t?t.flags|=l:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),f=this.docView.update(u),f&&this.docViewUpdate());for(let d=0;d<h.length;d++)if(c[d]!=m0)try{let p=h[d];p.write&&p.write(c[d],this)}catch(p){Qt(this.state,p)}if(f&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Pu))a(t)}get themeClasses(){return Uu+" "+(this.state.facet(qu)?u0:h0)+" "+this.state.facet(yl)}updateAttrs(){let e=g0(this,Pg,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ci)?"true":"false",class:"cm-content",style:`${V.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),g0(this,Qu,t);let i=this.observer.ignore(()=>{let r=bu(this.contentDOM,this.contentAttrs,t),s=bu(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(q.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(bo);let e=this.state.facet(q.cspNonce);Pi.mount(this.root,this.styleModules.concat(_A).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Bu(this,e,Lg(this,e,t,i))}moveByGroup(e,t){return Bu(this,e,Lg(this,e,t,i=>FS(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return $.cursor(s.side(t,r)+e.from,s.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return GS(this,e,t,i)}moveVertically(e,t,i){return Bu(this,e,VS(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Bg(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Qi.find(s,e-r.from,-1,t)];return fo(i,o.dir==Re.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(xg)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>$A)return pg(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||dg(s.isolates,i=_g(this,e))))return s.order;i||(i=_g(this,e));let r=_S(e.text,t,i);return this.bidiCache.push(new bl(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||V.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Gm(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return al.of(new zr(typeof e=="number"?$.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return al.of(new zr($.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Xe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Xe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Pi.newName(),r=[yl.of(i),bo.of(Xu(`.${i}`,e))];return t&&t.dark&&r.push(qu.of(!0)),r}static baseTheme(e){return ki.lowest(bo.of(Xu("."+Uu,e,f0)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&ke.get(i)||ke.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}q.styleModule=bo,q.inputHandler=vg,q.clipboardInputFilter=Tu,q.clipboardOutputFilter=Eu,q.scrollHandler=Ag,q.focusChangeEffect=wg,q.perLineTextDirection=xg,q.exceptionSink=bg,q.updateListener=Pu,q.editable=Ci,q.mouseSelectionStyle=yg,q.dragMovesSelection=Og,q.clickAddsSelectionRange=gg,q.decorations=yo,q.outerDecorations=Tg,q.atomicRanges=Cu,q.bidiIsolatedRanges=Eg,q.scrollMargins=Qg,q.darkTheme=qu,q.cspNonce=G.define({combine:n=>n.length?n[0]:""}),q.contentAttributes=Qu,q.editorAttributes=Pg,q.lineWrapping=q.contentAttributes.of({class:"cm-lineWrapping"}),q.announce=oe.define();const $A=4096,m0={};class bl{constructor(e,t,i,r,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Re.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new bl(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function g0(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&yu(o,t)}return t}const MA=V.mac?"mac":V.windows?"win":V.linux?"linux":"key";function BA(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<t.length-1;++l){const h=t[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function vl(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const ZA=ki.default(q.domEventHandlers({keydown(n,e){return b0(y0(e.state),n,e,"editor")}})),xo=G.define({enables:ZA}),O0=new WeakMap;function y0(n){let e=n.facet(xo),t=O0.get(e);return t||O0.set(e,t=DA(e.reduce((i,r)=>i.concat(r),[]))),t}function LA(n,e,t){return b0(y0(n.state),e,n,t)}let Ii=null;const NA=4e3;function DA(n,e=MA){let t=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,h,c)=>{var u,f;let d=t[o]||(t[o]=Object.create(null)),p=a.split(/ (?!$)/).map(O=>BA(O,e));for(let O=1;O<p.length;O++){let y=p.slice(0,O).join(" ");r(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=Ii={view:w,prefix:y,scope:o};return setTimeout(()=>{Ii==k&&(Ii=null)},NA),!0}]})}let m=p.join(" ");r(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((f=(u=d._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),h&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let f in c)c[f].run.push(d=>u(d,Fu))}let l=o[e]||o.key;if(l)for(let h of a)s(h,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let Fu=null;function b0(n,e,t,i){Fu=e;let r=uS(e),s=lt(r,0),o=Yt(s)==r.length&&r!=" ",a="",l=!1,h=!1,c=!1;Ii&&Ii.view==t&&Ii.scope==i&&(a=Ii.prefix+" ",Ug.indexOf(e.keyCode)<0&&(h=!0,Ii=null));let u=new Set,f=g=>{if(g){for(let O of g.run)if(!u.has(O)&&(u.add(O),O(t)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),h=!0)}return!1},d=n[i],p,m;return d&&(f(d[a+vl(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(V.windows&&e.ctrlKey&&e.altKey)&&(p=Ti[e.keyCode])&&p!=r?(f(d[a+vl(p,e,!0)])||e.shiftKey&&(m=co[e.keyCode])!=r&&m!=p&&f(d[a+vl(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(d[a+vl(r,e,!0)])&&(l=!0),!l&&f(d._any)&&(l=!0)),h&&(l=!0),l&&c&&e.stopPropagation(),Fu=null,l}class So{constructor(e,t,i,r,s){this.className=e,this.left=t,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=v0(e);return[new So(t,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return jA(e,t,i)}}function v0(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Re.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function w0(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let s=n.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function jA(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),s=n.textDirection==Re.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=v0(n),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=a.right-(c?parseInt(c.paddingRight):0),d=Mu(n,i),p=Mu(n,r),m=d.type==vt.Text?d:null,g=p.type==vt.Text?p:null;if(m&&(n.lineWrapping||d.widgetLineBreaks)&&(m=w0(n,i,1,m)),g&&(n.lineWrapping||p.widgetLineBreaks)&&(g=w0(n,r,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return y(w(t.from,t.to,m));{let x=m?w(t.from,null,m):k(d,!1),T=g?w(null,t.to,g):k(p,!0),A=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&x.bottom+n.defaultLineHeight/2<T.top?A.push(O(u,x.bottom,f,T.top)):x.bottom<T.top&&n.elementAtHeight((x.bottom+T.top)/2).type==vt.Text&&(x.bottom=T.top=(x.bottom+T.top)/2),y(x).concat(A).concat(y(T))}function O(x,T,A,S){return new So(e,x-l.left,T-l.top-.01,A-x,S-T+.01)}function y({top:x,bottom:T,horizontal:A}){let S=[];for(let I=0;I<A.length;I+=2)S.push(O(A[I],x,A[I+1],T));return S}function w(x,T,A){let S=1e9,I=-1e9,_=[];function R(W,b,P,M,j){let N=n.coordsAtPos(W,W==A.to?-2:2),X=n.coordsAtPos(P,P==A.from?2:-2);!N||!X||(S=Math.min(N.top,X.top,S),I=Math.max(N.bottom,X.bottom,I),j==Re.LTR?_.push(s&&b?u:N.left,s&&M?f:X.right):_.push(!s&&M?u:X.left,!s&&b?f:N.right))}let C=x!=null?x:A.from,L=T!=null?T:A.to;for(let W of n.visibleRanges)if(W.to>C&&W.from<L)for(let b=Math.max(W.from,C),P=Math.min(W.to,L);;){let M=n.state.doc.lineAt(b);for(let j of n.bidiSpans(M)){let N=j.from+M.from,X=j.to+M.from;if(N>=P)break;X>b&&R(Math.max(N,b),x==null&&N<=C,Math.min(X,P),T==null&&X>=L,j.dir)}if(b=M.to+1,b>=P)break}return _.length==0&&R(C,x==null,L,T==null,n.textDirection),{top:S,bottom:I,horizontal:_}}function k(x,T){let A=a.top+(T?x.top:x.bottom);return{top:A,bottom:A,horizontal:[]}}}function qA(n,e){return n.constructor==e.constructor&&n.eq(e)}class UA{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(wl)!=e.state.facet(wl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(wl);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!qA(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const wl=G.define();function x0(n){return[Xe.define(e=>new UA(e,n)),wl.of(n)]}const S0=!(V.ios&&V.webkit&&V.webkit_version<534),Ao=G.define({combine(n){return kn(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function XA(n={}){return[Ao.of(n),GA,FA,VA,Sg.of(!0)]}function A0(n){return n.startState.facet(Ao)!=n.state.facet(Ao)}const GA=x0({above:!0,markers(n){let{state:e}=n,t=e.facet(Ao),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||S0:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:$.cursor(r.head,r.head>r.anchor?-1:1);for(let l of So.forRange(n,o,a))i.push(l)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=A0(n);return t&&k0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){k0(e.state,n)},class:"cm-cursorLayer"});function k0(n,e){e.style.animationDuration=n.facet(Ao).cursorBlinkRate+"ms"}const FA=x0({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:So.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||A0(n)},class:"cm-selectionLayer"}),Vu={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};S0&&(Vu[".cm-line"].caretColor=Vu[".cm-content"].caretColor="transparent !important");const VA=ki.highest(q.theme(Vu)),P0=oe.define({map(n,e){return n==null?null:e.mapPos(n)}}),ko=nt.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(P0)?i.value:t,n)}}),HA=Xe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(ko);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(ko)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(ko),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(ko)!=n&&this.view.dispatch({effects:P0.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function WA(){return[ko,HA]}function T0(n,e,t,i,r){e.lastIndex=0;for(let s=n.iterRange(t,i),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function zA(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:s}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class YA{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,l,h,c)=>r(c,h,h+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,h,c)=>{let u=i(a,l,h);u&&c(h,h+a[0].length,u)};else if(i)this.addMatch=(a,l,h,c)=>c(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Kn,i=t.add.bind(t);for(let{from:r,to:s}of zA(e,this.maxLength))T0(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),h=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){u=a;break}}let f=[],d,p=(m,g,O)=>f.push(O.range(m,g));if(l==h)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<u-l.from;)this.addMatch(d,e,d.index+l.from,p);else T0(e.state.doc,this.regexp,c,u,(m,g)=>this.addMatch(g,e,m,p));t=t.update({filterFrom:c,filterTo:u,filter:(m,g)=>m<c||g>u,add:f})}}return t}}const Hu=/x/.unicode!=null?"gu":"g",KA=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Hu),JA={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wu=null;function ek(){var n;if(Wu==null&&typeof document!="undefined"&&document.body){let e=document.body.style;Wu=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Wu||!1}const xl=G.define({combine(n){let e=kn(n,{render:null,specialChars:KA,addSpecialChars:null});return(e.replaceTabs=!ek())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Hu)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Hu)),e}});function tk(n={}){return[xl.of(n),nk()]}let E0=null;function nk(){return E0||(E0=Xe.fromClass(class{constructor(n){this.view=n,this.decorations=z.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(xl)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new YA({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,s=lt(e[0],0);if(s==9){let o=r.lineAt(i),a=t.state.tabSize,l=Xr(o.text,a,i-o.from);return z.replace({widget:new ok((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=z.replace({widget:new sk(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(xl);n.startState.facet(xl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const ik="•";function rk(n){return n>=32?ik:n==10?"␤":String.fromCharCode(9216+n)}class sk extends Tn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=rk(this.code),i=e.state.phrase("Control character")+" "+(JA[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class ok extends Tn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function ak(){return ck}const lk=z.line({class:"cm-activeLine"}),ck=Xe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(lk.range(r.from)),e=r.from)}return z.set(t)}},{decorations:n=>n.decorations});class hk extends Tn{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Gr(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),r=fo(t[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function uk(n){return Xe.fromClass(class{constructor(e){this.view=e,this.placeholder=n?z.set([z.widget({widget:new hk(n),side:1}).range(0)]):z.none}get decorations(){return this.view.state.doc.length?z.none:this.placeholder}},{decorations:e=>e.decorations})}const zu=2e3;function fk(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>zu||t.off>zu||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=i;l<=r;l++){let h=n.doc.line(l);h.length<=a&&s.push($.range(h.from+o,h.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=i;l<=r;l++){let h=n.doc.line(l),c=lu(h.text,o,n.tabSize,!0);if(c<0)s.push($.cursor(h.to));else{let u=lu(h.text,a,n.tabSize);s.push($.range(h.from+c,h.from+u))}}}return s}function dk(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function _0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,s=r>zu?-1:r==i.length?dk(n,e.clientX):Xr(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:s,off:r}}function pk(n,e){let t=_0(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let a=_0(n,r);if(!a)return i;let l=fk(n.state,t,a);return l.length?o?$.create(l.concat(i.ranges)):$.create(l):i}}:null}function mk(n){let e=t=>t.altKey&&t.button==0;return q.mouseSelectionStyle.of((t,i)=>e(i)?pk(t,i):null)}const gk={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},Ok={style:"cursor: crosshair"};function yk(n={}){let[e,t]=gk[n.key||"Alt"],i=Xe.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,q.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?Ok:null})]}const Po="-10000px";class Q0{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let h=s[l],c=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let f=this.tooltips[u];f&&f.create==h.create&&(c=u)}if(c<0)o[l]=this.createTooltipView(h,l?o[l-1]:null),a&&(a[l]=!!h.above);else{let u=o[l]=this.tooltipViews[c];a&&(a[l]=t[c]),u.update&&u.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return t&&(a.forEach((l,h)=>t[h]=l),t.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function bk(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Yu=G.define({combine:n=>{var e,t,i;return{position:V.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||bk}}}),C0=new WeakMap,Ku=Xe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Yu);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Q0(n,Ju,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Yu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Po,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(V.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Po&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=Iu(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Yu).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:c}=h,u=n.pos[a],f=n.size[a];if(!u||l.clip!==!1&&(u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1)){c.style.top=Po;continue}let d=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=(e=C0.get(h))!==null&&e!==void 0?e:f.bottom-f.top,O=h.offset||wk,y=this.view.textDirection==Re.LTR,w=f.width>i.right-i.left?y?i.left:i.right-f.width:y?Math.max(i.left,Math.min(u.left-(d?14:0)+O.x,i.right-m)):Math.min(Math.max(i.left,u.left-m+(d?14:0)-O.x),i.right-m),k=this.above[a];!l.strictSide&&(k?u.top-g-p-O.y<i.top:u.bottom+g+p+O.y>i.bottom)&&k==i.bottom-u.bottom>u.top-i.top&&(k=this.above[a]=!k);let x=(k?u.top-i.top:i.bottom-u.bottom)-p;if(x<g&&h.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=Po;continue}C0.set(h,g),c.style.height=(g=x)/s+"px"}else c.style.height&&(c.style.height="");let T=k?u.top-g-p-O.y:u.bottom+p+O.y,A=w+m;if(h.overlap!==!0)for(let S of o)S.left<A&&S.right>w&&S.top<T+g&&S.bottom>T&&(T=k?S.top-g-2-p:S.bottom+p+2);if(this.position=="absolute"?(c.style.top=(T-n.parent.top)/s+"px",I0(c,(w-n.parent.left)/r)):(c.style.top=T/s+"px",I0(c,w/r)),d){let S=u.left+(y?O.x:-O.x)-(w+14-7);d.style.left=S/r+"px"}h.overlap!==!0&&o.push({left:w,top:T,right:A,bottom:T+g}),c.classList.toggle("cm-tooltip-above",k),c.classList.toggle("cm-tooltip-below",!k),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Po}},{eventObservers:{scroll(){this.maybeMeasure()}}});function I0(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const vk=q.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),wk={x:0,y:0},Ju=G.define({enables:[Ku,vk]}),Sl=G.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Al{static create(e){return new Al(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Q0(e,Sl,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const xk=Ju.compute([Sl],n=>{let e=n.facet(Sl);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Al.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Sk{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,s=1;if(i instanceof Ei)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),h=l&&l.dir==Re.RTL?-1:1;s=t.x<a.left?-h:h}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Qt(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Ku),t=e?e.manager.tooltips.findIndex(i=>i.create==Al.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Ak(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!kk(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const kl=4;function Ak(n,e){let{left:t,right:i,top:r,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=t-kl&&e.clientX<=i+kl&&e.clientY>=r-kl&&e.clientY<=s+kl}function kk(n,e,t,i,r,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=n.posAtCoords({x:i,y:r},!1);return l>=e&&l<=t}function Pk(n,e={}){let t=oe.define(),i=nt.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,ct.TrackDel);if(l!=null){let h=Object.assign(Object.create(null),a);h.pos=l,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}r=o}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(Tk)&&(r=[]);return r},provide:r=>Sl.from(r)});return{active:i,extension:[i,Xe.define(r=>new Sk(r,n,i,t,e.hoverTime||300)),xk]}}function R0(n,e){let t=n.plugin(Ku);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const Tk=oe.define(),$0=G.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function To(n,e){let t=n.plugin(M0),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const M0=Xe.fromClass(class{constructor(n){this.input=n.state.facet(Eo),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet($0);this.top=new Pl(n,!0,e.topContainer),this.bottom=new Pl(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet($0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Pl(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Pl(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Eo);if(t!=this.input){let i=t.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let h=this.specs.indexOf(l),c;h<0?(c=l(n.view),a.push(c)):(c=this.panels[h],c.update&&c.update(n)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>q.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Pl{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=B0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=B0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function B0(n){let e=n.nextSibling;return n.remove(),e}const Eo=G.define({enables:M0});class ti extends nr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ti.prototype.elementClass="",ti.prototype.toDOM=void 0,ti.prototype.mapMode=ct.TrackBefore,ti.prototype.startSide=ti.prototype.endSide=-1,ti.prototype.point=!0;const Tl=G.define(),Ek=G.define(),_k={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>be.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_o=G.define();function Qk(n){return[L0(),_o.of(Object.assign(Object.assign({},_k),n))]}const Z0=G.define({combine:n=>n.some(e=>e)});function L0(n){return[Ck]}const Ck=Xe.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(_o).map(e=>new D0(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Z0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Z0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=be.iter(this.view.state.facet(Tl),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Ik(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==vt.Text&&o){ef(t,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==vt.Text){ef(t,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(_o),t=n.state.facet(_o),i=n.docChanged||n.heightChanged||n.viewportChanged||!be.eq(n.startState.facet(Tl),n.state.facet(Tl),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new D0(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>q.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Re.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function N0(n){return Array.isArray(n)?n:[n]}function ef(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Ik{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=be.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let a=new j0(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];ef(this.cursor,r,t.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let s of e.state.facet(Ek)){let o=s(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class D0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=N0(t.markers(e)),t.initialSpacer&&(this.spacer=new j0(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=N0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!be.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class j0{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Rk(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,h=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,h=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!l)break;l.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Rk(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const $k=G.define(),Mk=G.define(),Kr=G.define({combine(n){return kn(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let s=i[r],o=t[r];i[r]=s?(a,l,h)=>s(a,l,h)||o(a,l,h):o}return i}})}});class tf extends ti{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function nf(n,e){return n.state.facet(Kr).formatNumber(e,n.state)}const Bk=_o.compute([Kr],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet($k)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new tf(nf(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(Mk)){let s=r(e,t,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Kr)!=e.state.facet(Kr),initialSpacer(e){return new tf(nf(e,q0(e.state.doc.lines)))},updateSpacer(e,t){let i=nf(t.view,q0(t.view.state.doc.lines));return i==e.number?e:new tf(i)},domEventHandlers:n.facet(Kr).domEventHandlers}));function Zk(n={}){return[Kr.of(n),L0(),Bk]}function q0(n){let e=9;for(;e<n;)e=e*10+9;return e}const Lk=new class extends ti{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Nk=Tl.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(Lk.range(r)))}return be.of(e)});function Dk(){return Nk}const U0=1024;let jk=0;class rf{constructor(e,t){this.from=e,this.to=t}}class ue{constructor(e={}){this.id=jk++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ct.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ue.closedBy=new ue({deserialize:n=>n.split(" ")}),ue.openedBy=new ue({deserialize:n=>n.split(" ")}),ue.group=new ue({deserialize:n=>n.split(" ")}),ue.isolate=new ue({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}}),ue.contextHash=new ue({perNode:!0}),ue.lookAhead=new ue({perNode:!0}),ue.mounted=new ue({perNode:!0});class El{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ue.mounted.id]}}const qk=Object.create(null);class Ct{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):qk,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ct(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ue.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(ue.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?i.name:r[s]];if(o)return o}}}}Ct.none=new Ct("",Object.create(null),0,8);class sf{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}t.push(r?new Ct(i.name,r,i.id,i.flags):i)}return new sf(t)}}const _l=new WeakMap,X0=new WeakMap;var Ye;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ye||(Ye={}));class Ve{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=El.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new lf(this.topNode,e)}cursorAt(e,t=0,i=0){let r=_l.get(this)||this.topNode,s=new lf(r);return s.moveTo(e,t),_l.set(this,s._tree),s}get topNode(){return new It(this,0,0,null)}resolve(e,t=0){let i=Qo(_l.get(this)||this.topNode,e,t,!1);return _l.set(this,i),i}resolveInner(e,t=0){let i=Qo(X0.get(this)||this.topNode,e,t,!0);return X0.set(this,i),i}resolveStack(e,t=0){return Gk(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Ye.IncludeAnonymous)>0;for(let l=this.cursor(o|Ye.IncludeAnonymous);;){let h=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;h=!0}for(;h&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:hf(Ct.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Ve(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Ve(Ct.none,t,i,r)))}static build(e){return Fk(e)}}Ve.empty=new Ve(Ct.none,[],[],0);class of{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new of(this.buffer,this.index)}}class Ri{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ct.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(G0(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,t,i){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=r[a++],s[l++]=r[a++]-i;let h=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,h)}return new Ri(s,o,this.set)}}function G0(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Qo(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof It&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:Ye.IgnoreOverlays;if(i)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof It&&o.index<0&&((r=a.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class F0{cursor(e=0){return new lf(this,e)}getChild(e,t=null,i=null){let r=V0(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return V0(this,e,t,i)}resolve(e,t=0){return Qo(this,e,t,!1)}resolveInner(e,t=0){return Qo(this,e,t,!0)}matchContext(e){return af(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class It extends F0{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,h=t>0?a.length:-1;e!=h;e+=t){let c=a[e],u=l[e]+o.from;if(G0(r,i,u,u+c.length)){if(c instanceof Ri){if(s&Ye.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,i-u,r);if(f>-1)return new Qn(new Uk(o,c,e,u),null,f)}else if(s&Ye.IncludeAnonymous||!c.type.isAnonymous||cf(c)){let f;if(!(s&Ye.IgnoreMounts)&&(f=El.get(c))&&!f.overlay)return new It(f.tree,u,e,o);let d=new It(c,u,e,o);return s&Ye.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,i,r)}}}if(s&Ye.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Ye.IgnoreOverlays)&&(r=El.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new It(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function V0(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function af(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Uk{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Qn extends F0{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Qn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ye.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Qn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Qn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Qn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),t.push(0)}return new Ve(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function H0(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof It&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new Xk(r,t)}class Xk{constructor(e,t){this.heads=e,this.node=t}get next(){return H0(this.heads)}}function Gk(n,e,t){let i=n.resolveInner(e,t),r=null;for(let s=i instanceof It?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,t)),s=o}else{let o=El.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new It(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Qo(a,e,t,!1))}}return r?H0(r):i}class lf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof It)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof It?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ye.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ye.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ye.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Ye.IncludeAnonymous||a instanceof Ri||!a.type.isAnonymous||cf(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new Qn(this.buffer,t,this.stack[r]);return this.bufferNode=new Qn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return af(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return af(this._tree,e,r);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function cf(n){return n.children.some(e=>e instanceof Ri||!e.type.isAnonymous||cf(e))}function Fk(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=U0,reused:s=[],minRepeatType:o=i.types.length}=n,a=Array.isArray(t)?new of(t,t.length):t,l=i.types,h=0,c=0;function u(x,T,A,S,I,_){let{id:R,start:C,end:L,size:W}=a,b=c,P=h;for(;W<0;)if(a.next(),W==-1){let de=s[R];A.push(de),S.push(C-x);return}else if(W==-3){h=R;return}else if(W==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${W}`);let M=l[R],j,N,X=C-x;if(L-C<=r&&(N=g(a.pos-T,I))){let de=new Uint16Array(N.size-N.skip),we=a.pos-N.size,xe=de.length;for(;a.pos>we;)xe=O(N.start,de,xe);j=new Ri(de,L-N.start,i),X=N.start-x}else{let de=a.pos-W;a.next();let we=[],xe=[],Ne=R>=o?R:-1,Et=0,zn=L;for(;a.pos>de;)Ne>=0&&a.id==Ne&&a.size>=0?(a.end<=zn-r&&(p(we,xe,C,Et,a.end,zn,Ne,b,P),Et=we.length,zn=a.end),a.next()):_>2500?f(C,de,we,xe):u(C,de,we,xe,Ne,_+1);if(Ne>=0&&Et>0&&Et<we.length&&p(we,xe,C,Et,C,zn,Ne,b,P),we.reverse(),xe.reverse(),Ne>-1&&Et>0){let bn=d(M,P);j=hf(M,we,xe,0,we.length,0,L-C,bn,bn)}else j=m(M,we,xe,L-C,b-L,P)}A.push(j),S.push(X)}function f(x,T,A,S){let I=[],_=0,R=-1;for(;a.pos>T;){let{id:C,start:L,end:W,size:b}=a;if(b>4)a.next();else{if(R>-1&&L<R)break;R<0&&(R=W-r),I.push(C,L,W),_++,a.next()}}if(_){let C=new Uint16Array(_*4),L=I[I.length-2];for(let W=I.length-3,b=0;W>=0;W-=3)C[b++]=I[W],C[b++]=I[W+1]-L,C[b++]=I[W+2]-L,C[b++]=b;A.push(new Ri(C,I[2]-L,i)),S.push(L-x)}}function d(x,T){return(A,S,I)=>{let _=0,R=A.length-1,C,L;if(R>=0&&(C=A[R])instanceof Ve){if(!R&&C.type==x&&C.length==I)return C;(L=C.prop(ue.lookAhead))&&(_=S[R]+C.length+L)}return m(x,A,S,I,_,T)}}function p(x,T,A,S,I,_,R,C,L){let W=[],b=[];for(;x.length>S;)W.push(x.pop()),b.push(T.pop()+A-I);x.push(m(i.types[R],W,b,_-I,C-_,L)),T.push(I-A)}function m(x,T,A,S,I,_,R){if(_){let C=[ue.contextHash,_];R=R?[C].concat(R):[C]}if(I>25){let C=[ue.lookAhead,I];R=R?[C].concat(R):[C]}return new Ve(x,T,A,S,R)}function g(x,T){let A=a.fork(),S=0,I=0,_=0,R=A.end-r,C={size:0,start:0,skip:0};e:for(let L=A.pos-x;A.pos>L;){let W=A.size;if(A.id==T&&W>=0){C.size=S,C.start=I,C.skip=_,_+=4,S+=4,A.next();continue}let b=A.pos-W;if(W<0||b<L||A.start<R)break;let P=A.id>=o?4:0,M=A.start;for(A.next();A.pos>b;){if(A.size<0)if(A.size==-3)P+=4;else break e;else A.id>=o&&(P+=4);A.next()}I=M,S+=W,_+=P}return(T<0||S==x)&&(C.size=S,C.start=I,C.skip=_),C.size>4?C:void 0}function O(x,T,A){let{id:S,start:I,end:_,size:R}=a;if(a.next(),R>=0&&S<o){let C=A;if(R>4){let L=a.pos-(R-4);for(;a.pos>L;)A=O(x,T,A)}T[--A]=C,T[--A]=_-x,T[--A]=I-x,T[--A]=S}else R==-3?h=S:R==-4&&(c=S);return A}let y=[],w=[];for(;a.pos>0;)u(n.start||0,n.bufferStart||0,y,w,-1,0);let k=(e=n.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Ve(l[n.topID],y.reverse(),w.reverse(),k)}const W0=new WeakMap;function Ql(n,e){if(!n.isAnonymous||e instanceof Ri||e.type!=n)return 1;let t=W0.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Ve)){t=1;break}t+=Ql(n,i)}W0.set(e,t)}return t}function hf(n,e,t,i,r,s,o,a,l){let h=0;for(let p=i;p<r;p++)h+=Ql(n,e[p]);let c=Math.ceil(h*1.5/8),u=[],f=[];function d(p,m,g,O,y){for(let w=g;w<O;){let k=w,x=m[w],T=Ql(n,p[w]);for(w++;w<O;w++){let A=Ql(n,p[w]);if(T+A>=c)break;T+=A}if(w==k+1){if(T>c){let A=p[k];d(A.children,A.positions,0,A.children.length,m[k]+y);continue}u.push(p[k])}else{let A=m[w-1]+p[w-1].length-x;u.push(hf(n,p,m,k,w,x,A,null,l))}f.push(x+y-s)}}return d(e,t,i,r,0),(a||l)(u,f,o)}class Vk{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Qn?this.setBuffer(e.context.buffer,e.index,t):e instanceof It&&this.map.set(e.tree,t)}get(e){return e instanceof Qn?this.getBuffer(e.context.buffer,e.index):e instanceof It?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class or{constructor(e,t,i,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new or(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,h=0;;a++){let c=a<t.length?t[a]:null,u=c?c.fromA:1e9;if(u-l>=i)for(;o&&o.from<u;){let f=o;if(l>=f.from||u<=f.to||h){let d=Math.max(f.from,l)-h,p=Math.min(f.to,u)-h;f=d>=p?null:new or(d,p,f.tree,f.offset+h,a>0,!!c)}if(f&&r.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,h=c.toA-c.toB}return r}}class z0{startParse(e,t,i){return typeof e=="string"&&(e=new Hk(e)),i=i?i.length?i.map(r=>new rf(r.from,r.to)):[new rf(0,0)]:[new rf(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}}class Hk{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ue({perNode:!0});let Wk=0;class en{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=Wk++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof en&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let r=new en(i,[],null,[]);if(r.set.push(r),t)for(let s of t.set)r.set.push(s);return r}static defineModifier(e){let t=new Cl(e);return i=>i.modified.indexOf(t)>-1?i:Cl.get(i.base||i,i.modified.concat(t).sort((r,s)=>r.id-s.id))}}let zk=0;class Cl{constructor(e){this.name=e,this.instances=[],this.id=zk++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&Yk(t,a.modified));if(i)return i;let r=[],s=new en(e.name,r,e,t);for(let a of t)a.instances.push(s);let o=Kk(t);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Cl.get(a,l));return s}}function Yk(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Kk(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function Y0(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],o=2,a=r;for(let u=0;;){if(a=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let d=r[u++];if(u==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);a=r.slice(u)}let l=s.length-1,h=s[l];if(!h)throw new RangeError("Invalid path: "+r);let c=new Il(i,o,l>0?s.slice(0,l):null);e[h]=c.sort(e[h])}}return K0.add(e)}const K0=new ue;class Il{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Il.empty=new Il([],2,null);function J0(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let h=t[l.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function Jk(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function eP(n,e,t,i=0,r=n.length){let s=new tP(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class tP{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let h=r,c=nP(e)||Il.empty,u=Jk(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,a),h),c.opaque)return;let f=e.tree&&e.tree.prop(ue.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(f.tree.type)),m=e.firstChild();for(let g=0,O=a;;g++){let y=g<f.overlay.length?f.overlay[g]:null,w=y?y.from+a:l,k=Math.max(t,O),x=Math.min(i,w);if(k<x&&m)for(;e.from<x&&(this.highlightRange(e,k,x,r,s),this.startSpan(Math.min(x,e.to),h),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;O=y.to+a,O>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+a),Math.min(i,O),"",p),this.startSpan(Math.min(i,O),h))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function nP(n){let e=n.type.prop(K0);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const D=en.define,Rl=D(),$i=D(),eO=D($i),tO=D($i),Mi=D(),$l=D(Mi),uf=D(Mi),Cn=D(),ar=D(Cn),In=D(),Rn=D(),ff=D(),Co=D(ff),Ml=D(),v={comment:Rl,lineComment:D(Rl),blockComment:D(Rl),docComment:D(Rl),name:$i,variableName:D($i),typeName:eO,tagName:D(eO),propertyName:tO,attributeName:D(tO),className:D($i),labelName:D($i),namespace:D($i),macroName:D($i),literal:Mi,string:$l,docString:D($l),character:D($l),attributeValue:D($l),number:uf,integer:D(uf),float:D(uf),bool:D(Mi),regexp:D(Mi),escape:D(Mi),color:D(Mi),url:D(Mi),keyword:In,self:D(In),null:D(In),atom:D(In),unit:D(In),modifier:D(In),operatorKeyword:D(In),controlKeyword:D(In),definitionKeyword:D(In),moduleKeyword:D(In),operator:Rn,derefOperator:D(Rn),arithmeticOperator:D(Rn),logicOperator:D(Rn),bitwiseOperator:D(Rn),compareOperator:D(Rn),updateOperator:D(Rn),definitionOperator:D(Rn),typeOperator:D(Rn),controlOperator:D(Rn),punctuation:ff,separator:D(ff),bracket:Co,angleBracket:D(Co),squareBracket:D(Co),paren:D(Co),brace:D(Co),content:Cn,heading:ar,heading1:D(ar),heading2:D(ar),heading3:D(ar),heading4:D(ar),heading5:D(ar),heading6:D(ar),contentSeparator:D(Cn),list:D(Cn),quote:D(Cn),emphasis:D(Cn),strong:D(Cn),link:D(Cn),monospace:D(Cn),strikethrough:D(Cn),inserted:D(),deleted:D(),changed:D(),invalid:D(),meta:Ml,documentMeta:D(Ml),annotation:D(Ml),processingInstruction:D(Ml),definition:en.defineModifier("definition"),constant:en.defineModifier("constant"),function:en.defineModifier("function"),standard:en.defineModifier("standard"),local:en.defineModifier("local"),special:en.defineModifier("special")};for(let n in v){let e=v[n];e instanceof en&&(e.name=n)}J0([{tag:v.link,class:"tok-link"},{tag:v.heading,class:"tok-heading"},{tag:v.emphasis,class:"tok-emphasis"},{tag:v.strong,class:"tok-strong"},{tag:v.keyword,class:"tok-keyword"},{tag:v.atom,class:"tok-atom"},{tag:v.bool,class:"tok-bool"},{tag:v.url,class:"tok-url"},{tag:v.labelName,class:"tok-labelName"},{tag:v.inserted,class:"tok-inserted"},{tag:v.deleted,class:"tok-deleted"},{tag:v.literal,class:"tok-literal"},{tag:v.string,class:"tok-string"},{tag:v.number,class:"tok-number"},{tag:[v.regexp,v.escape,v.special(v.string)],class:"tok-string2"},{tag:v.variableName,class:"tok-variableName"},{tag:v.local(v.variableName),class:"tok-variableName tok-local"},{tag:v.definition(v.variableName),class:"tok-variableName tok-definition"},{tag:v.special(v.variableName),class:"tok-variableName2"},{tag:v.definition(v.propertyName),class:"tok-propertyName tok-definition"},{tag:v.typeName,class:"tok-typeName"},{tag:v.namespace,class:"tok-namespace"},{tag:v.className,class:"tok-className"},{tag:v.macroName,class:"tok-macroName"},{tag:v.propertyName,class:"tok-propertyName"},{tag:v.operator,class:"tok-operator"},{tag:v.comment,class:"tok-comment"},{tag:v.meta,class:"tok-meta"},{tag:v.invalid,class:"tok-invalid"},{tag:v.punctuation,class:"tok-punctuation"}]);var df;const Jr=new ue;function nO(n){return G.define({combine:n?e=>e.concat(n):void 0})}const pf=new ue;class fn{constructor(e,t,i=[],r=""){this.data=e,this.name=r,me.prototype.hasOwnProperty("tree")||Object.defineProperty(me.prototype,"tree",{get(){return Ke(this)}}),this.parser=t,this.extension=[Bi.of(this),me.languageData.of((s,o,a)=>{let l=iO(s,o,a),h=l.type.prop(Jr);if(!h)return[];let c=s.facet(h),u=l.type.prop(pf);if(u){let f=l.resolve(o-l.from,a);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return iO(e,t,i).type.prop(Jr)==this.data}findRegions(e){let t=e.facet(Bi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Jr)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ue.mounted);if(a){if(a.tree.prop(Jr)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let h=s.children[l];h instanceof Ve&&r(h,s.positions[l]+o)}};return r(Ke(e),0),i}get allowsNesting(){return!0}}fn.setState=oe.define();function iO(n,e,t){let i=n.facet(Bi),r=Ke(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,t,Ye.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Bl extends fn{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=nO(e.languageData);return new Bl(t,e.parser.configure({props:[Jr.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Bl(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ke(n){let e=n.field(fn.state,!1);return e?e.tree:Ve.empty}class iP{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Io=null;class Zl{constructor(e,t,i=[],r,s,o,a,l){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Zl(e,t,[],Ve.empty,0,i,[],null)}startParse(){return this.parser.startParse(new iP(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ve.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(or.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(or.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Io;Io=this;try{return e()}finally{Io=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=rO(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((h,c,u,f)=>l.push({fromA:h,toA:c,fromB:u,toB:f})),i=or.applyChanges(i,l),r=Ve.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&a.push({from:c,to:u})}}}return new Zl(this.parser,t,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=rO(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends z0{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Io;if(l){for(let h of r)l.tempSkipped.push(h);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ve(Ct.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Io}}function rO(n,e,t){return or.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class es{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new es(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Zl.create(e.facet(Bi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new es(i)}}fn.state=nt.define({create:es.init,update(n,e){for(let t of e.effects)if(t.is(fn.setState))return t.value;return e.startState.facet(Bi)!=e.state.facet(Bi)?es.init(e.state):n.apply(e)}});let sO=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(sO=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const mf=typeof navigator!="undefined"&&(!((df=navigator.scheduling)===null||df===void 0)&&df.isInputPending)?()=>navigator.scheduling.isInputPending():null,rP=Xe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(fn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(fn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=sO(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(fn.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!mf?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>mf&&mf()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:fn.setState.of(new es(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Qt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Bi=G.define({combine(n){return n.length?n[0]:null},enables:n=>[fn.state,rP,q.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class sP{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const oP=G.define(),Ro=G.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ll(n){let e=n.facet(Ro);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function $o(n,e){let t="",i=n.tabSize,r=n.facet(Ro)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let s=0;s<e;s++)t+=r;return t}function gf(n,e){n instanceof me&&(n=new Nl(n));for(let i of n.state.facet(oP)){let r=i(n,e);if(r!==void 0)return r}let t=Ke(n.state);return t.length>=e?aP(n,t,e):null}class Nl{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ll(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return Xr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const oO=new ue;function aP(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return aO(i,n,t)}function aO(n,e,t){for(let i=n;i;i=i.next){let r=cP(i.node);if(r)return r(Of.create(e,t,i))}return 0}function lP(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function cP(n){let e=n.type.prop(oO);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ue.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>lO(o,!0,1,void 0,s&&!lP(o)?r.from:void 0)}return n.parent==null?hP:null}function hP(){return 0}class Of extends Nl{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Of(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(uP(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return aO(this.context.next,this.base,this.pos)}}function uP(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function fP(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}a=l.to}}function dP({closing:n,align:e=!0,units:t=1}){return i=>lO(i,e,t,n)}function lO(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==n.pos+o,l=e?fP(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const pP=n=>n.baseIndent;function yf({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const mP=200;function gP(){return me.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+mP)return n;let s=t.sliceString(r.from,i);if(!e.some(h=>h.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==a)continue;a=c.from;let u=gf(o,c.from);if(u==null)continue;let f=/^\s*/.exec(c.text)[0],d=$o(o,u);f!=d&&l.push({from:c.from,to:c.from+f.length,insert:d})}return l.length?[n,{changes:l,sequential:!0}]:n})}const OP=G.define(),cO=new ue;function yP(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function bP(n,e,t){let i=Ke(n);if(i.length<t)return null;let r=i.resolveStack(t,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(cO);if(l&&(a.to<i.length-50||i.length==n.doc.length||!vP(a))){let h=l(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function vP(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Dl(n,e,t){for(let i of n.facet(OP)){let r=i(n,e,t);if(r)return r}return bP(n,e,t)}function hO(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const jl=oe.define({map:hO}),Mo=oe.define({map:hO});function uO(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const lr=nt.define({create(){return z.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(jl)&&!wP(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(pO),r=i?z.replace({widget:new PP(i(e.state,t.value))}):OO;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Mo)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,s)=>{r<i&&s>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return n},provide:n=>q.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(OO.range(i,r))}return z.set(e,!0)}});function ql(n,e,t){var i;let r=null;return(i=n.field(lr,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function wP(n,e,t){let i=!1;return n.between(e,e,(r,s)=>{r==e&&s==t&&(i=!0)}),i}function fO(n,e){return n.field(lr,!1)?e:e.concat(oe.appendConfig.of(mO()))}const xP=n=>{for(let e of uO(n)){let t=Dl(n.state,e.from,e.to);if(t)return n.dispatch({effects:fO(n.state,[jl.of(t),dO(n,t)])}),!0}return!1},SP=n=>{if(!n.state.field(lr,!1))return!1;let e=[];for(let t of uO(n)){let i=ql(n.state,t.from,t.to);i&&e.push(Mo.of(i),dO(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function dO(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return q.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const AP=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:xP},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:SP},{key:"Ctrl-Alt-[",run:n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),s=Dl(e,r.from,r.to);s&&t.push(jl.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return t.length&&n.dispatch({effects:fO(n.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:n=>{let e=n.state.field(lr,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(Mo.of({from:i,to:r}))}),n.dispatch({effects:t}),!0}}],kP={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},pO=G.define({combine(n){return kn(n,kP)}});function mO(n){return[lr,_P]}function gO(n,e){let{state:t}=n,i=t.facet(pO),r=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=ql(n.state,a.from,a.to);l&&n.dispatch({effects:Mo.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const OO=z.replace({widget:new class extends Tn{toDOM(n){return gO(n,null)}}});class PP extends Tn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gO(e,this.value)}}const TP={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class bf extends ti{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function EP(n={}){let e=Object.assign(Object.assign({},TP),n),t=new bf(e,!0),i=new bf(e,!1),r=Xe.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Bi)!=o.state.facet(Bi)||o.startState.field(lr,!1)!=o.state.field(lr,!1)||Ke(o.startState)!=Ke(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Kn;for(let l of o.viewportLineBlocks){let h=ql(o.state,l.from,l.to)?i:Dl(o.state,l.from,l.to)?t:null;h&&a.add(l.from,l.from,h)}return a.finish()}}),{domEventHandlers:s}=e;return[r,Qk({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||be.empty},initialSpacer(){return new bf(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let h=ql(o.state,a.from,a.to);if(h)return o.dispatch({effects:Mo.of(h)}),!0;let c=Dl(o.state,a.from,a.to);return c?(o.dispatch({effects:jl.of(c)}),!0):!1}})}),mO()]}const _P=q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ts{constructor(e,t){this.specs=e;let i;function r(a){let l=Pi.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof fn?a=>a.prop(Jr)==o.data:o?a=>a==o:void 0,this.style=J0(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Pi(i):null,this.themeType=t.themeType}static define(e,t){return new ts(e,t||{})}}const vf=G.define(),yO=G.define({combine(n){return n.length?[n[0]]:null}});function wf(n){let e=n.facet(vf);return e.length?e:n.facet(yO)}function xf(n,e){let t=[CP],i;return n instanceof ts&&(n.module&&t.push(q.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(yO.of(n)):i?t.push(vf.computeN([q.darkTheme],r=>r.facet(q.darkTheme)==(i=="dark")?[n]:[])):t.push(vf.of(n)),t}class QP{constructor(e){this.markCache=Object.create(null),this.tree=Ke(e.state),this.decorations=this.buildDeco(e,wf(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ke(e.state),i=wf(e.state),r=i!=wf(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return z.none;let i=new Kn;for(let{from:r,to:s}of e.visibleRanges)eP(this.tree,t,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=z.mark({class:l})))},r,s);return i.finish()}}const CP=ki.high(Xe.fromClass(QP,{decorations:n=>n.decorations})),IP=ts.define([{tag:v.meta,color:"#404740"},{tag:v.link,textDecoration:"underline"},{tag:v.heading,textDecoration:"underline",fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.strong,fontWeight:"bold"},{tag:v.strikethrough,textDecoration:"line-through"},{tag:v.keyword,color:"#708"},{tag:[v.atom,v.bool,v.url,v.contentSeparator,v.labelName],color:"#219"},{tag:[v.literal,v.inserted],color:"#164"},{tag:[v.string,v.deleted],color:"#a11"},{tag:[v.regexp,v.escape,v.special(v.string)],color:"#e40"},{tag:v.definition(v.variableName),color:"#00f"},{tag:v.local(v.variableName),color:"#30a"},{tag:[v.typeName,v.namespace],color:"#085"},{tag:v.className,color:"#167"},{tag:[v.special(v.variableName),v.macroName],color:"#256"},{tag:v.definition(v.propertyName),color:"#00c"},{tag:v.comment,color:"#940"},{tag:v.invalid,color:"#f00"}]),RP=q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),bO=1e4,vO="()[]{}",wO=G.define({combine(n){return kn(n,{afterCursor:!0,brackets:vO,maxScanDistance:bO,renderMatch:BP})}}),$P=z.mark({class:"cm-matchingBracket"}),MP=z.mark({class:"cm-nonmatchingBracket"});function BP(n){let e=[],t=n.matched?$P:MP;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const ZP=[nt.define({create(){return z.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(wO);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=$n(e.state,r.head,-1,i)||r.head>0&&$n(e.state,r.head-1,1,i)||i.afterCursor&&($n(e.state,r.head,1,i)||r.head<e.state.doc.length&&$n(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return z.set(t,!0)},provide:n=>q.decorations.from(n)}),RP];function LP(n={}){return[wO.of(n),ZP]}const NP=new ue;function Sf(n,e,t){let i=n.prop(e<0?ue.openedBy:ue.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Af(n){let e=n.type.prop(NP);return e?e(n.node):n}function $n(n,e,t,i={}){let r=i.maxScanDistance||bO,s=i.brackets||vO,o=Ke(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let h=Sf(l.type,t,s);if(h&&l.from<l.to){let c=Af(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return DP(n,e,t,l,c,h,s)}}return jP(n,e,t,o,a.type,r,s)}function DP(n,e,t,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},h=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=Af(c);return{start:l,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Sf(c.type,t,o))h++;else if(Sf(c.type,-t,o)){if(h==0){let u=Af(c);return{start:l,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function jP(n,e,t,i,r,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;t<0&&(f+=d.length);let p=e+f*t;for(let m=t>0?0:d.length-1,g=t>0?d.length:-1;m!=g;m+=t){let O=o.indexOf(d[m]);if(!(O<0||i.resolveInner(p+m,1).type!=r))if(O%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:p+m,to:p+m+1},matched:O>>1==l>>1};u--}}t>0&&(f+=d.length)}return c.done?{start:h,matched:!1}:null}const qP=Object.create(null),xO=[Ct.none],SO=[],AO=Object.create(null),UP=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])UP[n]=XP(qP,e);function kf(n,e){SO.indexOf(n)>-1||(SO.push(n),console.warn(e))}function XP(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let h of a.split(".")){let c=n[h]||v[h];c?typeof c=="function"?l.length?l=l.map(c):kf(h,`Modifier ${h} used at start of tag`):l.length?kf(h,`Tag ${h} used as modifier`):l=Array.isArray(c)?c:[c]:kf(h,`Unknown highlighting tag ${h}`)}for(let h of l)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),s=AO[r];if(s)return s.id;let o=AO[r]=Ct.define({id:xO.length,name:i,props:[Y0({[i]:t})]});return xO.push(o),o.id}Re.RTL,Re.LTR;const GP=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Tf(n.state,t.from);return i.line?FP(n):i.block?HP(n):!1};function Pf(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const FP=Pf(YP,0),VP=Pf(kO,0),HP=Pf((n,e)=>kO(n,e,zP(e)),0);function Tf(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Bo=50;function WP(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-Bo,i),o=n.sliceDoc(r,r+Bo),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,h=s.length-a;if(s.slice(h-e.length,h)==e&&o.slice(l,l+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,u;r-i<=2*Bo?c=u=n.sliceDoc(i,r):(c=n.sliceDoc(i,i+Bo),u=n.sliceDoc(r-Bo,r));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-t.length;return c.slice(f,f+e.length)==e&&u.slice(p,p+t.length)==t?{open:{pos:i+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function zP(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function kO(n,e,t=e.selection.ranges){let i=t.map(s=>Tf(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,o)=>WP(e,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:h,close:c}=a;s.push({from:h.pos-l.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function YP(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of t){let a=i.length,l=1e9,h=Tf(e,s).line;if(h){for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>r&&(s==o||o>u.from)){r=u.from;let f=/^\s*/.exec(u.text)[0].length,d=f==u.length,p=u.text.slice(f,f+h.length)==h?f:-1;f<u.text.length&&f<l&&(l=f),i.push({line:u,comment:p,token:h,indent:f,empty:d,single:!1})}c=u.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:h,empty:c,single:u}of i)(u||!c)&&s.push({from:a.from+h,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let h=o.from+a,c=h+l.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}const Ef=An.define(),KP=An.define(),JP=G.define(),PO=G.define({combine(n){return kn(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),TO=nt.define({create(){return Mn.empty},update(n,e){let t=e.state.facet(PO),i=e.annotation(Ef);if(i){let l=Rt.fromTransaction(e,i.selection),h=i.side,c=h==0?n.undone:n.done;return l?c=Xl(c,c.length,t.minDepth,l):c=QO(c,e.startState.selection),new Mn(h==0?i.rest:c,h==0?c:i.rest)}let r=e.annotation(KP);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(bt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Rt.fromTransaction(e),o=e.annotation(bt.time),a=e.annotation(bt.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Mn(n.done.map(Rt.fromJSON),n.undone.map(Rt.fromJSON))}});function eT(n={}){return[TO,PO.of(n),q.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?EO:e.inputType=="historyRedo"?_f:null;return i?(e.preventDefault(),i(t)):!1}})]}function Ul(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(TO,!1);if(!r)return!1;let s=r.pop(n,t,e);return s?(i(s),!0):!1}}const EO=Ul(0,!1),_f=Ul(1,!1),tT=Ul(0,!0),nT=Ul(1,!0);class Rt{constructor(e,t,i,r,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Rt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Rt(e.changes&&ze.fromJSON(e.changes),[],e.mapped&&Sn.fromJSON(e.mapped),e.startSelection&&$.fromJSON(e.startSelection),e.selectionsAfter.map($.fromJSON))}static fromTransaction(e,t){let i=tn;for(let r of e.startState.facet(JP)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Rt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,tn)}static selection(e){return new Rt(void 0,tn,void 0,void 0,e)}}function Xl(n,e,t,i){let r=e+1>t+20?e-t-1:0,s=n.slice(r,e);return s.push(i),s}function iT(n,e){let t=[],i=!1;return n.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<t.length;){let h=t[l++],c=t[l++];a>=h&&o<=c&&(i=!0)}}),i}function rT(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function _O(n,e){return n.length?e.length?n.concat(e):n:e}const tn=[],sT=200;function QO(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-sT));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Xl(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Rt.selection([e])]}function oT(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Qf(n,e){if(!n.length)return n;let t=n.length,i=tn;for(;t;){let r=aT(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Rt.selection(i)]:tn}function aT(n,e,t){let i=_O(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):tn,t);if(!n.changes)return Rt.selection(i);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Rt(r,oe.mapEffects(n.effects,e),o,n.startSelection.map(s),i)}const lT=/^(input\.type|delete)($|\.)/;class Mn{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Mn(this.done,this.undone):this}addChanges(e,t,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||lT.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,iT(a.changes,e.changes))||i=="input.type.compose")?o=Xl(o,o.length-1,r.minDepth,new Rt(e.changes.compose(a.changes),_O(oe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,tn)):o=Xl(o,o.length,r.minDepth,e),new Mn(o,tn,t,i)}addSelection(e,t,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:tn;return s.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&rT(s[s.length-1],e)?this:new Mn(QO(this.done,e),this.undone,t,i)}addMapping(e){return new Mn(Qf(this.done,e),Qf(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ef.of({side:e,rest:oT(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?tn:r.slice(0,r.length-1);return s.mapped&&(a=Qf(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ef.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Mn.empty=new Mn(tn,tn);const cT=[{key:"Mod-z",run:EO,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_f,preventDefault:!0},{linux:"Ctrl-Shift-z",run:_f,preventDefault:!0},{key:"Mod-u",run:tT,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:nT,preventDefault:!0}];function ns(n,e){return $.create(n.ranges.map(e),n.mainIndex)}function Bn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function dn({state:n,dispatch:e},t){let i=ns(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Bn(n,i)),!0)}function Gl(n,e){return $.cursor(e?n.to:n.from)}function CO(n,e){return dn(n,t=>t.empty?n.moveByChar(t,e):Gl(t,e))}function mt(n){return n.textDirectionAt(n.state.selection.main.head)==Re.LTR}const IO=n=>CO(n,!mt(n)),RO=n=>CO(n,mt(n));function $O(n,e){return dn(n,t=>t.empty?n.moveByGroup(t,e):Gl(t,e))}const hT=n=>$O(n,!mt(n)),uT=n=>$O(n,mt(n));function fT(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Fl(n,e,t){let i=Ke(n).resolveInner(e.head),r=t?ue.closedBy:ue.openedBy;for(let l=e.head;;){let h=t?i.childAfter(l):i.childBefore(l);if(!h)break;fT(n,h,r)?i=h:l=t?h.to:h.from}let s=i.type.prop(r),o,a;return s&&(o=t?$n(n,i.from,1):$n(n,i.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?i.to:i.from,$.cursor(a,t?-1:1)}const dT=n=>dn(n,e=>Fl(n.state,e,!mt(n))),pT=n=>dn(n,e=>Fl(n.state,e,mt(n)));function MO(n,e){return dn(n,t=>{if(!t.empty)return Gl(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const BO=n=>MO(n,!1),ZO=n=>MO(n,!0);function LO(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let s of n.state.facet(q.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function NO(n,e){let t=LO(n),{state:i}=n,r=ns(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):Gl(o,e));if(r.eq(i.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,h=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<h&&(s=q.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Bn(i,r),{effects:s}),!0}const DO=n=>NO(n,!1),Cf=n=>NO(n,!0);function Zi(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=$.cursor(i.from+s))}return r}const mT=n=>dn(n,e=>Zi(n,e,!0)),gT=n=>dn(n,e=>Zi(n,e,!1)),OT=n=>dn(n,e=>Zi(n,e,!mt(n))),yT=n=>dn(n,e=>Zi(n,e,mt(n))),bT=n=>dn(n,e=>$.cursor(n.lineBlockAt(e.head).from,1)),vT=n=>dn(n,e=>$.cursor(n.lineBlockAt(e.head).to,-1));function wT(n,e,t){let i=!1,r=ns(n.selection,s=>{let o=$n(n,s.head,-1)||$n(n,s.head,1)||s.head>0&&$n(n,s.head-1,1)||s.head<n.doc.length&&$n(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return $.cursor(a)});return i?(e(Bn(n,r)),!0):!1}const xT=({state:n,dispatch:e})=>wT(n,e);function nn(n,e){let t=ns(n.state.selection,i=>{let r=e(i);return $.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Bn(n.state,t)),!0)}function jO(n,e){return nn(n,t=>n.moveByChar(t,e))}const qO=n=>jO(n,!mt(n)),UO=n=>jO(n,mt(n));function XO(n,e){return nn(n,t=>n.moveByGroup(t,e))}const ST=n=>XO(n,!mt(n)),AT=n=>XO(n,mt(n)),kT=n=>nn(n,e=>Fl(n.state,e,!mt(n))),PT=n=>nn(n,e=>Fl(n.state,e,mt(n)));function GO(n,e){return nn(n,t=>n.moveVertically(t,e))}const FO=n=>GO(n,!1),VO=n=>GO(n,!0);function HO(n,e){return nn(n,t=>n.moveVertically(t,e,LO(n).height))}const WO=n=>HO(n,!1),zO=n=>HO(n,!0),TT=n=>nn(n,e=>Zi(n,e,!0)),ET=n=>nn(n,e=>Zi(n,e,!1)),_T=n=>nn(n,e=>Zi(n,e,!mt(n))),QT=n=>nn(n,e=>Zi(n,e,mt(n))),CT=n=>nn(n,e=>$.cursor(n.lineBlockAt(e.head).from)),IT=n=>nn(n,e=>$.cursor(n.lineBlockAt(e.head).to)),YO=({state:n,dispatch:e})=>(e(Bn(n,{anchor:0})),!0),KO=({state:n,dispatch:e})=>(e(Bn(n,{anchor:n.doc.length})),!0),JO=({state:n,dispatch:e})=>(e(Bn(n,{anchor:n.selection.main.anchor,head:0})),!0),ey=({state:n,dispatch:e})=>(e(Bn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),RT=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),$T=({state:n,dispatch:e})=>{let t=Hl(n).map(({from:i,to:r})=>$.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:$.create(t),userEvent:"select"})),!0},MT=({state:n,dispatch:e})=>{let t=ns(n.selection,i=>{let r=Ke(n),s=r.resolveStack(i.from,1);if(i.empty){let o=r.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&o.next)return $.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Bn(n,t)),!0)},BT=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=$.create([t.main]):t.main.empty||(i=$.create([$.cursor(t.main.head)])),i?(e(Bn(n,i)),!0):!1};function Zo(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=Vl(n,l,!1)):l>o&&(t="delete.forward",l=Vl(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Vl(n,o,!1),a=Vl(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:$.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Vl(n,e,t){if(n instanceof q)for(let i of n.state.facet(q.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const ty=(n,e,t)=>Zo(n,i=>{let r=i.from,{state:s}=n,o=s.doc.lineAt(r),a,l;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let h=Xr(a,s.tabSize),c=h%Ll(s)||Ll(s);for(let u=0;u<c&&a[a.length-1-u]==" ";u++)r--;l=r}else l=at(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=at(o.text,l-o.from,!1,!1)+o.from);return l}),If=n=>ty(n,!1,!0),ny=n=>ty(n,!0,!1),iy=(n,e)=>Zo(n,t=>{let i=t.head,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=at(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(h);if(a!=null&&c!=a)break;(h!=" "||i!=t.head)&&(a=c),i=l}return i}),ry=n=>iy(n,!1),ZT=n=>iy(n,!0),LT=n=>Zo(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),NT=n=>Zo(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),DT=n=>Zo(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),jT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ye.of(["",""])},range:$.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},qT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:at(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:at(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(o,r))},range:$.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Hl(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}function sy(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of Hl(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)r.push($.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)r.push($.range(l.anchor-a,l.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:$.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const UT=({state:n,dispatch:e})=>sy(n,e,!1),XT=({state:n,dispatch:e})=>sy(n,e,!0);function oy(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of Hl(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const GT=({state:n,dispatch:e})=>oy(n,e,!1),FT=({state:n,dispatch:e})=>oy(n,e,!0),VT=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Hl(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=ns(e.selection,r=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,s)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function HT(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ke(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ue.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const ay=ly(!1),WT=ly(!0);function ly(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!n&&s==o&&HT(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let h=new Nl(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=gf(h,s);for(c==null&&(c=Xr(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let u=["",$o(e,c)];return l&&u.push($o(e,h.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ye.of(u)},range:$.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Rf(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=n.doc.lineAt(o);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),o=a.to+1}let s=n.changes(r);return{changes:r,range:$.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const zT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Nl(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),r=Rf(n,(s,o,a)=>{let l=gf(i,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let h=/^\s*/.exec(s.text)[0],c=$o(n,l);(h!=c||a.from<s.from+h.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+h.length,insert:c}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},cy=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Rf(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Ro)})}),{userEvent:"input.indent"})),!0),hy=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Rf(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=Xr(r,n.tabSize),o=0,a=$o(n,Math.max(0,s-Ll(n)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),YT=n=>(n.setTabFocusMode(),!0),KT=[{key:"Ctrl-b",run:IO,shift:qO,preventDefault:!0},{key:"Ctrl-f",run:RO,shift:UO},{key:"Ctrl-p",run:BO,shift:FO},{key:"Ctrl-n",run:ZO,shift:VO},{key:"Ctrl-a",run:bT,shift:CT},{key:"Ctrl-e",run:vT,shift:IT},{key:"Ctrl-d",run:ny},{key:"Ctrl-h",run:If},{key:"Ctrl-k",run:LT},{key:"Ctrl-Alt-h",run:ry},{key:"Ctrl-o",run:jT},{key:"Ctrl-t",run:qT},{key:"Ctrl-v",run:Cf}],JT=[{key:"ArrowLeft",run:IO,shift:qO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:hT,shift:ST,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:OT,shift:_T,preventDefault:!0},{key:"ArrowRight",run:RO,shift:UO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:uT,shift:AT,preventDefault:!0},{mac:"Cmd-ArrowRight",run:yT,shift:QT,preventDefault:!0},{key:"ArrowUp",run:BO,shift:FO,preventDefault:!0},{mac:"Cmd-ArrowUp",run:YO,shift:JO},{mac:"Ctrl-ArrowUp",run:DO,shift:WO},{key:"ArrowDown",run:ZO,shift:VO,preventDefault:!0},{mac:"Cmd-ArrowDown",run:KO,shift:ey},{mac:"Ctrl-ArrowDown",run:Cf,shift:zO},{key:"PageUp",run:DO,shift:WO},{key:"PageDown",run:Cf,shift:zO},{key:"Home",run:gT,shift:ET,preventDefault:!0},{key:"Mod-Home",run:YO,shift:JO},{key:"End",run:mT,shift:TT,preventDefault:!0},{key:"Mod-End",run:KO,shift:ey},{key:"Enter",run:ay,shift:ay},{key:"Mod-a",run:RT},{key:"Backspace",run:If,shift:If},{key:"Delete",run:ny},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ry},{key:"Mod-Delete",mac:"Alt-Delete",run:ZT},{mac:"Mod-Backspace",run:NT},{mac:"Mod-Delete",run:DT}].concat(KT.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),eE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:dT,shift:kT},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:pT,shift:PT},{key:"Alt-ArrowUp",run:UT},{key:"Shift-Alt-ArrowUp",run:GT},{key:"Alt-ArrowDown",run:XT},{key:"Shift-Alt-ArrowDown",run:FT},{key:"Escape",run:BT},{key:"Mod-Enter",run:WT},{key:"Alt-l",mac:"Ctrl-l",run:$T},{key:"Mod-i",run:MT,preventDefault:!0},{key:"Mod-[",run:hy},{key:"Mod-]",run:cy},{key:"Mod-Alt-\\",run:zT},{key:"Shift-Mod-k",run:VT},{key:"Shift-Mod-\\",run:xT},{key:"Mod-/",run:GP},{key:"Alt-A",run:VP},{key:"Ctrl-m",mac:"Shift-Alt-m",run:YT}].concat(JT),tE={key:"Tab",run:cy,shift:hy};function _e(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)uy(n,arguments[e]);return n}function uy(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)uy(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const fy=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class is{constructor(e,t,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(fy(a)):fy,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return lt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Fh(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Yt(e);let r=this.normalize(t);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol!="undefined"&&(is.prototype[Symbol.iterator]=function(){return this});const dy={from:-1,to:-1,match:/.*/.exec("")},$f="gm"+(/x/.unicode==null?"":"u");class py{constructor(e,t,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=dy,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new my(e,t,i,r,s);this.re=new RegExp(t,$f+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Wl(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=Wl(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Mf=new WeakMap;class rs{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=Mf.get(e);if(!r||r.from>=i||r.to<=t){let a=new rs(t,e.sliceString(t,i));return Mf.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:s,from:o}=r;return o>t&&(s=e.sliceString(t,o)+s,o=t),r.to<i&&(s+=e.sliceString(r.to,i)),Mf.set(e,new rs(o,s)),new rs(t,s.slice(t-o,i-o))}}class my{constructor(e,t,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=dy,this.matchPos=Wl(e,r),this.re=new RegExp(t,$f+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=rs.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=Wl(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=rs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(py.prototype[Symbol.iterator]=my.prototype[Symbol.iterator]=function(){return this});function nE(n){try{return new RegExp(n,$f),!0}catch(e){return!1}}function Wl(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Bf(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=_e("input",{class:"cm-textfield",name:"line",value:e}),i=_e("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:zl.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},_e("label",n.state.phrase("Go to line"),": ",t)," ",_e("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,h,c,u]=s,f=c?+c.slice(1):0,d=h?+h:a.number;if(h&&u){let g=d/100;l&&(g=g*(l=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else h&&l&&(d=d*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=$.cursor(p.from+Math.max(0,Math.min(f,p.length)));n.dispatch({effects:[zl.of(!1),q.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:i}}const zl=oe.define(),gy=nt.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(zl)&&(n=t.value);return n},provide:n=>Eo.from(n,e=>e?Bf:null)}),iE=n=>{let e=To(n,Bf);if(!e){let t=[zl.of(!0)];n.state.field(gy,!1)==null&&t.push(oe.appendConfig.of([gy,rE])),n.dispatch({effects:t}),e=To(n,Bf)}return e&&e.dom.querySelector("input").select(),!0},rE=q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),sE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},oE=G.define({combine(n){return kn(n,sE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function aE(n){return[fE,uE]}const lE=z.mark({class:"cm-selectionMatch"}),cE=z.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Oy(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Be.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Be.Word)}function hE(n,e,t,i){return n(e.sliceDoc(t,t+1))==Be.Word&&n(e.sliceDoc(i-1,i))==Be.Word}const uE=Xe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(oE),{state:t}=n,i=t.selection;if(i.ranges.length>1)return z.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return z.none;let l=t.wordAt(r.head);if(!l)return z.none;o=t.charCategorizer(r.head),s=t.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<e.minSelectionLength||l>200)return z.none;if(e.wholeWords){if(s=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!(Oy(o,t,r.from,r.to)&&hE(o,t,r.from,r.to)))return z.none}else if(s=t.sliceDoc(r.from,r.to),!s)return z.none}let a=[];for(let l of n.visibleRanges){let h=new is(t.doc,s,l.from,l.to);for(;!h.next().done;){let{from:c,to:u}=h.value;if((!o||Oy(o,t,c,u))&&(r.empty&&c<=r.from&&u>=r.to?a.push(cE.range(c,u)):(c>=r.to||u<=r.from)&&a.push(lE.range(c,u)),a.length>e.maxMatches))return z.none}}return z.set(a)}},{decorations:n=>n.decorations}),fE=q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),dE=({state:n,dispatch:e})=>{let{selection:t}=n,i=$.create(t.ranges.map(r=>n.wordAt(r.head)||$.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function pE(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),s=r&&r.from==t.from&&r.to==t.to;for(let o=!1,a=new is(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new is(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const mE=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return dE({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=pE(n,i);return r?(e(n.update({selection:n.selection.addRange($.range(r.from,r.to),!1),effects:q.scrollIntoView(r.to)})),!0):!1},ss=G.define({combine(n){return kn(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new TE(e),scrollToMatch:e=>q.scrollIntoView(e)})}});class yy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||nE(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new bE(this):new OE(this)}getCursor(e,t=0,i){let r=e.doc?e:me.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?as(this,r,t,i):os(this,r,t,i)}}class by{constructor(e){this.spec=e}}function os(n,e,t,i){return new is(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?gE(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function gE(n,e){return(t,i,r,s)=>((s>t||s+r.length<i)&&(s=Math.max(0,t-2),r=n.sliceString(s,Math.min(n.length,i+2))),(e(Yl(r,t-s))!=Be.Word||e(Kl(r,t-s))!=Be.Word)&&(e(Kl(r,i-s))!=Be.Word||e(Yl(r,i-s))!=Be.Word))}class OE extends by{constructor(e){super(e)}nextMatch(e,t,i){let r=os(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);r=os(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let s=Math.max(t,r-1e4-this.spec.unquoted.length),o=os(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=os(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=os(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function as(n,e,t,i){return new py(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?yE(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Yl(n,e){return n.slice(at(n,e,!1),e)}function Kl(n,e){return n.slice(e,at(n,e))}function yE(n){return(e,t,i)=>!i[0].length||(n(Yl(i.input,i.index))!=Be.Word||n(Kl(i.input,i.index))!=Be.Word)&&(n(Kl(i.input,i.index+i[0].length))!=Be.Word||n(Yl(i.input,i.index+i[0].length))!=Be.Word)}class bE extends by{nextMatch(e,t,i){let r=as(this.spec,e,i,e.doc.length).next();return r.done&&(r=as(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let s=Math.max(t,i-r*1e4),o=as(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=as(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=as(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Lo=oe.define(),Zf=oe.define(),Li=nt.define({create(n){return new Lf(Df(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Lo)?n=new Lf(t.value.create(),n.panel):t.is(Zf)&&(n=new Lf(n.query,t.value?Nf:null));return n},provide:n=>Eo.from(n,e=>e.panel)});class Lf{constructor(e,t){this.query=e,this.panel=t}}const vE=z.mark({class:"cm-searchMatch"}),wE=z.mark({class:"cm-searchMatch cm-searchMatch-selected"}),xE=Xe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Li))}update(n){let e=n.state.field(Li);(e!=n.startState.field(Li)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return z.none;let{view:t}=this,i=new Kn;for(let r=0,s=t.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;n.highlight(t.state,a,l,(h,c)=>{let u=t.state.selection.ranges.some(f=>f.from==h&&f.to==c);i.add(h,c,u?wE:vE)})}return i.finish()}},{decorations:n=>n.decorations});function No(n){return e=>{let t=e.state.field(Li,!1);return t&&t.query.spec.valid?n(e,t):Sy(e)}}const Jl=No((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=$.single(i.from,i.to),s=n.state.facet(ss);return n.dispatch({selection:r,effects:[jf(n,i),s.scrollToMatch(r.main,n)],userEvent:"select.search"}),xy(n),!0}),ec=No((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let s=$.single(r.from,r.to),o=n.state.facet(ss);return n.dispatch({selection:s,effects:[jf(n,r),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),xy(n),!0}),SE=No((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:$.create(t.map(i=>$.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),AE=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,s=[],o=0;for(let a=new is(n.doc,n.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push($.range(a.value.from,a.value.to))}return e(n.update({selection:$.create(s,o),userEvent:"select.search.matches"})),!0},vy=No((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=s,a=[],l,h,c=[];if(o.from==i&&o.to==r&&(h=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(t,o.from,o.to),c.push(q.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let u=a.length==0||a[0].from>=s.to?0:s.to-s.from-h.length;l=$.single(o.from-u,o.to-u),c.push(jf(n,o)),c.push(t.facet(ss).scrollToMatch(l.main,n))}return n.dispatch({changes:a,selection:l,effects:c,userEvent:"input.replace"}),!0}),kE=No((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:q.announce.of(i),userEvent:"input.replace.all"}),!0});function Nf(n){return n.state.facet(ss).createPanel(n)}function Df(n,e){var t,i,r,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let h=n.facet(ss);return new yy({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:h.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function wy(n){let e=To(n,Nf);return e&&e.dom.querySelector("[main-field]")}function xy(n){let e=wy(n);e&&e==n.root.activeElement&&e.select()}const Sy=n=>{let e=n.state.field(Li,!1);if(e&&e.panel){let t=wy(n);if(t&&t!=n.root.activeElement){let i=Df(n.state,e.query.spec);i.valid&&n.dispatch({effects:Lo.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[Zf.of(!0),e?Lo.of(Df(n.state,e.query.spec)):oe.appendConfig.of(_E)]});return!0},Ay=n=>{let e=n.state.field(Li,!1);if(!e||!e.panel)return!1;let t=To(n,Nf);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Zf.of(!1)}),!0},PE=[{key:"Mod-f",run:Sy,scope:"editor search-panel"},{key:"F3",run:Jl,shift:ec,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Jl,shift:ec,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ay,scope:"editor search-panel"},{key:"Mod-Shift-l",run:AE},{key:"Mod-Alt-g",run:iE},{key:"Mod-d",run:mE,preventDefault:!0}];class TE{constructor(e){this.view=e;let t=this.query=e.state.field(Li).query.spec;this.commit=this.commit.bind(this),this.searchField=_e("input",{value:t.search,placeholder:Ut(e,"Find"),"aria-label":Ut(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=_e("input",{value:t.replace,placeholder:Ut(e,"Replace"),"aria-label":Ut(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=_e("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=_e("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=_e("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,s,o){return _e("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=_e("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>Jl(e),[Ut(e,"next")]),i("prev",()=>ec(e),[Ut(e,"previous")]),i("select",()=>SE(e),[Ut(e,"all")]),_e("label",null,[this.caseField,Ut(e,"match case")]),_e("label",null,[this.reField,Ut(e,"regexp")]),_e("label",null,[this.wordField,Ut(e,"by word")]),...e.state.readOnly?[]:[_e("br"),this.replaceField,i("replace",()=>vy(e),[Ut(e,"replace")]),i("replaceAll",()=>kE(e),[Ut(e,"replace all")])],_e("button",{name:"close",onclick:()=>Ay(e),"aria-label":Ut(e,"close"),type:"button"},["×"])])}commit(){let e=new yy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Lo.of(e)}))}keydown(e){LA(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ec:Jl)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),vy(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Lo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ss).top}}function Ut(n,e){return n.state.phrase(e)}const tc=30,nc=/[\s\.,:;?!]/;function jf(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,s=Math.max(i.from,e-tc),o=Math.min(r,t+tc),a=n.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<tc;l++)if(!nc.test(a[l+1])&&nc.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-tc;l--)if(!nc.test(a[l-1])&&nc.test(a[l])){a=a.slice(0,l);break}}return q.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const EE=q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),_E=[Li,ki.low(xE),EE];class ky{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ke(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(_y(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Py(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function QE(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=Py(e)+Py(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Ty(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:QE(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}function CE(n,e){return t=>{for(let i=Ke(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class Ey{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function cr(n){return n.selection.main.from}function _y(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const qf=An.define();function IE(n,e,t,i){let{main:r}=n.selection,s=t-r.from,o=i-r.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,i))return{range:a};let l=n.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:$.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Qy=new WeakMap;function RE(n){if(!Array.isArray(n))return n;let e=Qy.get(n);return e||Qy.set(n,e=Ty(n)),e}const ic=oe.define(),Do=oe.define();class $E{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=lt(e,t),r=Yt(i);this.chars.push(i);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(lt(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:o}=this;if(t.length==1){let y=lt(e,0),w=Yt(y),k=w==e.length?0:-100;if(y!=t[0])if(y==i[0])k+=-200;else return null;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,h=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&h<l;){let k=lt(e,y);(k==t[h]||k==i[h])&&(r[h++]=y),y+=Yt(k)}if(h<l)return null}let c=0,u=0,f=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),O=!0;for(let y=0,w=Math.min(e.length,200),k=0;y<w&&u<l;){let x=lt(e,y);a<0&&(c<l&&x==t[c]&&(s[c++]=y),d<l&&(x==t[d]||x==i[d]?(d==0&&(p=y),m=y+1,d++):d=0));let T,A=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(T=Fh(x))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!y||A==1&&g||k==0&&A!=0)&&(t[u]==x||i[u]==x&&(f=!0)?o[u++]=y:o.length&&(O=!1)),k=A,y+=Yt(x)}return u==l&&o[0]==0&&O?this.result(-100+(f?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):d==l?this.ret(-900-e.length,[p,m]):u==l?this.result(-100+(f?-200:0)+-700+(O?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],s=0;for(let o of t){let a=o+(this.astral?Yt(lt(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class ME{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const it=G.define({combine(n){return kn(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:BE,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Cy(e(i),t(i)),optionClass:(e,t)=>i=>Cy(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Cy(n,e){return n?e?n+" "+e:n:e}function BE(n,e,t,i,r,s){let o=n.textDirection==Re.RTL,a=o,l=!1,h="top",c,u,f=e.left-r.left,d=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(p,d)?a=!1:!a&&d<Math.min(p,f)&&(a=!0),p<=(a?f:d))c=Math.max(r.top,Math.min(t.top,r.bottom-m))-e.top,u=Math.min(400,a?f:d);else{l=!0,u=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=m||y>e.top?c=t.bottom-e.top:(h="bottom",c=e.bottom-t.top)}let g=(e.bottom-e.top)/s.offsetHeight,O=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${c/g}px; max-width: ${u/O}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function ZE(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let h=0;h<s.length;){let c=s[h++],u=s[h++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(c,u))),f.className="cm-completionMatchedText",l=u}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Uf(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class LE{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:s,selected:o}=r.open,a=e.state.facet(it);this.optionContent=ZE(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Uf(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:h}=e.state.field(t).open;for(let c=l.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(it).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Do.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=Uf(s.length,o,e.state.facet(it).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Uf(t.options.length,t.selected,this.view.state.facet(it).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Qt(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&DE(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,t.bottom)-10||r.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(it).positionInfo(this.view,t,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:h}=a;if(h){let f=typeof h=="string"?h:h.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let d=r.appendChild(document.createElement("completion-section"));d.textContent=f}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(a);u&&(c.className=u);for(let f of this.optionContent){let d=f(a,this.view.state,this.view,l);d&&c.appendChild(d)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function NE(n,e){return t=>new LE(t,n,e)}function DE(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function Iy(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function jE(n,e){let t=[],i=null,r=h=>{t.push(h);let{section:c}=h.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(f=>f.name==u)||i.push(typeof c=="string"?{name:u}:c)}},s=e.facet(it);for(let h of n)if(h.hasResult()){let c=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)r(new Ey(u,h.source,c?c(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),f,d=s.filterStrict?new ME(u):new $E(u);for(let p of h.result.options)if(f=d.match(p.label)){let m=p.displayLabel?c?c(p,f.matched):[]:f.matched;r(new Ey(p,h.source,m,f.score+(p.boost||0)))}}}if(i){let h=Object.create(null),c=0,u=(f,d)=>{var p,m;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(f.name<d.name?-1:1)};for(let f of i.sort(u))c-=1e5,h[f.name]=c;for(let f of t){let{section:d}=f.completion;d&&(f.score+=h[typeof d=="string"?d:d.name])}}let o=[],a=null,l=s.compareCompletions;for(let h of t.sort((c,u)=>u.score-c.score||l(c.completion,u.completion))){let c=h.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(h):Iy(h.completion)>Iy(a)&&(o[o.length-1]=h),a=h.completion}return o}class ls{constructor(e,t,i,r,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ls(this.options,Ry(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,s,o){if(r&&!o&&e.some(h=>h.isPending))return r.setDisabled();let a=jE(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let l=t.facet(it).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==h){l=c;break}}return new ls(a,Ry(i,l),{pos:e.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:VE,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new ls(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ls(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class rc{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new rc(GE,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(it),s=(i.override||t.languageDataAt("autocomplete",cr(t)).map(RE)).map(l=>(this.active.find(c=>c.source==l)||new rn(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,h)=>l==this.active[h])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(Xf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!qE(s,this.active)||a?o=ls.build(s,t,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new rn(l.source,0):l));for(let l of e.effects)l.is(My)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new rc(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?UE:XE}}function qE(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}const UE={"aria-autocomplete":"list"},XE={};function Ry(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const GE=[];function $y(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(qf);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class rn{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=$y(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new rn(r.source,0)),i&4&&r.state==0&&(r=new rn(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(ic))r=new rn(r.source,1,s.value);else if(s.is(Do))r=new rn(r.source,0);else if(s.is(Xf))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(cr(e.state))}}class cs extends rn{constructor(e,t,i,r,s,o){super(e,3,t),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=cr(e.state);if(a>o||!r||t&2&&(cr(e.startState)==this.from||a<this.limit))return new rn(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return FE(r.validFor,e.state,s,o)?new cs(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new ky(e.state,a,!1)))?new cs(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:cr(e.state)):new rn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new cs(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new rn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function FE(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):_y(n,!0).test(r)}const Xf=oe.define({map(n,e){return n.map(t=>t.map(e))}}),My=oe.define(),$t=nt.define({create(){return rc.start()},update(n,e){return n.update(e)},provide:n=>[Ju.from(n,e=>e.tooltip),q.contentAttributes.from(n,e=>e.attrs)]});function Gf(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field($t).active.find(r=>r.source==e.source);return i instanceof cs?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},IE(n.state,t,i.from,i.to)),{annotations:qf.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const VE=NE($t,Gf);function sc(n,e="option"){return t=>{let i=t.state.field($t,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(it).interactionDelay)return!1;let r=1,s;e=="page"&&(s=R0(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:My.of(a)}),!0}}const HE=n=>{let e=n.state.field($t,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(it).interactionDelay?!1:Gf(n,e.open.options[e.open.selected])},By=n=>n.state.field($t,!1)?(n.dispatch({effects:ic.of(!0)}),!0):!1,WE=n=>{let e=n.state.field($t,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Do.of(null)}),!0)};class zE{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const YE=50,KE=1e3,JE=Xe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field($t).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field($t),t=n.state.facet(it);if(!n.selectionSet&&!n.docChanged&&n.startState.field($t)==e)return;let i=n.transactions.some(s=>{let o=$y(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>YE&&Date.now()-o.time>KE){for(let a of o.context.abortListeners)try{a()}catch(l){Qt(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(ic)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field($t);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(it).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=cr(e),i=new ky(e,t,n.explicit,this.view),r=new zE(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Do.of(null)}),Qt(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(it).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(it),i=this.view.state.field($t);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let a=cr(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),h=new cs(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let c of s.updates)h=h.update(c,t);if(h.hasResult()){e.push(h);continue}}let o=i.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new rn(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Xf.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field($t,!1);if(e&&e.tooltip&&this.view.state.facet(it).closeOnBlur){let t=e.open&&R0(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Do.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ic.of(!1)}),20),this.composing=0}}}),e_=typeof navigator=="object"&&/Win/.test(navigator.platform),t_=ki.highest(q.domEventHandlers({keydown(n,e){let t=e.state.field($t,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(e_&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Gf(e,i),!1}})),Zy=q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class n_{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class Ff{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,ct.TrackDel),i=e.mapPos(this.to,1,ct.TrackDel);return t==null||i==null?null:new Ff(this.field,t,i)}}class Vf{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(i.length){let h=o,c=/^\t*/.exec(l)[0].length;for(let u=0;u<c;u++)h+=e.facet(Ro);r.push(t+h.length-c),l=h+l.slice(c)}i.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Ff(l.field,r[l.line]+l.from,r[l.line]+l.to));return{text:i,ranges:a}}static parse(e){let t=[],i=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",h=-1,c=l.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<t.length;u++)(a!=null?t[u].seq==a:c&&t[u].name==c)&&(h=u);if(h<0){let u=0;for(;u<t.length&&(a==null||t[u].seq!=null&&t[u].seq<a);)u++;t.splice(u,0,{seq:a,name:c}),h=u;for(let f of r)f.field>=h&&f.field++}r.push(new n_(h,i.length,s.index,s.index+c.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,h)=>{for(let c of r)c.line==i.length&&c.from>h&&(c.from--,c.to--);return l}),i.push(o)}return new Vf(i,r)}}let i_=z.widget({widget:new class extends Tn{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),r_=z.mark({class:"cm-snippetField"});class hs{constructor(e,t){this.ranges=e,this.active=t,this.deco=z.set(e.map(i=>(i.from==i.to?i_:r_).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new hs(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const jo=oe.define({map(n,e){return n&&n.map(e)}}),s_=oe.define(),qo=nt.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(jo))return t.value;if(t.is(s_)&&n)return new hs(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>q.decorations.from(n,e=>e?e.deco:z.none)});function Hf(n,e){return $.create(n.filter(t=>t.field==e).map(t=>$.range(t.from,t.to)))}function o_(n){let e=Vf.parse(n);return(t,i,r,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,r),l={changes:{from:r,to:s,insert:ye.of(o)},scrollIntoView:!0,annotations:i?[qf.of(i),bt.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=Hf(a,0)),a.some(h=>h.field>0)){let h=new hs(a,0),c=l.effects=[jo.of(h)];t.state.field(qo,!1)===void 0&&c.push(oe.appendConfig.of([qo,l_,c_,Zy]))}t.dispatch(t.state.update(l))}}function Ly(n){return({state:e,dispatch:t})=>{let i=e.field(qo,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,s=n>0&&!i.ranges.some(o=>o.field==r+n);return t(e.update({selection:Hf(i.ranges,r),effects:jo.of(s?null:new hs(i.ranges,r)),scrollIntoView:!0})),!0}}const a_=[{key:"Tab",run:Ly(1),shift:Ly(-1)},{key:"Escape",run:({state:n,dispatch:e})=>n.field(qo,!1)?(e(n.update({effects:jo.of(null)})),!0):!1}],Ny=G.define({combine(n){return n.length?n[0]:a_}}),l_=ki.highest(xo.compute([Ny],n=>n.facet(Ny)));function Mt(n,e){return Object.assign(Object.assign({},e),{apply:o_(n)})}const c_=q.domEventHandlers({mousedown(n,e){let t=e.state.field(qo,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=i&&s.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:Hf(t.ranges,r.field),effects:jo.of(t.ranges.some(s=>s.field>r.field)?new hs(t.ranges,r.field):null),scrollIntoView:!0}),!0)}}),Uo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},hr=oe.define({map(n,e){let t=e.mapPos(n,-1,ct.TrackAfter);return t==null?void 0:t}}),Wf=new class extends nr{};Wf.startSide=1,Wf.endSide=-1;const Dy=nt.define({create(){return be.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(hr)&&(n=n.update({add:[Wf.range(t.value,t.value+1)]}));return n}});function h_(){return[f_,Dy]}const zf="()[]{}<>";function jy(n){for(let e=0;e<zf.length;e+=2)if(zf.charCodeAt(e)==n)return zf.charAt(e+1);return Fh(n<128?n:n+1)}function qy(n,e){return n.languageDataAt("closeBrackets",e)[0]||Uo}const u_=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),f_=q.inputHandler.of((n,e,t,i)=>{if((u_?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Yt(lt(i,0))==1||e!=r.from||t!=r.to)return!1;let s=p_(n.state,i);return s?(n.dispatch(s),!0):!1}),d_=[{key:"Backspace",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=qy(n,n.selection.main.head).brackets||Uo.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let a=m_(n.doc,o.head);for(let l of i)if(l==a&&oc(n.doc,o.head)==jy(lt(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:$.cursor(o.head-l.length)}}return{range:r=o}});return r||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function p_(n,e){let t=qy(n,n.selection.main.head),i=t.brackets||Uo.brackets;for(let r of i){let s=jy(lt(r,0));if(e==r)return s==r?y_(n,r,i.indexOf(r+r+r)>-1,t):g_(n,r,s,t.before||Uo.before);if(e==s&&Uy(n,n.selection.main.from))return O_(n,r,s)}return null}function Uy(n,e){let t=!1;return n.field(Dy).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function oc(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Yt(lt(t,0)))}function m_(n,e){let t=n.sliceString(e-2,e);return Yt(lt(t,0))==t.length?t:t.slice(1)}function g_(n,e,t,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:hr.of(o.to+e.length),range:$.range(o.anchor+e.length,o.head+e.length)};let a=oc(n.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:hr.of(o.head+e.length),range:$.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function O_(n,e,t){let i=null,r=n.changeByRange(s=>s.empty&&oc(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:$.cursor(s.head+t.length)}:i={range:s});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function y_(n,e,t,i){let r=i.stringPrefixes||Uo.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:hr.of(a.to+e.length),range:$.range(a.anchor+e.length,a.head+e.length)};let l=a.head,h=oc(n.doc,l),c;if(h==e){if(Xy(n,l))return{changes:{insert:e+e,from:l},effects:hr.of(l+e.length),range:$.cursor(l+e.length)};if(Uy(n,l)){let f=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:$.cursor(l+f.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=Gy(n,l-2*e.length,r))>-1&&Xy(n,c))return{changes:{insert:e+e+e+e,from:l},effects:hr.of(l+e.length),range:$.cursor(l+e.length)};if(n.charCategorizer(l)(h)!=Be.Word&&Gy(n,l,r)>-1&&!b_(n,l,e,r))return{changes:{insert:e+e,from:l},effects:hr.of(l+e.length),range:$.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Xy(n,e){let t=Ke(n).resolveInner(e+1);return t.parent&&t.from==e}function b_(n,e,t,i){let r=Ke(n).resolveInner(e,-1),s=i.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&i.indexOf(a.slice(0,l))>-1){let c=r.firstChild;for(;c&&c.from==r.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function Gy(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Be.Word)return e;for(let r of t){let s=e-r.length;if(n.sliceDoc(s,e)==r&&i(n.sliceDoc(s-1,s))!=Be.Word)return s}return-1}function v_(n={}){return[t_,$t,it.of(n),JE,w_,Zy]}const Fy=[{key:"Ctrl-Space",run:By},{mac:"Alt-`",run:By},{key:"Escape",run:WE},{key:"ArrowDown",run:sc(!0)},{key:"ArrowUp",run:sc(!1)},{key:"PageDown",run:sc(!0,"page")},{key:"PageUp",run:sc(!1,"page")},{key:"Enter",run:HE}],w_=ki.highest(xo.computeN([it],n=>n.facet(it).defaultKeymap?[Fy]:[]));class Vy{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ur{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(Xo).markerFilter;s&&(r=s(r,i));let o=e.slice().sort((u,f)=>u.from-f.from||u.to-f.to),a=new Kn,l=[],h=0;for(let u=0;;){let f=u==o.length?null:o[u];if(!f&&!l.length)break;let d,p;for(l.length?(d=h,p=l.reduce((g,O)=>Math.min(g,O.to),f&&f.from>d?f.from:1e8)):(d=f.from,p=f.to,l.push(f),u++);u<o.length;){let g=o[u];if(g.from==d&&(g.to>g.from||g.to==d))l.push(g),u++,p=Math.min(g.to,p);else{p=Math.min(g.from,p);break}}let m=R_(l);if(l.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))a.add(d,d,z.widget({widget:new __(m),diagnostics:l.slice()}));else{let g=l.reduce((O,y)=>y.markClass?O+" "+y.markClass:O,"");a.add(d,p,z.mark({class:"cm-lintRange cm-lintRange-"+m+g,diagnostics:l.slice(),inclusiveEnd:l.some(O=>O.to>p)}))}h=p;for(let g=0;g<l.length;g++)l[g].to<=h&&l.splice(g--,1)}let c=a.finish();return new ur(c,t,us(c))}}function us(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new Vy(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Vy(i.from,s,i.diagnostic)}}),i}function x_(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Xo).hideOn(n,t,i);if(r!=null)return r;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Hy))||n.changes.touchesRange(s.from,Math.max(s.to,i)))}function S_(n,e){return n.field(Xt,!1)?e:e.concat(oe.appendConfig.of($_))}const Hy=oe.define(),Yf=oe.define(),Wy=oe.define(),Xt=nt.define({create(){return new ur(z.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=us(t,n.selected.diagnostic,s)||us(t,null,s)}!t.size&&r&&e.state.facet(Xo).autoPanel&&(r=null),n=new ur(t,r,i)}for(let t of e.effects)if(t.is(Hy)){let i=e.state.facet(Xo).autoPanel?t.value.length?Go.open:null:n.panel;n=ur.init(t.value,i,e.state)}else t.is(Yf)?n=new ur(n.diagnostics,t.value?Go.open:null,n.selected):t.is(Wy)&&(n=new ur(n.diagnostics,n.panel,t.value));return n},provide:n=>[Eo.from(n,e=>e.panel),q.decorations.from(n,e=>e.diagnostics)]}),A_=z.mark({class:"cm-lintRange cm-lintRange-active"});function k_(n,e,t){let{diagnostics:i}=n.state.field(Xt),r,s=-1,o=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,h,{spec:c})=>{if(e>=l&&e<=h&&(l==h||(e>l||t>0)&&(e<h||t<0)))return r=c.diagnostics,s=l,o=h,!1});let a=n.state.facet(Xo).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:P_(n,r)}}}:null}function P_(n,e){return _e("ul",{class:"cm-tooltip-lint"},e.map(t=>Ky(n,t,!1)))}const T_=n=>{let e=n.state.field(Xt,!1);(!e||!e.panel)&&n.dispatch({effects:S_(n.state,[Yf.of(!0)])});let t=To(n,Go.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},zy=n=>{let e=n.state.field(Xt,!1);return!e||!e.panel?!1:(n.dispatch({effects:Yf.of(!1)}),!0)},E_=[{key:"Mod-Shift-m",run:T_,preventDefault:!0},{key:"F8",run:n=>{let e=n.state.field(Xt,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}],Xo=G.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},kn(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function Yy(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Ky(n,e,t){var i;let r=t?Yy(e.actions):[];return _e("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},_e("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let d=us(n.state.field(Xt).diagnostics,e);d&&s.apply(n,d.from,d.to)},{name:h}=s,c=r[o]?h.indexOf(r[o]):-1,u=c<0?h:[h.slice(0,c),_e("u",h.slice(c,c+1)),h.slice(c+1)];return _e("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${h}${c<0?"":` (access key "${r[o]})"`}.`},u)}),e.source&&_e("div",{class:"cm-diagnosticSource"},e.source))}class __ extends Tn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return _e("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Jy{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ky(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Go{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)zy(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Yy(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=us(this.view.state.field(Xt).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=_e("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=_e("div",{class:"cm-panel-lint"},this.list,_e("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>zy(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Xt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Xt),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:h})=>{for(let c of h.diagnostics){if(o.has(c))continue;o.add(c);let u=-1,f;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==c){u=d;break}u<0?(f=new Jy(this.view,c),this.items.splice(i,0,f),r=!0):(f=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Jy(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let h=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/h:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Xt),i=us(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Wy.of(i)})}static open(e){return new Go(e)}}function Q_(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function ac(n){return Q_(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const C_=q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ac("#d11")},".cm-lintRange-warning":{backgroundImage:ac("orange")},".cm-lintRange-info":{backgroundImage:ac("#999")},".cm-lintRange-hint":{backgroundImage:ac("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function I_(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function R_(n){let e="hint",t=1;for(let i of n){let r=I_(i.severity);r>t&&(t=r,e=i.severity)}return e}const $_=[Xt,q.decorations.compute([Xt],n=>{let{selected:e,panel:t}=n.field(Xt);return!e||!t||e.from==e.to?z.none:z.set([A_.range(e.from,e.to)])}),Pk(k_,{hideOn:x_}),C_];var eb=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(d_)),e.defaultKeymap!==!1&&(i=i.concat(eE)),e.searchKeymap!==!1&&(i=i.concat(PE)),e.historyKeymap!==!1&&(i=i.concat(cT)),e.foldKeymap!==!1&&(i=i.concat(AP)),e.completionKeymap!==!1&&(i=i.concat(Fy)),e.lintKeymap!==!1&&(i=i.concat(E_));var r=[];return e.lineNumbers!==!1&&r.push(Zk()),e.highlightActiveLineGutter!==!1&&r.push(Dk()),e.highlightSpecialChars!==!1&&r.push(tk()),e.history!==!1&&r.push(eT()),e.foldGutter!==!1&&r.push(EP()),e.drawSelection!==!1&&r.push(XA()),e.dropCursor!==!1&&r.push(WA()),e.allowMultipleSelections!==!1&&r.push(me.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(gP()),e.syntaxHighlighting!==!1&&r.push(xf(IP,{fallback:!0})),e.bracketMatching!==!1&&r.push(LP()),e.closeBrackets!==!1&&r.push(h_()),e.autocompletion!==!1&&r.push(v_()),e.rectangularSelection!==!1&&r.push(mk()),t!==!1&&r.push(yk()),e.highlightActiveLine!==!1&&r.push(ak()),e.highlightSelectionMatches!==!1&&r.push(aE()),e.tabSize&&typeof e.tabSize=="number"&&r.push(Ro.of(" ".repeat(e.tabSize))),r.concat([xo.of(i.flat())]).filter(Boolean)};const M_="#e5c07b",tb="#e06c75",B_="#56b6c2",Z_="#ffffff",lc="#abb2bf",Kf="#7d8799",L_="#61afef",N_="#98c379",nb="#d19a66",D_="#c678dd",j_="#21252b",ib="#2c313a",rb="#282c34",Jf="#353a42",q_="#3E4451",sb="#528bff",U_=q.theme({"&":{color:lc,backgroundColor:rb},".cm-content":{caretColor:sb},".cm-cursor, .cm-dropCursor":{borderLeftColor:sb},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:q_},".cm-panels":{backgroundColor:j_,color:lc},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:rb,color:Kf,border:"none"},".cm-activeLineGutter":{backgroundColor:ib},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Jf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Jf,borderBottomColor:Jf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ib,color:lc}}},{dark:!0}),X_=ts.define([{tag:v.keyword,color:D_},{tag:[v.name,v.deleted,v.character,v.propertyName,v.macroName],color:tb},{tag:[v.function(v.variableName),v.labelName],color:L_},{tag:[v.color,v.constant(v.name),v.standard(v.name)],color:nb},{tag:[v.definition(v.name),v.separator],color:lc},{tag:[v.typeName,v.className,v.number,v.changed,v.annotation,v.modifier,v.self,v.namespace],color:M_},{tag:[v.operator,v.operatorKeyword,v.url,v.escape,v.regexp,v.link,v.special(v.string)],color:B_},{tag:[v.meta,v.comment],color:Kf},{tag:v.strong,fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.strikethrough,textDecoration:"line-through"},{tag:v.link,color:Kf,textDecoration:"underline"},{tag:v.heading,fontWeight:"bold",color:tb},{tag:[v.atom,v.bool,v.special(v.variableName)],color:nb},{tag:[v.processingInstruction,v.string,v.inserted],color:N_},{tag:v.invalid,color:Z_}]),G_=[U_,xf(X_)];var F_=q.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),V_=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:r=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,l=[];switch(t&&l.unshift(xo.of([tE])),a&&(typeof a=="boolean"?l.unshift(eb()):l.unshift(eb(a))),o&&l.unshift(uk(o)),s){case"light":l.push(F_);break;case"dark":l.push(G_);break;case"none":break;default:l.push(s);break}return i===!1&&l.push(q.editable.of(!1)),r&&l.push(me.readOnly.of(!0)),[...l]},H_=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),ob=An.define(),W_=[];function z_(n){var{value:e,selection:t,onChange:i,onStatistics:r,onCreateEditor:s,onUpdate:o,extensions:a=W_,autoFocus:l,theme:h="light",height:c=null,minHeight:u=null,maxHeight:f=null,width:d=null,minWidth:p=null,maxWidth:m=null,placeholder:g="",editable:O=!0,readOnly:y=!1,indentWithTab:w=!0,basicSetup:k=!0,root:x,initialState:T}=n,[A,S]=Ee.useState(),[I,_]=Ee.useState(),[R,C]=Ee.useState(),L=q.theme({"&":{height:c,minHeight:u,maxHeight:f,width:d,minWidth:p,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),W=q.updateListener.of(M=>{if(M.docChanged&&typeof i=="function"&&!M.transactions.some(X=>X.annotation(ob))){var j=M.state.doc,N=j.toString();i(N,M)}r&&r(H_(M))}),b=V_({theme:h,editable:O,readOnly:y,placeholder:g,indentWithTab:w,basicSetup:k}),P=[W,L,...b];return o&&typeof o=="function"&&P.push(q.updateListener.of(o)),P=P.concat(a),Ee.useEffect(()=>{if(A&&!R){var M={doc:e,selection:t,extensions:P},j=T?me.fromJSON(T.json,M,T.fields):me.create(M);if(C(j),!I){var N=new q({state:j,parent:A,root:x});_(N),s&&s(N,j)}}return()=>{I&&(C(void 0),_(void 0))}},[A,R]),Ee.useEffect(()=>S(n.container),[n.container]),Ee.useEffect(()=>()=>{I&&(I.destroy(),_(void 0))},[I]),Ee.useEffect(()=>{l&&I&&I.focus()},[l,I]),Ee.useEffect(()=>{I&&I.dispatch({effects:oe.reconfigure.of(P)})},[h,a,c,u,f,d,p,m,g,O,y,w,k,i,o]),Ee.useEffect(()=>{if(e!==void 0){var M=I?I.state.doc.toString():"";I&&e!==M&&I.dispatch({changes:{from:0,to:M.length,insert:e||""},annotations:[ob.of(!0)]})}},[e,I]),{state:R,setState:C,view:I,setView:_,container:A,setContainer:S}}var Y_=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ab=Ee.forwardRef((n,e)=>{var{className:t,value:i="",selection:r,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:h,autoFocus:c,theme:u="light",height:f,minHeight:d,maxHeight:p,width:m,minWidth:g,maxWidth:O,basicSetup:y,placeholder:w,indentWithTab:k,editable:x,readOnly:T,root:A,initialState:S}=n,I=G1(n,Y_),_=Ee.useRef(null),{state:R,view:C,container:L}=z_({container:_.current,root:A,value:i,autoFocus:c,theme:u,height:f,minHeight:d,maxHeight:p,width:m,minWidth:g,maxWidth:O,basicSetup:y,placeholder:w,indentWithTab:k,editable:x,readOnly:T,selection:r,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:h,extensions:s,initialState:S});if(Ee.useImperativeHandle(e,()=>({editor:_.current,state:R,view:C}),[_,L,R,C]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var W=typeof u=="string"?"cm-theme-"+u:"cm-theme";return tt.jsx("div",Ha({ref:_,className:""+W+(t?" "+t:"")},I))});ab.displayName="CodeMirror";var K_=n=>{var{theme:e,settings:t={},styles:i=[]}=n,r={".cm-gutters":{}},s={};t.background&&(s.backgroundColor=t.background),t.backgroundImage&&(s.backgroundImage=t.backgroundImage),t.foreground&&(s.color=t.foreground),t.fontSize&&(s.fontSize=t.fontSize),(t.background||t.foreground)&&(r["&"]=s),t.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(r[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(r[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(r[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(r[".cm-content"]={caretColor:t.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var o={};t.gutterActiveForeground&&(o.color=t.gutterActiveForeground),t.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:t.lineHighlight},o.backgroundColor=t.lineHighlight),r[".cm-activeLineGutter"]=o,t.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var a=q.theme(r,{dark:e==="dark"}),l=ts.define(i),h=[a,xf(l)];return h},J_={background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#474b6611"},eQ=[{tag:v.keyword,color:"#bb9af7"},{tag:[v.name,v.deleted,v.character,v.macroName],color:"#c0caf5"},{tag:[v.propertyName],color:"#7aa2f7"},{tag:[v.processingInstruction,v.string,v.inserted,v.special(v.string)],color:"#9ece6a"},{tag:[v.function(v.variableName),v.labelName],color:"#7aa2f7"},{tag:[v.color,v.constant(v.name),v.standard(v.name)],color:"#bb9af7"},{tag:[v.definition(v.name),v.separator],color:"#c0caf5"},{tag:[v.className],color:"#c0caf5"},{tag:[v.number,v.changed,v.annotation,v.modifier,v.self,v.namespace],color:"#ff9e64"},{tag:[v.typeName],color:"#0db9d7"},{tag:[v.operator,v.operatorKeyword],color:"#bb9af7"},{tag:[v.url,v.escape,v.regexp,v.link],color:"#b4f9f8"},{tag:[v.meta,v.comment],color:"#444b6a"},{tag:v.strong,fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.link,textDecoration:"underline"},{tag:v.heading,fontWeight:"bold",color:"#89ddff"},{tag:[v.atom,v.bool,v.special(v.variableName)],color:"#c0caf5"},{tag:v.invalid,color:"#ff5370"},{tag:v.strikethrough,textDecoration:"line-through"}],lb=n=>{var{theme:e="dark",settings:t={},styles:i=[]}=n||{};return K_({theme:e,settings:Ha({},J_,t),styles:[...eQ,...i]})};lb();var sn;(function(n){n.NUMBER="NUMBER_NUMBER",n.HEX="NUMBER_HEX",n.STR="NUMBER_STR",n.BIGINT="NUMBER_BIGINT"})(sn||(sn={}));var ni;(function(n){n.HEX="BYTES_HEX",n.UINT8ARRAY="BYTES_UINT8ARRAY"})(ni||(ni={}));const xt={number:sn.BIGINT,bytes:ni.HEX},se={number:sn.HEX,bytes:ni.HEX};var ii;(function(n){n.EARLIEST="earliest",n.LATEST="latest",n.PENDING="pending",n.SAFE="safe",n.FINALIZED="finalized",n.COMMITTED="committed"})(ii||(ii={}));var Fo;(function(n){n.chainstart="chainstart",n.frontier="frontier",n.homestead="homestead",n.dao="dao",n.tangerineWhistle="tangerineWhistle",n.spuriousDragon="spuriousDragon",n.byzantium="byzantium",n.constantinople="constantinople",n.petersburg="petersburg",n.istanbul="istanbul",n.muirGlacier="muirGlacier",n.berlin="berlin",n.london="london",n.altair="altair",n.arrowGlacier="arrowGlacier",n.grayGlacier="grayGlacier",n.bellatrix="bellatrix",n.merge="merge",n.capella="capella",n.shanghai="shanghai"})(Fo||(Fo={}));const ed=Object.getPrototypeOf(Uint8Array);var cb=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const hb=Symbol.for("web3/base-provider");class Vo{static isWeb3Provider(e){return e instanceof Vo||!!(e&&e[hb])}get[hb](){return!0}send(e,t){this.request(e).then(i=>{t(null,i)}).catch(i=>{t(i)})}sendAsync(e){return cb(this,void 0,void 0,function*(){return this.request(e)})}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(r){return cb(this,void 0,void 0,function*(){return(yield t(r)).result})},e.asEIP1193Provider=void 0,e}}class tQ extends Array{constructor(e){super(),this._accountProvider=e}}const nQ=100,iQ=101,rQ=201,sQ=202,oQ=203,aQ=204,lQ=205,cQ=206,hQ=207,uQ=208,fQ=300,dQ=301,pQ=310,mQ=311,gQ=400,OQ=402,yQ=405,bQ=407,vQ=408,wQ=410,xQ=411,SQ=412,AQ=413,kQ=414,PQ=415,TQ=416,EQ=417,_Q=418,QQ=419,CQ=420,IQ=421,RQ=422,$Q=423,MQ=424,BQ=425,ZQ=426,LQ=427,NQ=428,DQ=429,jQ=430,qQ=431,UQ=432,XQ=433,GQ=434,FQ=435,VQ=436,HQ=437,WQ=438,zQ=439,YQ=440,KQ=441,JQ=500,e2=503,t2=505,n2=506,i2=507,r2=600,s2=602,o2=603,a2=604,l2=701,c2=702,h2=703,u2=704,f2=705,d2=706,p2=707,m2=709,g2=801,O2=802,y2=4001,b2=4100,v2=4200,w2=4900,x2=4901,S2=902,A2=903,k2=1001,P2=1002,T2=1003,E2=1004,_2=1005,Q2=1006,C2=1008,I2=1009,R2=1010,$2=1011,M2=1012,B2=1014,Z2=1015,L2=1100,ub=1101,N2=1200,cc=-32700,hc=-32600,uc=-32601,fc=-32602,dc=-32603,pc=-32e3,mc=-32001,gc=-32002,Oc=-32003,yc=-32004,bc=-32005,vc=-32006;class ne extends Error{get innerError(){return this.cause instanceof Ho?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new Ho(e):this.cause=e}constructor(e,t){super(e),Array.isArray(t)?this.cause=new Ho(t):this.cause=t,this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(new.target.constructor):this.stack=new Error().stack}static convertToString(e,t=!1){if(e==null)return"undefined";const i=JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s);return t&&["bigint","string"].includes(typeof e)?i.replace(/['\\"]+/g,""):i}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class Ho extends ne{constructor(e){super(`Multiple errors occurred: [${e.map(t=>t.message).join("], [")}]`),this.code=uQ,this.errors=e}}class he extends ne{constructor(e,t){super(`Invalid value given "${ne.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class fb extends ne{constructor(){super("Private key must be 32 bytes."),this.code=l2}}class D2 extends ne{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=c2}}class j2 extends ne{constructor(e){super(`"${e}"`),this.code=O2}}class db extends ne{constructor(){super("Invalid key derivation function"),this.code=h2}}class q2 extends ne{constructor(){super("Key derivation failed - possibly wrong password"),this.code=u2}}class U2 extends ne{constructor(){super("Unsupported key store version"),this.code=f2}}class X2 extends ne{constructor(){super("Password cannot be empty"),this.code=d2}}class G2 extends ne{constructor(){super("Initialization vector must be 16 bytes"),this.code=p2}}class F2 extends ne{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=m2}}class Wo extends ne{constructor(e,t){super(e),this.code=JQ,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class td extends Wo{constructor(e){super("Connection not open",e),this.code=e2}}class V2 extends Wo{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=t2}}class H2 extends Wo{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=n2}}class W2 extends Wo{constructor(e){super(`Request already sent with following id: ${e}`),this.code=i2}}class St extends ne{constructor(e,t){super(e),this.code=fQ,this.receipt=t}}class pb extends ne{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=dQ}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class wc extends St{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,typeof e.data=="object"){let t;e.data&&"originalError"in e.data?t=e.data.originalError:t=e.data,this.data=t.data,this.cause=new wc(t)}else this.data=e.data}setDecodedProperties(e,t,i){this.errorName=e,this.errorSignature=t,this.errorArgs=i}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class fr extends St{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=pQ,this.cause=new wc(e)}}class z2 extends he{constructor(e){var t,i;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(i=e.input)!==null&&i!==void 0?i:"undefined"}`,`You can't have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.`),this.code=mQ}}class Y2 extends ne{constructor(e){super(`ENS is not supported on network ${e}`),this.code=S2}}class K2 extends ne{constructor(){super("Network not synced"),this.code=A2}}class mb extends ne{constructor(e){super(`Invalid parameters passed. "${typeof e!="undefined"?e:""}"`),this.hint=e,this.code=hQ}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class nd extends ne{constructor(){super(...arguments),this.code=rQ}}class ri extends ne{constructor(){super("The method you're trying to call is not implemented."),this.code=sQ}}class gb extends ne{constructor(){super(...arguments),this.code=oQ}}class J2 extends ne{constructor(){super(...arguments),this.code=aQ}}class pe extends ne{constructor(e,t){super(e),this.code=lQ,this.props=t!=null?t:{}}}class eC extends ne{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=cQ}}class xc extends ne{constructor(){super(...arguments),this.code=r2}}class id extends ne{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=s2}}class si extends ne{constructor(){super(...arguments),this.code=o2}}class tC extends ne{constructor(){super(...arguments),this.code=a2}}class nC extends he{constructor(){super(...arguments),this.code=g2}}class rd extends ne{constructor(e,t){super(e),this.receipt=t,this.code=gQ}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class Sc extends ne{constructor(e,t,i,r){super(`Transaction has been reverted by the EVM${i===void 0?"":`:
 ${ne.convertToString(i)}`}`),this.reason=e,this.signature=t,this.receipt=i,this.data=r,this.code=OQ}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class Ob extends Sc{constructor(e,t,i,r,s,o,a){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=i,this.customErrorArguments=r,this.signature=s,this.receipt=o,this.data=a,this.code=WQ}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class yb extends rd{constructor(e){super(`Transaction has been reverted by the EVM${e===void 0?"":`:
 ${ne.convertToString(e)}`}`,e),this.code=yQ}}class iC extends rd{constructor(){super("Raw transaction undefined"),this.code=bQ}}class bb extends rd{constructor(){super("Transaction not found"),this.code=jQ}}class rC extends he{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=vQ}}class sC extends he{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=HQ}}class oC extends he{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=wQ}}class aC extends he{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=xQ}}class lC extends he{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=SQ}}class cC extends he{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=FQ}}class hC extends he{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=VQ}}class uC extends he{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=AQ}}class fC extends he{constructor(e){var t,i;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${(t=e.chain)!==null&&t!==void 0?t:"undefined"}, "hardfork": ${(i=e.hardfork)!==null&&i!==void 0?i:"undefined"}`),this.code=kQ}}class dC extends ne{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=YQ}}class pC extends he{constructor(e){var t,i,r,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(i=e.gasPrice)!==null&&i!==void 0?i:"undefined"}, maxPriorityFeePerGas: ${(r=e.maxPriorityFeePerGas)!==null&&r!==void 0?r:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,'"gas" is missing'),this.code=PQ,this.cause=new dC}}class mC extends ne{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=KQ}}class gC extends he{constructor(e){var t,i,r,s;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(i=e.gasPrice)!==null&&i!==void 0?i:"undefined"}, maxPriorityFeePerGas: ${(r=e.maxPriorityFeePerGas)!==null&&r!==void 0?r:"undefined"}, maxFeePerGas: ${(s=e.maxFeePerGas)!==null&&s!==void 0?s:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=GQ,this.cause=new mC}}class OC extends he{constructor(e){var t,i;super(`gas: ${(t=e.gas)!==null&&t!==void 0?t:"undefined"}, gasPrice: ${(i=e.gasPrice)!==null&&i!==void 0?i:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=TQ}}class yC extends he{constructor(e){var t,i;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(i=e.maxFeePerGas)!==null&&i!==void 0?i:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=EQ}}class bC extends he{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=_Q}}class vb extends he{constructor(e){var t,i;super(`maxPriorityFeePerGas: ${(t=e.maxPriorityFeePerGas)!==null&&t!==void 0?t:"undefined"}, maxFeePerGas: ${(i=e.maxFeePerGas)!==null&&i!==void 0?i:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=QQ}}class vC extends he{constructor(e){super(e,"invalid transaction object"),this.code=CQ}}class wC extends he{constructor(e){var t,i;super(`nonce: ${(t=e.nonce)!==null&&t!==void 0?t:"undefined"}, chainId: ${(i=e.chainId)!==null&&i!==void 0?i:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=IQ}}class xC extends he{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=RQ}}class SC extends he{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=$Q}}class wb extends he{constructor(e){super(e,"unsupported transaction type"),this.code=MQ}}class xb extends he{constructor(e){var t,i;super(`data: ${(t=e.data)!==null&&t!==void 0?t:"undefined"}, input: ${(i=e.input)!==null&&i!==void 0?i:"undefined"}`,`You can't have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.`),this.code=BQ}}class AC extends ne{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!
	Transaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=qQ}}function Sb(n){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!
	Transaction Hash: ${n?n.toString():"not available"}`}class Ab extends ne{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${Sb(e.transactionHash)}`),this.code=ZQ}}class kb extends ne{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${Sb(e.transactionHash)}`),this.code=UQ}}class kC extends he{constructor(e){var t,i;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${(t=e.blockHash)===null||t===void 0?void 0:t.toString()}, transactionHash: ${(i=e.transactionHash)===null||i===void 0?void 0:i.toString()}`,"Receipt missing or blockHash null"),this.code=LQ}}class PC extends he{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=NQ}}class sd extends ne{constructor(e){super(`Invalid signature. "${e}"`),this.code=XQ}}class Pb extends he{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=DQ}}class TC extends ne{constructor(e,t){const i=[];e.forEach(r=>i.push(r.keyword)),super(`The following properties are invalid for the transaction type ${t}: ${i.join(", ")}`),this.code=zQ}}class fs extends he{constructor(e){super(e,"can not parse as byte data"),this.code=P2}}class od extends he{constructor(e){super(e,"can not parse as number data"),this.code=T2}}class ad extends he{constructor(e){super(e,"invalid ethereum address"),this.code=_2}}class EC extends he{constructor(e){super(e,"not a valid string"),this.code=k2}}class Tb extends he{constructor(e){super(e,"invalid unit"),this.code=E2}}class Eb extends he{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=Z2}}class _C extends he{constructor(e){super(e,"can not be converted to hex"),this.code=Q2}}class _b extends he{constructor(e){super(e,"value greater than the nibble width"),this.code=B2}}class ld extends he{constructor(e){super(e,"not a valid boolean."),this.code=C2}}class QC extends he{constructor(e){super(e,"not a valid unsigned integer."),this.code=I2}}class Qb extends he{constructor(e){super(e,"invalid size given."),this.code=R2}}class Cb extends he{constructor(e){super(e,"value is larger than size."),this.code=$2}}class CC extends he{constructor(e){super(e,"invalid string given"),this.code=M2}}const IC=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&(n.result===void 0||n.result===null)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),Ib=n=>IC(n)?n.error.message:"";class Zn extends ne{constructor(e,t,i,r){var s;super(t!=null?t:`Returned error: ${Array.isArray(e)?e.map(a=>Ib(a)).join(","):Ib(e)}`),this.code=nQ,t||(this.data=Array.isArray(e)?e.map(a=>{var l;return(l=a.error)===null||l===void 0?void 0:l.data}):(s=e==null?void 0:e.error)===null||s===void 0?void 0:s.data),this.statusCode=r,this.request=i;let o;"error"in e?o=e.error:e instanceof Array&&(o=e.filter(a=>a.error).map(a=>a.error)),Array.isArray(o)&&o.length>0?this.cause=new Ho(o):this.cause=o}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class Ac extends Zn{constructor(e,t){super(e,void 0,t),this.code=iQ;let i;"error"in e?i=e.error:e instanceof Array&&(i=e.map(r=>r.error)),Array.isArray(i)?this.cause=new Ho(i):this.cause=i}}class Rb extends ne{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=ub}}class $b extends ne{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=ub}}const Mb="An Rpc error has occured with a code of *code*",gt={[cc]:{message:"Parse error",description:"Invalid JSON"},[hc]:{message:"Invalid request",description:"JSON is not a valid request object	"},[uc]:{message:"Method not found",description:"Method does not exist	"},[fc]:{message:"Invalid params",description:"Invalid method parameters"},[dc]:{message:"Internal error",description:"Internal JSON-RPC error"},[pc]:{message:"Invalid input",description:"Missing or invalid parameters"},[mc]:{message:"Resource not found",description:"Requested resource not found"},[gc]:{message:"Resource unavailable",description:"Requested resource not available"},[Oc]:{message:"Transaction rejected",description:"Transaction creation failed"},[yc]:{message:"Method not supported",description:"Method is not implemented"},[bc]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[vc]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[y2]:{name:"User Rejected Request",message:"The user rejected the request."},[b2]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[v2]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[w2]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[x2]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class Gt extends ne{constructor(e,t){super(t!=null?t:Mb.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class RC extends ne{constructor(e,t){var i,r,s,o;if(!e)super();else if(!((i=gt[e])===null||i===void 0)&&i.message)super(gt[e].message);else{const a=Object.keys(gt).find(l=>typeof l=="string"&&e>=parseInt(l.split("-")[0],10)&&e<=parseInt(l.split("-")[1],10));super((s=(r=gt[a!=null?a:""])===null||r===void 0?void 0:r.message)!==null&&s!==void 0?s:Mb.replace("*code*",(o=e==null?void 0:e.toString())!==null&&o!==void 0?o:'""'))}this.code=e,this.data=t}}class $C extends Gt{constructor(e){super(e,gt[cc].message),this.code=cc}}class MC extends Gt{constructor(e){super(e,gt[hc].message),this.code=hc}}class BC extends Gt{constructor(e){super(e,gt[uc].message),this.code=uc}}class ZC extends Gt{constructor(e){super(e,gt[fc].message),this.code=fc}}class LC extends Gt{constructor(e){super(e,gt[dc].message),this.code=dc}}class NC extends Gt{constructor(e){super(e,gt[pc].message),this.code=pc}}class DC extends Gt{constructor(e){super(e,gt[yc].message),this.code=yc}}class jC extends Gt{constructor(e){super(e,gt[gc].message),this.code=gc}}class qC extends Gt{constructor(e){super(e,gt[mc].message),this.code=mc}}class UC extends Gt{constructor(e){super(e,gt[vc].message),this.code=vc}}class XC extends Gt{constructor(e){super(e,gt[Oc].message),this.code=Oc}}class GC extends Gt{constructor(e){super(e,gt[bc].message),this.code=bc}}const At=new Map;At.set(cc,{error:$C}),At.set(hc,{error:MC}),At.set(uc,{error:BC}),At.set(fc,{error:ZC}),At.set(dc,{error:LC}),At.set(pc,{error:NC}),At.set(yc,{error:DC}),At.set(gc,{error:jC}),At.set(Oc,{error:XC}),At.set(mc,{error:qC}),At.set(vc,{error:UC}),At.set(bc,{error:GC});class FC extends ne{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=N2}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function Bt(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function VC(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function HC(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function ds(n,...e){if(!HC(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}function cd(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bt(n.outputLen),Bt(n.blockLen)}function dr(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function hd(n,e){ds(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Bb={number:Bt,bool:VC,bytes:ds,hash:cd,exists:dr,output:hd},kc=BigInt(Yn(2,32)-1),Zb=BigInt(32);function WC(n,e=!1){return e?{h:Number(n&kc),l:Number(n>>Zb&kc)}:{h:Number(n>>Zb&kc)|0,l:Number(n&kc)|0}}function zC(n,e=!1){let t=new Uint32Array(n.length),i=new Uint32Array(n.length);for(let r=0;r<n.length;r++){const{h:s,l:o}=WC(n[r],e);[t[r],i[r]]=[s,o]}return[t,i]}const YC=(n,e,t)=>n<<t|e>>>32-t,KC=(n,e,t)=>e<<t|n>>>32-t,JC=(n,e,t)=>e<<t-32|n>>>64-t,eI=(n,e,t)=>n<<t-32|e>>>64-t,Pc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tc=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Ec=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ln=(n,e)=>n<<32-e|n>>>e,ve=(n,e)=>n<<e|n>>>32-e>>>0,_c=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,tI=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255;function Qc(n){for(let e=0;e<n.length;e++)n[e]=tI(n[e])}function ps(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ms(n){return typeof n=="string"&&(n=ps(n)),ds(n),n}function Cc(...n){let e=0;for(let i=0;i<n.length;i++){const r=n[i];ds(r),e+=r.length}const t=new Uint8Array(e);for(let i=0,r=0;i<n.length;i++){const s=n[i];t.set(s,r),r+=s.length}return t}class ud{clone(){return this._cloneInto()}}const nI={}.toString;function Lb(n,e){if(e!==void 0&&nI.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function Nb(n){const e=i=>n().update(ms(i)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Db(n=32){if(Pc&&typeof Pc.getRandomValues=="function")return Pc.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const jb=[],qb=[],Ub=[],iI=BigInt(0),zo=BigInt(1),rI=BigInt(2),sI=BigInt(7),oI=BigInt(256),aI=BigInt(113);for(let n=0,e=zo,t=1,i=0;n<24;n++){[t,i]=[i,(2*t+3*i)%5],jb.push(2*(5*i+t)),qb.push((n+1)*(n+2)/2%64);let r=iI;for(let s=0;s<7;s++)e=(e<<zo^(e>>sI)*aI)%oI,e&rI&&(r^=zo<<(zo<<BigInt(s))-zo);Ub.push(r)}const[lI,cI]=zC(Ub,!0),Xb=(n,e,t)=>t>32?JC(n,e,t):YC(n,e,t),Gb=(n,e,t)=>t>32?eI(n,e,t):KC(n,e,t);function hI(n,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,h=t[l],c=t[l+1],u=Xb(h,c,1)^t[a],f=Gb(h,c,1)^t[a+1];for(let d=0;d<50;d+=10)n[o+d]^=u,n[o+d+1]^=f}let r=n[2],s=n[3];for(let o=0;o<24;o++){const a=qb[o],l=Xb(r,s,a),h=Gb(r,s,a),c=jb[o];r=n[c],s=n[c+1],n[c]=l,n[c+1]=h}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=lI[i],n[1]^=cI[i]}t.fill(0)}class fd extends ud{constructor(e,t,i,r=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bt(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Tc(this.state)}keccak(){_c||Qc(this.state32),hI(this.state32,this.rounds),_c||Qc(this.state32),this.posOut=0,this.pos=0}update(e){dr(this);const{blockLen:t,state:i}=this;e=ms(e);const r=e.length;for(let s=0;s<r;){const o=Math.min(t-this.pos,r-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:r}=this;e[i]^=t,t&128&&i===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){dr(this,!1),ds(e),this.finish();const t=this.state,{blockLen:i}=this;for(let r=0,s=e.length;r<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hd(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:r,rounds:s,enableXOF:o}=this;return e||(e=new fd(t,i,r,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Fb=((n,e,t)=>Nb(()=>new fd(e,n,t)))(1,136,256/8),Ic=Bb.bytes;function Vb(n){if(!(n instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof n}`);return new TextDecoder().decode(n)}function uI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function fI(n){return e=>(Bb.bytes(e),n(e))}(()=>{const n=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module!="undefined"&&typeof module.require=="function"&&module.require.bind(module);return{node:e&&!n?e("crypto"):void 0,web:n}})();const kt=(()=>{const n=fI(Fb);return n.create=Fb.create,n})();var ge;(function(n){n.assertEqual=r=>r;function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},n.getValidEnumValues=r=>{const s=n.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return n.objectValues(o)},n.objectValues=r=>n.objectKeys(r).map(function(s){return r[s]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},n.find=(r,s)=>{for(const o of r)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=i,n.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(ge||(ge={}));var dd;(function(n){n.mergeShapes=(e,t)=>Q(Q({},e),t)})(dd||(dd={}));const H=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ni=n=>{switch(typeof n){case"undefined":return H.undefined;case"string":return H.string;case"number":return isNaN(n)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(n)?H.array:n===null?H.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?H.promise:typeof Map!="undefined"&&n instanceof Map?H.map:typeof Set!="undefined"&&n instanceof Set?H.set:typeof Date!="undefined"&&n instanceof Date?H.date:H.object;default:return H.unknown}},Z=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),dI=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Ft extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(t(o));else{let a=i,l=0;for(;l<o.path.length;){const h=o.path[l];l===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(t(o))):a[h]=a[h]||{_errors:[]},a=a[h],l++}}};return r(this),i}static assert(e){if(!(e instanceof Ft))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}Ft.create=n=>new Ft(n);const gs=(n,e)=>{let t;switch(n.code){case Z.invalid_type:n.received===H.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ge.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${ge.joinValues(n.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ge.joinValues(n.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${ge.joinValues(n.options)}, received '${n.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ge.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Z.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Z.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,ge.assertNever(n)}return{message:t}};let Hb=gs;function pI(n){Hb=n}function Rc(){return Hb}const $c=n=>{const{data:e,path:t,errorMaps:i,issueData:r}=n,s=[...t,...r.path||[]],o=J(Q({},r),{path:s});if(r.message!==void 0)return J(Q({},r),{path:s,message:r.message});let a="";const l=i.filter(h=>!!h).slice().reverse();for(const h of l)a=h(o,{data:e,defaultError:a}).message;return J(Q({},r),{path:s,message:a})},mI=[];function U(n,e){const t=Rc(),i=$c({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===gs?void 0:gs].filter(r=>!!r)});n.common.issues.push(i)}class Ot{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const r of t){if(r.status==="aborted")return ie;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static mergeObjectAsync(e,t){return We(this,null,function*(){const i=[];for(const r of t){const s=yield r.key,o=yield r.value;i.push({key:s,value:o})}return Ot.mergeObjectSync(e,i)})}static mergeObjectSync(e,t){const i={};for(const r of t){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return ie;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value!="undefined"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const ie=Object.freeze({status:"aborted"}),Os=n=>({status:"dirty",value:n}),Pt=n=>({status:"valid",value:n}),pd=n=>n.status==="aborted",md=n=>n.status==="dirty",Yo=n=>n.status==="valid",Ko=n=>typeof Promise!="undefined"&&n instanceof Promise;function Mc(n,e,t,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Wb(n,e,t,i,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}typeof SuppressedError=="function"&&SuppressedError;var Y;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Y||(Y={}));var Jo,ea;class Nn{constructor(e,t,i,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zb=(n,e)=>{if(Yo(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ft(n.common.issues);return this._error=t,this._error}}};function le(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:r}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{var l,h;const{message:c}=n;return o.code==="invalid_enum_value"?{message:c!=null?c:a.defaultError}:typeof a.data=="undefined"?{message:(l=c!=null?c:i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(h=c!=null?c:t)!==null&&h!==void 0?h:a.defaultError}},description:r}}class ce{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ni(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ot,ctx:{common:e.parent.common,data:e.data,parsedType:Ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ko(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const r={common:{issues:[],async:(i=t==null?void 0:t.async)!==null&&i!==void 0?i:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ni(e)},s=this._parseSync({data:e,path:r.path,parent:r});return zb(r,s)}parseAsync(e,t){return We(this,null,function*(){const i=yield this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error})}safeParseAsync(e,t){return We(this,null,function*(){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ni(e)},r=this._parse({data:e,path:i.path,parent:i}),s=yield Ko(r)?r:Promise.resolve(r);return zb(i,s)})}refine(e,t){const i=r=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue(Q({code:Z.custom},i(r)));return typeof Promise!="undefined"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof t=="function"?t(i,r):t),!1))}_refinement(e){return new gn({schema:this,typeName:te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return jn.create(this,this._def)}nullable(){return Ui.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mn.create(this,this._def)}promise(){return ws.create(this,this._def)}or(e){return ra.create([this,e],this._def)}and(e){return sa.create(this,e,this._def)}transform(e){return new gn(J(Q({},le(this._def)),{schema:this,typeName:te.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t=typeof e=="function"?e:()=>e;return new ha(J(Q({},le(this._def)),{innerType:this,defaultValue:t,typeName:te.ZodDefault}))}brand(){return new yd(Q({typeName:te.ZodBranded,type:this},le(this._def)))}catch(e){const t=typeof e=="function"?e:()=>e;return new ua(J(Q({},le(this._def)),{innerType:this,catchValue:t,typeName:te.ZodCatch}))}describe(e){const t=this.constructor;return new t(J(Q({},this._def),{description:e}))}pipe(e){return fa.create(this,e)}readonly(){return da.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gI=/^c[^\s-]{8,}$/i,OI=/^[0-9a-z]+$/,yI=/^[0-9A-HJKMNP-TV-Z]{26}$/,bI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vI=/^[a-z0-9_-]{21}$/i,wI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,SI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gd;const AI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kI=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,PI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",TI=new RegExp(`^${Yb}$`);function Kb(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function EI(n){return new RegExp(`^${Kb(n)}$`)}function Jb(n){let e=`${Yb}T${Kb(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function _I(n,e){return!!((e==="v4"||!e)&&AI.test(n)||(e==="v6"||!e)&&kI.test(n))}class pn extends ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const s=this._getOrReturnCtx(e);return U(s,{code:Z.invalid_type,expected:H.string,received:s.parsedType}),ie}const i=new Ot;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),U(r,{code:Z.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),U(r,{code:Z.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?U(r,{code:Z.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&U(r,{code:Z.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")xI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"email",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")gd||(gd=new RegExp(SI,"u")),gd.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"emoji",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")bI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"uuid",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")vI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"nanoid",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")gI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"cuid",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")OI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"cuid2",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")yI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"ulid",code:Z.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch(o){r=this._getOrReturnCtx(e,r),U(r,{validation:"url",code:Z.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"regex",code:Z.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?Jb(s).test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?TI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?EI(s).test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{code:Z.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?wI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"duration",code:Z.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?_I(e.data,s.version)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"ip",code:Z.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?PI.test(e.data)||(r=this._getOrReturnCtx(e,r),U(r,{validation:"base64",code:Z.invalid_string,message:s.message}),i.dirty()):ge.assertNever(s);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(r=>e.test(r),Q({validation:t,code:Z.invalid_string},Y.errToObj(i)))}_addCheck(e){return new pn(J(Q({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(Q({kind:"email"},Y.errToObj(e)))}url(e){return this._addCheck(Q({kind:"url"},Y.errToObj(e)))}emoji(e){return this._addCheck(Q({kind:"emoji"},Y.errToObj(e)))}uuid(e){return this._addCheck(Q({kind:"uuid"},Y.errToObj(e)))}nanoid(e){return this._addCheck(Q({kind:"nanoid"},Y.errToObj(e)))}cuid(e){return this._addCheck(Q({kind:"cuid"},Y.errToObj(e)))}cuid2(e){return this._addCheck(Q({kind:"cuid2"},Y.errToObj(e)))}ulid(e){return this._addCheck(Q({kind:"ulid"},Y.errToObj(e)))}base64(e){return this._addCheck(Q({kind:"base64"},Y.errToObj(e)))}ip(e){return this._addCheck(Q({kind:"ip"},Y.errToObj(e)))}datetime(e){var t,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(Q({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1},Y.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(Q({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},Y.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(Q({kind:"duration"},Y.errToObj(e)))}regex(e,t){return this._addCheck(Q({kind:"regex",regex:e},Y.errToObj(t)))}includes(e,t){return this._addCheck(Q({kind:"includes",value:e,position:t==null?void 0:t.position},Y.errToObj(t==null?void 0:t.message)))}startsWith(e,t){return this._addCheck(Q({kind:"startsWith",value:e},Y.errToObj(t)))}endsWith(e,t){return this._addCheck(Q({kind:"endsWith",value:e},Y.errToObj(t)))}min(e,t){return this._addCheck(Q({kind:"min",value:e},Y.errToObj(t)))}max(e,t){return this._addCheck(Q({kind:"max",value:e},Y.errToObj(t)))}length(e,t){return this._addCheck(Q({kind:"length",value:e},Y.errToObj(t)))}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new pn(J(Q({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new pn(J(Q({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new pn(J(Q({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}pn.create=n=>{var e;return new pn(Q({checks:[],typeName:te.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1},le(n)))};function QI(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=t>i?t:i,s=parseInt(n.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class Di extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const s=this._getOrReturnCtx(e);return U(s,{code:Z.invalid_type,expected:H.number,received:s.parsedType}),ie}let i;const r=new Ot;for(const s of this._def.checks)s.kind==="int"?ge.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),U(i,{code:Z.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?QI(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),U(i,{code:Z.not_finite,message:s.message}),r.dirty()):ge.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,i,r){return new Di(J(Q({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Y.toString(r)}]}))}_addCheck(e){return new Di(J(Q({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ge.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Di.create=n=>new Di(Q({checks:[],typeName:te.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1},le(n)));class ji extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==H.bigint){const s=this._getOrReturnCtx(e);return U(s,{code:Z.invalid_type,expected:H.bigint,received:s.parsedType}),ie}let i;const r=new Ot;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),U(i,{code:Z.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):ge.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,i,r){return new ji(J(Q({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:Y.toString(r)}]}))}_addCheck(e){return new ji(J(Q({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ji.create=n=>{var e;return new ji(Q({checks:[],typeName:te.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1},le(n)))};class ta extends ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.boolean,received:i.parsedType}),ie}return Pt(e.data)}}ta.create=n=>new ta(Q({typeName:te.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1},le(n)));class pr extends ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const s=this._getOrReturnCtx(e);return U(s,{code:Z.invalid_type,expected:H.date,received:s.parsedType}),ie}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return U(s,{code:Z.invalid_date}),ie}const i=new Ot;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),U(r,{code:Z.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),U(r,{code:Z.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):ge.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pr(J(Q({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}pr.create=n=>new pr(Q({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:te.ZodDate},le(n)));class Bc extends ce{_parse(e){if(this._getType(e)!==H.symbol){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.symbol,received:i.parsedType}),ie}return Pt(e.data)}}Bc.create=n=>new Bc(Q({typeName:te.ZodSymbol},le(n)));class na extends ce{_parse(e){if(this._getType(e)!==H.undefined){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.undefined,received:i.parsedType}),ie}return Pt(e.data)}}na.create=n=>new na(Q({typeName:te.ZodUndefined},le(n)));class ia extends ce{_parse(e){if(this._getType(e)!==H.null){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.null,received:i.parsedType}),ie}return Pt(e.data)}}ia.create=n=>new ia(Q({typeName:te.ZodNull},le(n)));class ys extends ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Pt(e.data)}}ys.create=n=>new ys(Q({typeName:te.ZodAny},le(n)));class mr extends ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pt(e.data)}}mr.create=n=>new mr(Q({typeName:te.ZodUnknown},le(n)));class oi extends ce{_parse(e){const t=this._getOrReturnCtx(e);return U(t,{code:Z.invalid_type,expected:H.never,received:t.parsedType}),ie}}oi.create=n=>new oi(Q({typeName:te.ZodNever},le(n)));class Zc extends ce{_parse(e){if(this._getType(e)!==H.undefined){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.void,received:i.parsedType}),ie}return Pt(e.data)}}Zc.create=n=>new Zc(Q({typeName:te.ZodVoid},le(n)));class mn extends ce{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),r=this._def;if(t.parsedType!==H.array)return U(t,{code:Z.invalid_type,expected:H.array,received:t.parsedType}),ie;if(r.exactLength!==null){const o=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(o||a)&&(U(t,{code:o?Z.too_big:Z.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(U(t,{code:Z.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(U(t,{code:Z.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>r.type._parseAsync(new Nn(t,o,t.path,a)))).then(o=>Ot.mergeArray(i,o));const s=[...t.data].map((o,a)=>r.type._parseSync(new Nn(t,o,t.path,a)));return Ot.mergeArray(i,s)}get element(){return this._def.type}min(e,t){return new mn(J(Q({},this._def),{minLength:{value:e,message:Y.toString(t)}}))}max(e,t){return new mn(J(Q({},this._def),{maxLength:{value:e,message:Y.toString(t)}}))}length(e,t){return new mn(J(Q({},this._def),{exactLength:{value:e,message:Y.toString(t)}}))}nonempty(e){return this.min(1,e)}}mn.create=(n,e)=>new mn(Q({type:n,minLength:null,maxLength:null,exactLength:null,typeName:te.ZodArray},le(e)));function bs(n){if(n instanceof De){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=jn.create(bs(i))}return new De(J(Q({},n._def),{shape:()=>e}))}else return n instanceof mn?new mn(J(Q({},n._def),{type:bs(n.element)})):n instanceof jn?jn.create(bs(n.unwrap())):n instanceof Ui?Ui.create(bs(n.unwrap())):n instanceof Dn?Dn.create(n.items.map(e=>bs(e))):n}class De extends ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ge.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==H.object){const h=this._getOrReturnCtx(e);return U(h,{code:Z.invalid_type,expected:H.object,received:h.parsedType}),ie}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof oi&&this._def.unknownKeys==="strip"))for(const h in r.data)o.includes(h)||a.push(h);const l=[];for(const h of o){const c=s[h],u=r.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Nn(r,u,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof oi){const h=this._def.unknownKeys;if(h==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(h==="strict")a.length>0&&(U(r,{code:Z.unrecognized_keys,keys:a}),i.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const c of a){const u=r.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Nn(r,u,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(()=>We(this,null,function*(){const h=[];for(const c of l){const u=yield c.key,f=yield c.value;h.push({key:u,value:f,alwaysSet:c.alwaysSet})}return h})).then(h=>Ot.mergeObjectSync(i,h)):Ot.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new De(Q(J(Q({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(t,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,t,i).message)!==null&&o!==void 0?o:i.defaultError;return t.code==="unrecognized_keys"?{message:(a=Y.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}))}strip(){return new De(J(Q({},this._def),{unknownKeys:"strip"}))}passthrough(){return new De(J(Q({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new De(J(Q({},this._def),{shape:()=>Q(Q({},this._def.shape()),e)}))}merge(e){return new De({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Q(Q({},this._def.shape()),e._def.shape()),typeName:te.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new De(J(Q({},this._def),{catchall:e}))}pick(e){const t={};return ge.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])}),new De(J(Q({},this._def),{shape:()=>t}))}omit(e){const t={};return ge.objectKeys(this.shape).forEach(i=>{e[i]||(t[i]=this.shape[i])}),new De(J(Q({},this._def),{shape:()=>t}))}deepPartial(){return bs(this)}partial(e){const t={};return ge.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?t[i]=r:t[i]=r.optional()}),new De(J(Q({},this._def),{shape:()=>t}))}required(e){const t={};return ge.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])t[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof jn;)s=s._def.innerType;t[i]=s}}),new De(J(Q({},this._def),{shape:()=>t}))}keyof(){return ev(ge.objectKeys(this.shape))}}De.create=(n,e)=>new De(Q({shape:()=>n,unknownKeys:"strip",catchall:oi.create(),typeName:te.ZodObject},le(e))),De.strictCreate=(n,e)=>new De(Q({shape:()=>n,unknownKeys:"strict",catchall:oi.create(),typeName:te.ZodObject},le(e))),De.lazycreate=(n,e)=>new De(Q({shape:n,unknownKeys:"strip",catchall:oi.create(),typeName:te.ZodObject},le(e)));class ra extends ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ft(a.ctx.common.issues));return U(t,{code:Z.invalid_union,unionErrors:o}),ie}if(t.common.async)return Promise.all(i.map(s=>We(this,null,function*(){const o=J(Q({},t),{common:J(Q({},t.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}}))).then(r);{let s;const o=[];for(const l of i){const h=J(Q({},t),{common:J(Q({},t.common),{issues:[]}),parent:null}),c=l._parseSync({data:t.data,path:t.path,parent:h});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ft(l));return U(t,{code:Z.invalid_union,unionErrors:a}),ie}}get options(){return this._def.options}}ra.create=(n,e)=>new ra(Q({options:n,typeName:te.ZodUnion},le(e)));const ai=n=>n instanceof aa?ai(n.schema):n instanceof gn?ai(n.innerType()):n instanceof la?[n.value]:n instanceof qi?n.options:n instanceof ca?ge.objectValues(n.enum):n instanceof ha?ai(n._def.innerType):n instanceof na?[void 0]:n instanceof ia?[null]:n instanceof jn?[void 0,...ai(n.unwrap())]:n instanceof Ui?[null,...ai(n.unwrap())]:n instanceof yd||n instanceof da?ai(n.unwrap()):n instanceof ua?ai(n._def.innerType):[];class Lc extends ce{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.object)return U(t,{code:Z.invalid_type,expected:H.object,received:t.parsedType}),ie;const i=this.discriminator,r=t.data[i],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(U(t,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),ie)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const r=new Map;for(const s of t){const o=ai(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new Lc(Q({typeName:te.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r},le(i)))}}function Od(n,e){const t=Ni(n),i=Ni(e);if(n===e)return{valid:!0,data:n};if(t===H.object&&i===H.object){const r=ge.objectKeys(e),s=ge.objectKeys(n).filter(a=>r.indexOf(a)!==-1),o=Q(Q({},n),e);for(const a of s){const l=Od(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===H.array&&i===H.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=Od(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return t===H.date&&i===H.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class sa extends ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(pd(s)||pd(o))return ie;const a=Od(s.value,o.value);return a.valid?((md(s)||md(o))&&t.dirty(),{status:t.value,value:a.data}):(U(i,{code:Z.invalid_intersection_types}),ie)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}sa.create=(n,e,t)=>new sa(Q({left:n,right:e,typeName:te.ZodIntersection},le(t)));class Dn extends ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.array)return U(i,{code:Z.invalid_type,expected:H.array,received:i.parsedType}),ie;if(i.data.length<this._def.items.length)return U(i,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ie;!this._def.rest&&i.data.length>this._def.items.length&&(U(i,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Nn(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Ot.mergeArray(t,o)):Ot.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Dn(J(Q({},this._def),{rest:e}))}}Dn.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dn(Q({items:n,typeName:te.ZodTuple,rest:null},le(e)))};class oa extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.object)return U(i,{code:Z.invalid_type,expected:H.object,received:i.parsedType}),ie;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new Nn(i,a,i.path,a)),value:o._parse(new Nn(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?Ot.mergeObjectAsync(t,r):Ot.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof ce?new oa(Q({keyType:e,valueType:t,typeName:te.ZodRecord},le(i))):new oa(Q({keyType:pn.create(),valueType:e,typeName:te.ZodRecord},le(t)))}}class Nc extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.map)return U(i,{code:Z.invalid_type,expected:H.map,received:i.parsedType}),ie;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],h)=>({key:r._parse(new Nn(i,a,i.path,[h,"key"])),value:s._parse(new Nn(i,l,i.path,[h,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(()=>We(this,null,function*(){for(const l of o){const h=yield l.key,c=yield l.value;if(h.status==="aborted"||c.status==="aborted")return ie;(h.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(h.value,c.value)}return{status:t.value,value:a}}))}else{const a=new Map;for(const l of o){const h=l.key,c=l.value;if(h.status==="aborted"||c.status==="aborted")return ie;(h.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(h.value,c.value)}return{status:t.value,value:a}}}}Nc.create=(n,e,t)=>new Nc(Q({valueType:e,keyType:n,typeName:te.ZodMap},le(t)));class gr extends ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==H.set)return U(i,{code:Z.invalid_type,expected:H.set,received:i.parsedType}),ie;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(U(i,{code:Z.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(U(i,{code:Z.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const h=new Set;for(const c of l){if(c.status==="aborted")return ie;c.status==="dirty"&&t.dirty(),h.add(c.value)}return{status:t.value,value:h}}const a=[...i.data.values()].map((l,h)=>s._parse(new Nn(i,l,i.path,h)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new gr(J(Q({},this._def),{minSize:{value:e,message:Y.toString(t)}}))}max(e,t){return new gr(J(Q({},this._def),{maxSize:{value:e,message:Y.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}gr.create=(n,e)=>new gr(Q({valueType:n,minSize:null,maxSize:null,typeName:te.ZodSet},le(e)));class vs extends ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.function)return U(t,{code:Z.invalid_type,expected:H.function,received:t.parsedType}),ie;function i(a,l){return $c({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rc(),gs].filter(h=>!!h),issueData:{code:Z.invalid_arguments,argumentsError:l}})}function r(a,l){return $c({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rc(),gs].filter(h=>!!h),issueData:{code:Z.invalid_return_type,returnTypeError:l}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ws){const a=this;return Pt(function(...l){return We(this,null,function*(){const h=new Ft([]),c=yield a._def.args.parseAsync(l,s).catch(d=>{throw h.addIssue(i(l,d)),h}),u=yield Reflect.apply(o,this,c);return yield a._def.returns._def.type.parseAsync(u,s).catch(d=>{throw h.addIssue(r(u,d)),h})})})}else{const a=this;return Pt(function(...l){const h=a._def.args.safeParse(l,s);if(!h.success)throw new Ft([i(l,h.error)]);const c=Reflect.apply(o,this,h.data),u=a._def.returns.safeParse(c,s);if(!u.success)throw new Ft([r(c,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vs(J(Q({},this._def),{args:Dn.create(e).rest(mr.create())}))}returns(e){return new vs(J(Q({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new vs(Q({args:e||Dn.create([]).rest(mr.create()),returns:t||mr.create(),typeName:te.ZodFunction},le(i)))}}class aa extends ce{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}aa.create=(n,e)=>new aa(Q({getter:n,typeName:te.ZodLazy},le(e)));class la extends ce{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return U(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),ie}return{status:"valid",value:e.data}}get value(){return this._def.value}}la.create=(n,e)=>new la(Q({value:n,typeName:te.ZodLiteral},le(e)));function ev(n,e){return new qi(Q({values:n,typeName:te.ZodEnum},le(e)))}class qi extends ce{constructor(){super(...arguments),Jo.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return U(t,{expected:ge.joinValues(i),received:t.parsedType,code:Z.invalid_type}),ie}if(Mc(this,Jo)||Wb(this,Jo,new Set(this._def.values)),!Mc(this,Jo).has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return U(t,{received:t.data,code:Z.invalid_enum_value,options:i}),ie}return Pt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return qi.create(e,Q(Q({},this._def),t))}exclude(e,t=this._def){return qi.create(this.options.filter(i=>!e.includes(i)),Q(Q({},this._def),t))}}Jo=new WeakMap,qi.create=ev;class ca extends ce{constructor(){super(...arguments),ea.set(this,void 0)}_parse(e){const t=ge.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==H.string&&i.parsedType!==H.number){const r=ge.objectValues(t);return U(i,{expected:ge.joinValues(r),received:i.parsedType,code:Z.invalid_type}),ie}if(Mc(this,ea)||Wb(this,ea,new Set(ge.getValidEnumValues(this._def.values))),!Mc(this,ea).has(e.data)){const r=ge.objectValues(t);return U(i,{received:i.data,code:Z.invalid_enum_value,options:r}),ie}return Pt(e.data)}get enum(){return this._def.values}}ea=new WeakMap,ca.create=(n,e)=>new ca(Q({values:n,typeName:te.ZodNativeEnum},le(e)));class ws extends ce{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==H.promise&&t.common.async===!1)return U(t,{code:Z.invalid_type,expected:H.promise,received:t.parsedType}),ie;const i=t.parsedType===H.promise?t.data:Promise.resolve(t.data);return Pt(i.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ws.create=(n,e)=>new ws(Q({type:n,typeName:te.ZodPromise},le(e)));class gn extends ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{U(i,o),o.fatal?t.abort():t.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(a=>We(this,null,function*(){if(t.value==="aborted")return ie;const l=yield this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?ie:l.status==="dirty"||t.value==="dirty"?Os(l.value):l}));{if(t.value==="aborted")return ie;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?ie:a.status==="dirty"||t.value==="dirty"?Os(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Yo(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Yo(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);ge.assertNever(r)}}gn.create=(n,e,t)=>new gn(Q({schema:n,typeName:te.ZodEffects,effect:e},le(t))),gn.createWithPreprocess=(n,e,t)=>new gn(Q({schema:e,effect:{type:"preprocess",transform:n},typeName:te.ZodEffects},le(t)));class jn extends ce{_parse(e){return this._getType(e)===H.undefined?Pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jn.create=(n,e)=>new jn(Q({innerType:n,typeName:te.ZodOptional},le(e)));class Ui extends ce{_parse(e){return this._getType(e)===H.null?Pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ui.create=(n,e)=>new Ui(Q({innerType:n,typeName:te.ZodNullable},le(e)));class ha extends ce{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===H.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ha.create=(n,e)=>new ha(Q({innerType:n,typeName:te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},le(e)));class ua extends ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=J(Q({},t),{common:J(Q({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:i.data,path:i.path,parent:Q({},i)});return Ko(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ft(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ft(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ua.create=(n,e)=>new ua(Q({innerType:n,typeName:te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},le(e)));class Dc extends ce{_parse(e){if(this._getType(e)!==H.nan){const i=this._getOrReturnCtx(e);return U(i,{code:Z.invalid_type,expected:H.nan,received:i.parsedType}),ie}return{status:"valid",value:e.data}}}Dc.create=n=>new Dc(Q({typeName:te.ZodNaN},le(n)));const CI=Symbol("zod_brand");class yd extends ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class fa extends ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return We(this,null,function*(){const s=yield this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?ie:s.status==="dirty"?(t.dirty(),Os(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})});{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?ie:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,t){return new fa({in:e,out:t,typeName:te.ZodPipeline})}}class da extends ce{_parse(e){const t=this._def.innerType._parse(e),i=r=>(Yo(r)&&(r.value=Object.freeze(r.value)),r);return Ko(t)?t.then(r=>i(r)):i(t)}unwrap(){return this._def.innerType}}da.create=(n,e)=>new da(Q({innerType:n,typeName:te.ZodReadonly},le(e)));function tv(n,e={},t){return n?ys.create().superRefine((i,r)=>{var s,o;if(!n(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,h=typeof a=="string"?{message:a}:a;r.addIssue(J(Q({code:"custom"},h),{fatal:l}))}}):ys.create()}const II={object:De.lazycreate};var te;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(te||(te={}));const RI=(n,e={message:`Input not instance of ${n.name}`})=>tv(t=>t instanceof n,e),nv=pn.create,iv=Di.create,$I=Dc.create,MI=ji.create,rv=ta.create,BI=pr.create,ZI=Bc.create,LI=na.create,NI=ia.create,DI=ys.create,jI=mr.create,qI=oi.create,UI=Zc.create,XI=mn.create,GI=De.create,FI=De.strictCreate,VI=ra.create,HI=Lc.create,WI=sa.create,zI=Dn.create,YI=oa.create,KI=Nc.create,JI=gr.create,eR=vs.create,tR=aa.create,nR=la.create,iR=qi.create,rR=ca.create,sR=ws.create,sv=gn.create,oR=jn.create,aR=Ui.create,lR=gn.createWithPreprocess,cR=fa.create;var qn=Object.freeze({__proto__:null,defaultErrorMap:gs,setErrorMap:pI,getErrorMap:Rc,makeIssue:$c,EMPTY_PATH:mI,addIssueToContext:U,ParseStatus:Ot,INVALID:ie,DIRTY:Os,OK:Pt,isAborted:pd,isDirty:md,isValid:Yo,isAsync:Ko,get util(){return ge},get objectUtil(){return dd},ZodParsedType:H,getParsedType:Ni,ZodType:ce,datetimeRegex:Jb,ZodString:pn,ZodNumber:Di,ZodBigInt:ji,ZodBoolean:ta,ZodDate:pr,ZodSymbol:Bc,ZodUndefined:na,ZodNull:ia,ZodAny:ys,ZodUnknown:mr,ZodNever:oi,ZodVoid:Zc,ZodArray:mn,ZodObject:De,ZodUnion:ra,ZodDiscriminatedUnion:Lc,ZodIntersection:sa,ZodTuple:Dn,ZodRecord:oa,ZodMap:Nc,ZodSet:gr,ZodFunction:vs,ZodLazy:aa,ZodLiteral:la,ZodEnum:qi,ZodNativeEnum:ca,ZodPromise:ws,ZodEffects:gn,ZodTransformer:gn,ZodOptional:jn,ZodNullable:Ui,ZodDefault:ha,ZodCatch:ua,ZodNaN:Dc,BRAND:CI,ZodBranded:yd,ZodPipeline:fa,ZodReadonly:da,custom:tv,Schema:ce,ZodSchema:ce,late:II,get ZodFirstPartyTypeKind(){return te},coerce:{string:n=>pn.create(J(Q({},n),{coerce:!0})),number:n=>Di.create(J(Q({},n),{coerce:!0})),boolean:n=>ta.create(J(Q({},n),{coerce:!0})),bigint:n=>ji.create(J(Q({},n),{coerce:!0})),date:n=>pr.create(J(Q({},n),{coerce:!0}))},any:DI,array:XI,bigint:MI,boolean:rv,date:BI,discriminatedUnion:HI,effect:sv,enum:iR,function:eR,instanceof:RI,intersection:WI,lazy:tR,literal:nR,map:KI,nan:$I,nativeEnum:rR,never:qI,null:NI,nullable:aR,number:iv,object:GI,oboolean:()=>rv().optional(),onumber:()=>iv().optional(),optional:oR,ostring:()=>nv().optional(),pipeline:cR,preprocess:lR,promise:sR,record:YI,set:JI,strictObject:FI,string:nv,symbol:ZI,transformer:sv,tuple:zI,undefined:LI,union:VI,unknown:jI,void:UI,NEVER:ie,ZodIssueCode:Z,quotelessJson:dI,ZodError:Ft});const hR=n=>n.message?n.message:"unspecified error";class xs extends ne{constructor(e){super(),this.code=L2,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:
${this._compileErrors().join(`
`)}`}_compileErrors(){return this.errors.map(hR)}}const uR=["bool","int","uint","bytes","string","address","tuple"],ov=n=>typeof n=="object"&&"type"in n&&"name"in n,bd=n=>typeof n=="string",Se=n=>typeof n=="string"&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(n);function av(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/))}const jc=n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(n);function vd(n){if(typeof n!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof n}`);return n.startsWith("0x")}const wd=function(n){for(const[e,t]of Object.entries(n))if(t!==void 0&&t.length>0&&t[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${t.toString()}`)},fR=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],Or=n=>{let e=n.replace(/ /,""),t,i=!1,r=[];if(n.includes("[")&&(e=e.slice(0,e.indexOf("[")),r=[...n.matchAll(/(?:\[(\d*)\])/g)].map(s=>parseInt(s[1],10)).map(s=>Number.isNaN(s)?-1:s),i=r.length>0),uR.includes(e))return{baseType:e,isArray:i,baseTypeSize:t,arraySizes:r};if(e.startsWith("int"))t=parseInt(e.substring(3),10),e="int";else if(e.startsWith("uint"))t=parseInt(n.substring(4),10),e="uint";else if(e.startsWith("bytes"))t=parseInt(e.substring(5),10),e="bytes";else return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:r};return{baseType:e,isArray:i,baseTypeSize:t,arraySizes:r}},xd=(n,e={})=>{if(Object.keys(e).includes("type"))throw new xs([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:n},instancePath:"",schemaPath:""}]);const{baseType:i,baseTypeSize:r}=Or(n);if(!i&&!fR.includes(n))throw new xs([{keyword:"eth",message:`Eth data type "${n}" is not valid`,params:{eth:n},instancePath:"",schemaPath:""}]);if(i){if(i==="tuple")throw new Error('"tuple" type is not implemented directly.');return{format:`${i}${r!=null?r:""}`,required:!0}}return n?{format:n,required:!0}:{}},qc=(n,e="/0")=>{const t={type:"array",items:[],maxItems:n.length,minItems:n.length};for(const[i,r]of n.entries()){let s,o,a=[];ov(r)?(s=r.type,o=r.name||`${e}/${i}`,a=r.components):typeof r=="string"?(s=r,o=`${e}/${i}`):Array.isArray(r)&&(r[0]&&typeof r[0]=="string"&&r[0].startsWith("tuple")&&!Array.isArray(r[0])&&r[1]&&Array.isArray(r[1])?(s=r[0],o=`${e}/${i}`,a=r[1]):(s="tuple",o=`${e}/${i}`,a=r));const{baseType:l,isArray:h,arraySizes:c}=Or(s);let u,f=t;for(let d=c.length-1;d>0;d-=1)u={type:"array",$id:o,items:[],maxItems:c[d],minItems:c[d]},c[d]<0&&(delete u.maxItems,delete u.minItems),Array.isArray(f.items)?f.items.length===0?f.items=[u]:f.items.push(u):f.items=[f.items,u],f=u;if(l==="tuple"&&!h){const d=qc(a,o);d.$id=o,f.items.push(d)}else if(l==="tuple"&&h){const d=c[0],p=Object.assign({type:"array",$id:o,items:qc(a,o)},d>=0&&{minItems:d,maxItems:d});f.items.push(p)}else if(h){const d=c[0],p=Object.assign({type:"array",$id:o,items:xd(s)},d>=0&&{minItems:d,maxItems:d});f.items.push(p)}else Array.isArray(f.items)?f.items.push(Object.assign({$id:o},xd(s))):f.items.push(Object.assign({$id:o},xd(s)));f=t}return t},Sd=n=>qc(n),Ad=(n,e)=>e===1?n:Ad(n[0],e-1),pa=(n,e,t)=>{const i=[];for(const[r,s]of n.entries()){let o,a,l=[];ov(s)?(o=s.type,a=s.name,l=s.components):typeof s=="string"?o=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(o=s[0],l=s[1]):(o="tuple",l=s));const{baseType:h,isArray:c,arraySizes:u}=Or(o),f=Array.isArray(e)?e[r]:e[a];if(h==="tuple"&&!c)i.push(pa(l,f,t));else if(h==="tuple"&&c){const d=[];for(const p of f)if(u.length>1){const m=Ad(p,u.length-1),g=[];for(const O of m)g.push(pa(l,O,t));d.push(g)}else d.push(pa(l,p,t));i.push(d)}else i.push(f)}return t=t!=null?t:[],t.push(...i),t},lv=n=>{if(n>=48&&n<=57)return n-48;if(n>=65&&n<=70)return n-55;if(n>=97&&n<=102)return n-87;throw new Error(`Invalid code point: ${n}`)},Uc=n=>{if(!Se(n))throw new Error("Invalid hex string");const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],i=BigInt(t);return i>Number.MAX_SAFE_INTEGER?e?-i:i:i<Number.MIN_SAFE_INTEGER?i:e?-1*Number(i):Number(i)},Xc=n=>{if((typeof n=="number"||typeof n=="bigint")&&n<0)return`-0x${n.toString(16).slice(1)}`;if((typeof n=="number"||typeof n=="bigint")&&n>=0)return`0x${n.toString(16)}`;if(typeof n=="string"&&Se(n)){const[e,t]=n.startsWith("-")?[!0,n.slice(1)]:[!1,n],i=t.split(/^(-)?0(x|X)/).slice(-1)[0];return`${e?"-":""}0x${i.replace(/^0+/,"").toLowerCase()}`}if(typeof n=="string"&&!Se(n))return Xc(BigInt(n));throw new od(n)},Gc=(n,e,t="0")=>{if(typeof n=="string"&&!Se(n))return n.padStart(e,t);const i=typeof n=="string"&&Se(n)?n:Xc(n),[r,s]=i.startsWith("-")?["-0x",i.slice(3)]:["0x",i.slice(2)];return`${r}${s.padStart(e,t)}`};function li(n){let e="0x";for(const t of n){const i=t.toString(16);e+=i.length===1?`0${i}`:i}return e}const ci={zero:48,nine:57,A:65,F:70,a:97,f:102};function cv(n){if(n>=ci.zero&&n<=ci.nine)return n-ci.zero;if(n>=ci.A&&n<=ci.F)return n-(ci.A-10);if(n>=ci.a&&n<=ci.f)return n-(ci.a-10)}function yr(n){let e=0;if(n.startsWith("0")&&(n[1]==="x"||n[1]==="X")&&(e=2),n.length%2!==0)throw new fs(`hex string has odd length: ${n}`);const t=(n.length-e)/2,i=new Uint8Array(t);for(let r=0,s=e;r<t;r+=1){const o=cv(n.charCodeAt(s++)),a=cv(n.charCodeAt(s++));if(o===void 0||a===void 0)throw new fs(`Invalid byte sequence ("${n[s-2]}${n[s-1]}" in "${n}").`);i[r]=o*16+a}return i}function Fc(n){var e;return!(n instanceof Uint8Array)&&((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"?Uint8Array.from(n):n}const hv=Object.freeze(Object.defineProperty({__proto__:null,abiSchemaToJsonSchema:qc,codePointToInt:lv,ensureIfUint8Array:Fc,ethAbiToJsonSchema:Sd,fetchArrayElement:Ad,hexToNumber:Uc,hexToUint8Array:yr,numberToHex:Xc,padLeft:Gc,parseBaseType:Or,transformJsonDataToAbiFormat:pa,uint8ArrayToHexString:li},Symbol.toStringTag,{value:"Module"})),kd=n=>{var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"},Xi=(n,e={abiType:"bytes"})=>{if(typeof n!="string"&&!Array.isArray(n)&&!kd(n)||typeof n=="string"&&Se(n)&&n.startsWith("-")||typeof n=="string"&&!Se(n))return!1;let t;if(typeof n=="string"){if(n.length%2!==0)return!1;t=yr(n)}else if(Array.isArray(n)){if(n.some(i=>i<0||i>255||!Number.isInteger(i)))return!1;t=new Uint8Array(n)}else t=n;if(e!=null&&e.abiType){const{baseTypeSize:i}=Or(e.abiType);return i?t.length===i:!0}return e!=null&&e.size?t.length===(e==null?void 0:e.size):!0},uv=n=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(n))return!1;const e=n.slice(2),t=ps(e.toLowerCase()),i=li(kt(Fc(t))).slice(2);for(let r=0;r<40;r+=1)if(parseInt(i[r],16)>7&&e[r].toUpperCase()!==e[r]||parseInt(i[r],16)<=7&&e[r].toLowerCase()!==e[r])return!1;return!0},Vt=(n,e=!0)=>{if(typeof n!="string"&&!kd(n))return!1;let t;return kd(n)?t=li(n):typeof n=="string"&&!Se(n)?t=n.toLowerCase().startsWith("0x")?n:`0x${n}`:t=n,/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x|0X)?[0-9a-f]{40}$/.test(t)||/^(0x|0X)?[0-9A-F]{40}$/.test(t)?!0:e?uv(t):!0:!1},br=(n,e)=>{if(e===BigInt(0))return BigInt(1);let t=n;for(let i=1;i<e;i+=1)t*=n;return t},hi=(n,e={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="string"&&n.length===0)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:r}=Or(e.abiType);r&&(t=r)}else e.bitSize&&(t=e.bitSize);const i=br(BigInt(2),BigInt(t!=null?t:256))-BigInt(1);try{const r=typeof n=="string"&&Se(n)?BigInt(Uc(n)):BigInt(n);return r>=0&&r<=i}catch(r){return!1}},ma=(n,e={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof n)||typeof n=="number"&&n>Number.MAX_SAFE_INTEGER)return!1;let t;if(e!=null&&e.abiType){const{baseTypeSize:s,baseType:o}=Or(e.abiType);if(o!=="int")return!1;s&&(t=s)}else e.bitSize&&(t=e.bitSize);const i=br(BigInt(2),BigInt((t!=null?t:256)-1)),r=BigInt(-1)*br(BigInt(2),BigInt((t!=null?t:256)-1));try{const s=typeof n=="string"&&Se(n)?BigInt(Uc(n)):BigInt(n);return s>=r&&s<=i}catch(s){return!1}},fv=n=>!!(ma(n)||typeof n=="string"&&/[0-9.]/.test(n)&&n.indexOf(".")===n.lastIndexOf(".")||typeof n=="number"),dv=n=>hi(n),rt=n=>Object.values(ii).includes(n),Pd=n=>rt(n)||dv(n),Ss=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{512}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{512}$/.test(n)||/^(0x)?[0-9A-F]{512}$/.test(n)),Vc=(n,e)=>{if(typeof e=="string"&&!Se(e)||!Ss(n))return!1;const t=typeof e=="string"?yr(e):e,i=li(kt(t)).slice(2);for(let r=0;r<12;r+=4){const s=(parseInt(i.slice(r,r+2),16)<<8)+parseInt(i.slice(r+2,r+4),16)&2047,o=lv(n.charCodeAt(n.length-1-Math.floor(s/4))),a=1<<s%4;if((o&a)!==a)return!1}return!0},dR=(n,e)=>{if(!Ss(n)||!Vt(e))return!1;const t=Gc(e,64);return Vc(n,t)},pR=(n,e)=>!Ss(n)||!Vt(e)?!1:Vc(n,e),mR=n=>["number","string","boolean"].includes(typeof n)?typeof n=="boolean"?!0:typeof n=="string"&&!Se(n)?n==="1"||n==="0":typeof n=="string"&&Se(n)?n==="0x1"||n==="0x0":n===1||n===0:!1,E=n=>n==null,As=n=>typeof n=="object"&&!E(n)&&!Array.isArray(n)&&!(n instanceof ed),Hc=n=>typeof n!="string"||!/^(0x)?[0-9a-f]{64}$/i.test(n)?!1:!!(/^(0x)?[0-9a-f]{64}$/.test(n)||/^(0x)?[0-9A-F]{64}$/.test(n)),gR=(n,e)=>!Ss(n)||!Hc(e)?!1:Vc(n,e),OR=n=>{const e=["fromBlock","toBlock","address","topics","blockHash"];if(E(n)||typeof n!="object"||!Object.keys(n).every(t=>e.includes(t))||!E(n.fromBlock)&&!Pd(n.fromBlock)||!E(n.toBlock)&&!Pd(n.toBlock))return!1;if(!E(n.address)){if(Array.isArray(n.address)){if(!n.address.every(t=>Vt(t)))return!1}else if(!Vt(n.address))return!1}return!(!E(n.topics)&&!n.topics.every(t=>E(t)?!0:Array.isArray(t)?t.every(i=>Hc(i)):!!Hc(t)))},vr={address:n=>Vt(n),bloom:n=>Ss(n),blockNumber:n=>dv(n),blockTag:n=>rt(n),blockNumberOrTag:n=>Pd(n),bool:n=>mR(n),bytes:n=>Xi(n),filter:n=>OR(n),hex:n=>Se(n),uint:n=>hi(n),int:n=>ma(n),number:n=>fv(n),string:n=>bd(n)};for(let n=8;n<=256;n+=8)vr[`int${n}`]=e=>ma(e,{bitSize:n}),vr[`uint${n}`]=e=>hi(e,{bitSize:n});for(let n=1;n<=32;n+=1)vr[`bytes${n}`]=e=>Xi(e,{size:n});vr.bytes256=vr.bytes;const ga=n=>{if((!(n!=null&&n.type)||(n==null?void 0:n.type)==="object")&&(n!=null&&n.properties)){const e={};for(const t of Object.keys(n.properties)){const i=ga(n.properties[t]);i&&(e[t]=i)}return Array.isArray(n.required)?qn.object(e).partial().required(n.required.reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:!0}),{})):qn.object(e).partial()}if((n==null?void 0:n.type)==="array"&&(n!=null&&n.items)){if(Array.isArray(n.items)&&n.items.length>1&&n.maxItems!==void 0&&new Set(n.items.map(i=>i.$id)).size===n.items.length){const i=[];for(const r of n.items){const s=ga(r);s&&i.push(s)}return qn.tuple(i)}const e=Array.isArray(n.items)?n.items[0]:n.items;let t=qn.array(ga(e));return t=n.minItems!==void 0?t.min(n.minItems):t,t=n.maxItems!==void 0?t.max(n.maxItems):t,t}if(n.oneOf&&Array.isArray(n.oneOf))return qn.union(n.oneOf.map(e=>ga(e)));if(n!=null&&n.format){if(!vr[n.format])throw new FC(n.format);return qn.any().refine(vr[n.format],e=>({params:{value:e,format:n.format}}))}return n!=null&&n.type&&(n==null?void 0:n.type)!=="object"&&typeof qn[String(n.type)]=="function"?qn[String(n.type)]():qn.object({data:qn.any()}).partial()};class ks{static factory(){return ks.validatorInstance||(ks.validatorInstance=new ks),ks.validatorInstance}validate(e,t,i){var r,s;const a=ga(e).safeParse(t);if(!a.success){const l=this.convertErrors((s=(r=a.error)===null||r===void 0?void 0:r.issues)!==null&&s!==void 0?s:[]);if(l){if(i!=null&&i.silent)return l;throw new xs(l)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map(t=>{var i;let r,s,o,a;a=t.path.join("/");const l=String(t.path[t.path.length-1]),h=t.path.join("/");if(t.code===Z.too_big)s="maxItems",a=`${h}/maxItems`,o={limit:t.maximum},r=`must NOT have more than ${t.maximum} items`;else if(t.code===Z.too_small)s="minItems",a=`${h}/minItems`,o={limit:t.minimum},r=`must NOT have fewer than ${t.minimum} items`;else if(t.code===Z.custom){const{value:c,format:u}=(i=t.params)!==null&&i!==void 0?i:{};typeof c=="undefined"?r=`value at "/${a}" is required`:r=`value "${typeof c=="object"?JSON.stringify(c):c}" at "/${a}" must pass "${u}" validation`,o={value:c}}return{keyword:s!=null?s:l,instancePath:h?`/${h}`:"",schemaPath:a?`#${a}`:"#",params:o!=null?o:{value:t.message},message:r!=null?r:t.message}})}}class yR{constructor(){this._validator=ks.factory()}validateJSONSchema(e,t,i){return this._validator.validate(e,t,i)}validate(e,t,i={silent:!1}){var r,s;const o=Sd(e);if(!(Array.isArray(o.items)&&((r=o.items)===null||r===void 0?void 0:r.length)===0&&t.length===0)){if(Array.isArray(o.items)&&((s=o.items)===null||s===void 0?void 0:s.length)===0&&t.length!==0)throw new xs([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(o,t,i)}}}const K=new yR;function Gi(n){var e,t;return n instanceof Uint8Array||((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||((t=n==null?void 0:n.constructor)===null||t===void 0?void 0:t.name)==="Buffer"}function Tt(...n){const e=n.reduce((r,s)=>r+s.length,0),t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}function Wc(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t+=1)if(n[t]!==e[t])return!1;return!0}const zc={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},Td="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",Un=n=>{if(K.validate(["bytes"],[n]),Gi(n))return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="string")return yr(n);throw new fs(n)},{uint8ArrayToHexString:bR}=hv,fe=n=>bR(Un(n)),Qe=n=>typeof n=="string"&&n.slice(0,2).toLowerCase()!=="0x"?Un(`0x${n}`):Un(n),Oa=n=>(K.validate(["hex"],[n]),Uc(n)),vR=Oa,Je=(n,e)=>{typeof n!="bigint"&&K.validate(["int"],[n]);let t=Xc(n);return e&&(!t.startsWith("-")&&t.length%2===1?t="0x0".concat(t.slice(2)):t.length%2===0&&t.startsWith("-")&&(t="-0x0".concat(t.slice(3)))),t},wR=Je,xR=n=>Oa(n).toString(),On=n=>{K.validate(["string"],[n]);let e=n.replace(/^(?:\u0000)/,"");return e=e.replace(/(?:\u0000)$/,""),fe(new TextEncoder().encode(e))},pv=On,SR=On,Yc=n=>Vb(Qe(n)),AR=n=>typeof n=="string"?Yc(n):(K.validate(["bytes"],[n]),Vb(n)),Ed=ps,kR=Yc,mv=n=>{K.validate(["string"],[n]);let e="";for(let t=0;t<n.length;t+=1){const i=n.charCodeAt(t).toString(16);e+=i.length%2!==0?`0${i}`:i}return`0x${e}`},PR=mv,gv=n=>new TextDecoder("ascii").decode(Qe(n)),TR=gv,ui=(n,e)=>{if(typeof n=="string"&&Vt(n))return e?"address":`0x${n.toLowerCase().replace(/^0x/i,"")}`;if(typeof n=="boolean")return e?"bool":n?"0x01":"0x00";if(typeof n=="number")return e?n<0?"int256":"uint256":Je(n);if(typeof n=="bigint")return e?"bigint":Je(n);if(Gi(n))return e?"bytes":fe(n);if(typeof n=="object"&&n)return e?"string":On(JSON.stringify(n));if(typeof n=="string"){if(n.startsWith("-0x")||n.startsWith("-0X"))return e?"int256":Je(n);if(Se(n))return e?"bytes":n;if(jc(n)&&!ma(n)&&!hi(n))return e?"bytes":`0x${n}`;if(jc(n)&&!ma(n)&&hi(n))return e?"uint":Je(n);if(!Number.isFinite(n))return e?"string":On(n)}throw new _C(n)},Zt=n=>{if(typeof n=="number")return n>1e20?(console.warn(Td),BigInt(n)):n;if(typeof n=="bigint")return n>=Number.MIN_SAFE_INTEGER&&n<=Number.MAX_SAFE_INTEGER?Number(n):n;if(typeof n=="string"&&Se(n))return Oa(n);try{return Zt(BigInt(n))}catch(e){throw new od(n)}},wr=n=>{if(typeof n=="number")return BigInt(n);if(typeof n=="bigint")return n;if(typeof n=="string"&&jc(n))return n.startsWith("-")?-BigInt(n.substring(1)):BigInt(n);throw new od(n)},ER=(n,e)=>{let t;if(typeof e=="string"){if(t=zc[e],!t)throw new Tb(e)}else{if(e<0||!Number.isInteger(e))throw new Eb(e);t=br(BigInt(10),BigInt(e))}const i=String(Zt(n)),r=t.toString().length-1;if(r<=0)return i.toString();const s=i.padStart(r,"0"),o=s.slice(0,-r),a=s.slice(-r).replace(/\.?0+$/,"");return o===""?a?`0.${a}`:"0":a===""?o:`${o}.${a}`.slice(0,o.length+r+1)},_R=(n,e)=>{K.validate(["number"],[n]);let t;if(typeof e=="string"){if(t=zc[e],!t)throw new Tb(e)}else{if(e<0||!Number.isInteger(e))throw new Eb(e);t=br(BigInt(10),BigInt(e))}let i=n;typeof i=="number"&&(i<1e-15&&console.warn(Td),i>1e20?(console.warn(Td),i=BigInt(i)):i=i.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[r,s]=String(typeof i=="string"&&!Se(i)?i:Zt(i)).split(".").concat(""),a=BigInt(`${r}${s}`)*t,l=s.length;return l===0?a.toString():a.toString().slice(0,-l)},Xn=n=>{if(!Vt(n,!1))throw new ad(n);const e=n.toLowerCase().replace(/^0x/i,""),t=li(kt(Fc(Ed(e))));if(E(t)||t==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470")return"";let i="0x";const r=t.replace(/^0x/i,"");for(let s=0;s<e.length;s+=1)parseInt(r[s],16)>7?i+=e[s].toUpperCase():i+=e[s];return i},Ov=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"&&(n===0||n===1)||typeof n=="bigint"&&(n===BigInt(0)||n===BigInt(1)))return!!n;if(typeof n=="string"&&!Se(n)&&(n==="1"||n==="0"||n==="false"||n==="true"))return n==="true"?!0:n==="false"?!1:!!Number(n);if(typeof n=="string"&&Se(n)&&(n==="0x1"||n==="0x0"))return!!Zt(n);throw new ld(n)};var ya=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function _d(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yv={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function s(l,h,c,u,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new r(c,u||l,f),p=t?t+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)e.call(c,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=t?t+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,d=u.length,p=new Array(d);f<d;f++)p[f]=u[f].fn;return p},a.prototype.listenerCount=function(h){var c=t?t+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,f,d,p){var m=t?t+h:h;if(!this._events[m])return!1;var g=this._events[m],O=arguments.length,y,w;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),O){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,f),!0;case 5:return g.fn.call(g.context,c,u,f,d),!0;case 6:return g.fn.call(g.context,c,u,f,d,p),!0}for(w=1,y=new Array(O-1);w<O;w++)y[w-1]=arguments[w];g.fn.apply(g.context,y)}else{var k=g.length,x;for(w=0;w<k;w++)switch(g[w].once&&this.removeListener(h,g[w].fn,void 0,!0),O){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,c);break;case 3:g[w].fn.call(g[w].context,c,u);break;case 4:g[w].fn.call(g[w].context,c,u,f);break;default:if(!y)for(x=1,y=new Array(O-1);x<O;x++)y[x-1]=arguments[x];g[w].fn.apply(g[w].context,y)}}return!0},a.prototype.on=function(h,c,u){return s(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return s(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,f){var d=t?t+h:h;if(!this._events[d])return this;if(!c)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!f||p.once)&&(!u||p.context===u)&&o(this,d);else{for(var m=0,g=[],O=p.length;m<O;m++)(p[m].fn!==c||f&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=t?t+h:h,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(yv);var QR=yv.exports;const bv=_d(QR);class Qd extends bv{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const CR=Se,IR=jc,RR=uv,$R=Vt,MR=Ss,BR=Vc,ZR=dR,LR=pR,NR=Hc,DR=gR,jR=(n,e)=>{const t=typeof n=="string"&&rt(n),i=typeof e=="string"&&rt(e);if(n===e||(n==="earliest"||n===0)&&(e==="earliest"||e===0))return 0;if(n==="earliest")return-1;if(e==="earliest")return 1;if(t&&i){const o={[ii.EARLIEST]:1,[ii.FINALIZED]:2,[ii.SAFE]:3,[ii.LATEST]:4,[ii.PENDING]:5};return o[n]<o[e]?-1:1}if(t&&!i||!t&&i)throw new CC("Cannot compare blocktag with provided non-blocktag input.");const r=BigInt(n),s=BigInt(e);return r<s?-1:r===s?0:1},Fi=n=>typeof n=="object"&&!E(n)&&Object.keys(n).length!==0&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some(e=>e in n),ee=E,vv=n=>typeof n=="object"&&!E(n)&&!Array.isArray(n)&&!(n instanceof ed),Vi=(n,...e)=>{if(!vv(n))return n;const t=Object.assign({},n);for(const i of e)for(const r in i)vv(i[r])?(t[r]||(t[r]={}),t[r]=Vi(t[r],i[r])):!E(i[r])&&Object.hasOwnProperty.call(i,r)&&(Array.isArray(i[r])||i[r]instanceof ed?t[r]=i[r].slice(0):t[r]=i[r]);return t},Ps=(n,e,t="0")=>typeof n=="string"?Se(n)?Gc(n,e,t):n.padStart(e,t):(K.validate(["int"],[n]),Gc(n,e,t)),wv=(n,e,t="0")=>{if(typeof n=="string"&&!Se(n))return n.padEnd(e,t);const i=typeof n=="string"&&Se(n)?n:Je(n),r=i.startsWith("-")?3:2;return K.validate([i.startsWith("-")?"int":"uint"],[n]),i.padEnd(e+r,t)},xv=wv,ba=Ps,Sv=(n,e=64)=>{K.validate(["int"],[n]);const t=Zt(n);if(t>=0)return Ps(ui(t),e);const i=br(BigInt(2),BigInt(e*4));if(-t>=i)throw new _b(`value: ${n}, nibbleWidth: ${e}`);const s=BigInt(t)+i;return Ps(Je(s),e)},qR=(n,e=64)=>{K.validate(["int"],[n]);const t=Zt(n);if(t<0)return t;const i=Math.ceil(Math.log(Number(t))/Math.log(2));if(i>e*4)throw new _b(`value: "${n}", nibbleWidth: "${e}"`);if(e*4!==i)return t;const r=br(BigInt(2),BigInt(e)*BigInt(4));return Zt(BigInt(t)-r)},{parseBaseType:UR}=hv,fi=n=>typeof n=="object"&&!E(n)&&"number"in n&&"bytes"in n,XR=(n,e,t=[])=>{let i=Object.assign({},n),r;for(const s of e){if(i.oneOf&&r){const o=r,a=t.find(([l])=>l===o);a&&a[0]===r&&(i=i.oneOf[a[1]])}if(!i.properties&&!i.items)return;i.properties?i=i.properties[s]:i.items&&i.items.properties?i=i.items.properties[s]:i.items&&As(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(s,10)]),i&&s&&(r=s)}return i},va=(n,e,t)=>{try{const{baseType:i,baseTypeSize:r}=UR(e);if(i==="int"||i==="uint")switch(t.number){case sn.NUMBER:return Number(wr(n));case sn.HEX:return Je(wr(n));case sn.STR:return wr(n).toString();case sn.BIGINT:return wr(n);default:throw new nd(`Invalid format: ${String(t.number)}`)}if(i==="bytes"){let s;switch(r?typeof n=="string"?s=Ps(n,r*2):Gi(n)&&(s=Tt(new Uint8Array(r-n.length),n)):s=n,t.bytes){case ni.HEX:return fe(Un(s));case ni.UINT8ARRAY:return Un(s);default:throw new nd(`Invalid format: ${String(t.bytes)}`)}}if(i==="string")return String(n)}catch(i){return n}return n},Av=({value:n,schemaProp:e,schema:t,object:i,key:r,dataPath:s,format:o,oneOfPath:a=[]})=>{var l,h;if(Array.isArray(n)){let c=e;if((e==null?void 0:e.oneOf)!==void 0&&e.oneOf.forEach((u,f)=>{var d,p;!Array.isArray(e==null?void 0:e.items)&&(typeof n[0]=="object"&&((d=u==null?void 0:u.items)===null||d===void 0?void 0:d.type)==="object"||typeof n[0]=="string"&&((p=u==null?void 0:u.items)===null||p===void 0?void 0:p.type)!=="object")&&(c=u,a.push([r,f]))}),E(c==null?void 0:c.items))return delete i[r],s.pop(),!0;if(As(c.items)&&!E(c.items.format)){for(let u=0;u<n.length;u+=1)i[r][u]=va(n[u],(l=c==null?void 0:c.items)===null||l===void 0?void 0:l.format,o);return s.pop(),!0}if(!Array.isArray(c==null?void 0:c.items)&&((h=c==null?void 0:c.items)===null||h===void 0?void 0:h.type)==="object"){for(const u of n)Kc(u,t,s,o,a);return s.pop(),!0}if(Array.isArray(c==null?void 0:c.items)){for(let u=0;u<n.length;u+=1)i[r][u]=va(n[u],c.items[u].format,o);return s.pop(),!0}}return!1},Kc=(n,e,t,i,r=[])=>{var s;if(!As(n)&&!Array.isArray(n))return va(n,e==null?void 0:e.format,i);const o=n;if(Array.isArray(o)&&(e==null?void 0:e.type)==="array"&&((s=e==null?void 0:e.items)===null||s===void 0?void 0:s.type)==="object")Av({value:o,schemaProp:e,schema:e,object:o,key:"",dataPath:t,format:i,oneOfPath:r});else for(const[a,l]of Object.entries(o)){t.push(a);let h=XR(e,t,r);if(E(h)){delete o[a],t.pop();continue}if(As(l)){Kc(l,e,t,i,r),t.pop();continue}if(!Av({value:l,schemaProp:h,schema:e,object:o,key:a,dataPath:t,format:i,oneOfPath:r})){if((h==null?void 0:h.format)===void 0&&(h==null?void 0:h.oneOf)!==void 0){for(const[c,u]of h.oneOf.entries())if((u==null?void 0:u.format)!==void 0){h=u;break}}o[a]=va(l,h.format,i),t.pop()}}return o},B=(n,e,t=xt)=>{let i;As(e)?i=Vi({},e):Array.isArray(e)?i=[...e]:i=e;const r=As(n)?n:Sd(n);if(!r.properties&&!r.items&&!r.format)throw new nd("Invalid json schema for formatting");return Kc(i,r,[],t)},kv="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Ts=n=>{let e;return typeof n=="bigint"||typeof n=="number"?e=ps(n.toString()):Array.isArray(n)?e=new Uint8Array(n):typeof n=="string"&&!Se(n)?e=ps(n):e=Un(n),fe(kt(Fc(e)))},wa=n=>{let e;typeof n=="string"?n.startsWith("0x")&&Se(n)?e=Qe(n):e=ps(n):e=n;const t=Ts(e);return t===kv?void 0:t},Ht=n=>{const e=wa(n);return E(e)?kv:e},GR=n=>{if(Array.isArray(n))throw new Error("Autodetection of array types is not supported.");let e,t;if(typeof n=="object"&&("t"in n||"type"in n)&&("v"in n||"value"in n))e="t"in n?n.t:n.type,t="v"in n?n.v:n.value,e=e.toLowerCase()==="bigint"?"int":e;else{if(typeof n=="bigint")return["int",n];e=ui(n,!0),t=ui(n),!e.startsWith("int")&&!e.startsWith("uint")&&(e="bytes")}return(e.startsWith("int")||e.startsWith("uint"))&&typeof t=="string"&&!/^(-)?0x/i.test(t)&&(t=wr(t)),[e,t]},FR=n=>n.startsWith("int[")?`int256${n.slice(3)}`:n==="int"?"int256":n.startsWith("uint[")?`uint256'${n.slice(4)}`:n==="uint"?"uint256":n,Cd=(n,e)=>{const t=/^(\d+).*$/.exec(n.slice(e));return t?parseInt(t[1],10):0},Pv=n=>n.toString(2).length,Tv=(n,e)=>{const t=e.toString();if(n==="string"){if(typeof e=="string")return On(e);throw new EC(e)}if(n==="bool"||n==="boolean"){if(typeof e=="boolean")return e?"01":"00";throw new ld(e)}if(n==="address"){if(!Vt(t))throw new ad(t);return t}const i=FR(n);if(n.startsWith("uint")){const r=Cd(i,4);if(r%8||r<8||r>256)throw new Qb(t);const s=Zt(t);if(Pv(s)>r)throw new Cb(t);if(s<BigInt(0))throw new QC(t);return r?ba(s.toString(16),r/8*2):s.toString(16)}if(n.startsWith("int")){const r=Cd(i,3);if(r%8||r<8||r>256)throw new Qb(n);const s=Zt(t);if(Pv(s)>r)throw new Cb(t);return s<BigInt(0)?Sv(s.toString(),r/8*2):r?ba(s.toString(16),r/4):s.toString(16)}if(i==="bytes"){if(t.replace(/^0x/i,"").length%2!==0)throw new fs(t);return t}if(n.startsWith("bytes")){if(t.replace(/^0x/i,"").length%2!==0)throw new fs(t);const r=Cd(n,5);if(!r||r<1||r>64||r<t.replace(/^0x/i,"").length/2)throw new fs(t);return xv(t,r*2)}return""},Ev=n=>{const[e,t]=GR(n);return Array.isArray(t)?t.map(s=>Tv(e,s).replace("0x","")).join(""):Tv(e,t).replace("0x","")},Id=(...n)=>`0x${n.map(Ev).join("").toLowerCase()}`,VR=(...n)=>wa(Id(...n)),HR=(...n)=>Ht(Id(...n)),WR=n=>wa(`0x${(typeof n=="number"?n.toString():n).padStart(64,"0")}`);function zR(n){return Db(n)}const xa=n=>zR(n),YR=n=>fe(xa(n));var Jc=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function _v(n){return(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Qv(n,e,t){return Jc(this,void 0,void 0,function*(){let i;const r=yield Promise.race([n instanceof Promise?n:n(),new Promise((s,o)=>{i=setTimeout(()=>t?o(t):s(void 0),e)})]);if(i&&clearTimeout(i),r instanceof Error)throw r;return r})}function Rd(n,e){let t;return[new Promise((r,s)=>{t=setInterval(function o(){return Jc(this,void 0,void 0,function*(){try{const a=yield Qv(n,e);E(a)||(clearInterval(t),r(a))}catch(a){clearInterval(t),s(a)}}),o}(),e)}),t]}function KR(n,e){return Jc(this,void 0,void 0,function*(){return Rd(n,e)[0]})}function $d(n,e){let t;const i=new Promise((r,s)=>{t=setTimeout(()=>{s(e)},n)});return[t,i]}function Cv(n,e){let t;const i=new Promise((r,s)=>{t=setInterval(()=>{Jc(this,void 0,void 0,function*(){const o=yield n();o&&(clearInterval(t),s(o))})},e)});return[t,i]}const Md=()=>{const n=xa(16);n[6]=n[6]&15|64,n[8]=n[8]&63|128;const e=fe(n);return[e.substring(2,10),e.substring(10,14),e.substring(14,18),e.substring(18,22),e.substring(22,34)].join("-")},Bd=n=>{const e=n.error.code;return At.has(e)||e>=-32099&&e<=-32e3},Hi=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"result"in n&&E(n.error)&&(typeof n.id=="number"||typeof n.id=="string"),Wi=n=>!Array.isArray(n)&&n.jsonrpc==="2.0"&&!!n&&E(n.result)&&"error"in n&&(typeof n.id=="number"||typeof n.id=="string"),eh=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&!E(n.params)&&!E(n.method),Iv=n=>!Array.isArray(n)&&!!n&&n.jsonrpc==="2.0"&&"id"in n&&"result"in n,th=n=>Hi(n)||Wi(n),Zd=n=>Array.isArray(n)?n.every(th):th(n),Sa=n=>Array.isArray(n)&&n.length>0&&Zd(n);let nh;const Rv=n=>{nh=n},xr=n=>{var e,t,i,r;return typeof nh!="undefined"&&(nh+=1),{jsonrpc:(e=n.jsonrpc)!==null&&e!==void 0?e:"2.0",id:(i=(t=n.id)!==null&&t!==void 0?t:nh)!==null&&i!==void 0?i:Md(),method:n.method,params:(r=n.params)!==null&&r!==void 0?r:void 0}},Ld=n=>n.map(e=>xr(e)),Gn=n=>Array.isArray(n)&&n.length>0,JR=Object.freeze(Object.defineProperty({__proto__:null,isBatchRequest:Gn,isBatchResponse:Sa,isResponseRpcError:Bd,isResponseWithError:Wi,isResponseWithNotification:eh,isResponseWithResult:Hi,isSubscriptionResult:Iv,isValidResponse:Zd,setRequestIdStart:Rv,toBatchPayload:Ld,toPayload:xr,validateResponse:th},Symbol.toStringTag,{value:"Module"}));var Nd=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})},$v;class ih{constructor({timeout:e,eagerStart:t,timeoutMessage:i}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[$v]="Promise",this._state="pending",this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s}),this._timeoutMessage=i,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return Nd(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return Nd(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return Nd(this,void 0,void 0,function*(){return this._promise.finally(e)})}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){this._state==="pending"&&this._timeoutId&&this.reject(new gb(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}$v=Symbol.toStringTag;class Mv{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimeout=1e3*15}clearQueues(){typeof this._clearQueues=="function"&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(r=>{let s=r;this.lastChunk&&(s=this.lastChunk+s);let o;try{o=JSON.parse(s)}catch(a){this.lastChunk=s,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),this.lastChunkTimeout=setTimeout(()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new Ac({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))},this.chunkTimeout);return}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,o&&t.push(o)}),t}}var Bv=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class Dd extends Vo{constructor(){super(...arguments),this._eventEmitter=new bv,this._chainId="",this._accounts=[]}_getChainId(){return Bv(this,void 0,void 0,function*(){var e;const t=yield this.request(xr({method:"eth_chainId",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:""})}_getAccounts(){return Bv(this,void 0,void 0,function*(){var e;const t=yield this.request(xr({method:"eth_accounts",params:[]}));return(e=t==null?void 0:t.result)!==null&&e!==void 0?e:[]})}_onConnect(){Promise.all([this._getChainId().then(e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))}).catch(e=>{console.error(e)}),this._getAccounts().then(e=>{this._accounts.length===e.length&&e.every(t=>e.includes(t))||(this._accounts=e,this._onAccountsChanged())}).catch(e=>{console.error(e)})]).then(()=>this._eventEmitter.emit("connect",{chainId:this._chainId})).catch(e=>{console.error(e)})}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new RC(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var jd=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const e$={autoReconnect:!0,delay:5e3,maxAttempts:5},t$=1e3;class Zv extends Dd{get SocketConnection(){return this._socketConnection}constructor(e,t,i){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new id(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},e$),i!=null?i:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new Mv(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError(()=>{this._clearQueues()}),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(this.isReconnecting)setImmediate(()=>{this._reconnect()});else throw this._connectionStatus="disconnected",e&&e.message?new Wo(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new id(this._socketPath)}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const i=e!=null?e:t$;this._removeSocketListeners(),this.getStatus()!=="disconnected"&&this._closeSocketConnection(i,t),this._onDisconnect(i,t)}safeDisconnect(e,t){return jd(this,arguments,void 0,function*(i,r,s=!1,o=1e3){let a=0;yield jd(this,void 0,void 0,function*(){return new Promise(h=>{const c=setInterval(()=>{s&&a>=5&&this.clearQueues(),this.getPendingRequestQueueSize()===0&&this.getSentRequestsQueueSize()===0&&(clearInterval(c),h(!0)),a+=1},o)})}),this.disconnect(i,r)})}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((e,t)=>{e.deferredPromise.reject(new H2),this._sentRequestsQueue.delete(t)}),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout(()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1},this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new V2(this._reconnectOptions.maxAttempts))))}request(e){return jd(this,void 0,void 0,function*(){if(ee(this._socketConnection))throw new Error("Connection is undefined");this.getStatus()==="disconnected"&&this.connect();const t=Gn(e)?e[0].id:e.id;if(!t)throw new tC("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new W2(t);const i=new ih;i.catch(s=>{this._eventEmitter.emit("error",s)});const r={payload:e,deferredPromise:i};if(this.getStatus()==="connecting")return this._pendingRequestsQueue.set(t,r),r.deferredPromise;this._sentRequestsQueue.set(t,r);try{this._sendToSocket(r.payload)}catch(s){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",s)}return i})}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())try{this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}catch(i){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",i)}}_onMessage(e){const t=this._parseResponses(e);if(!(ee(t)||t.length===0))for(const i of t){if(eh(i)&&i.method.endsWith("_subscription")){this._eventEmitter.emit("message",i);return}const r=Sa(i)?i[0].id:i.id,s=this._sentRequestsQueue.get(r);if(!s)return;(Sa(i)||Hi(i)||Wi(i))&&(this._eventEmitter.emit("message",i),s.deferredPromise.resolve(i)),this._sentRequestsQueue.delete(r)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach((t,i)=>{t.deferredPromise.reject(new td(e)),this._pendingRequestsQueue.delete(i)}),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach((t,i)=>{t.deferredPromise.reject(new td(e)),this._sentRequestsQueue.delete(i)}),this._removeSocketListeners()}}const Lv=Object.freeze(Object.defineProperty({__proto__:null,ChunkResponseParser:Mv,Eip1193Provider:Dd,EventEmitter:Qd,SocketProvider:Zv,Web3DeferredPromise:ih,asciiToHex:mv,bytesToHex:fe,bytesToUint8Array:Un,checkAddressCheckSum:RR,compareBlockNumbers:jR,convert:Kc,convertScalarValue:va,encodePacked:Id,ethUnitMap:zc,format:B,fromAscii:PR,fromDecimal:wR,fromTwosComplement:qR,fromUtf8:pv,fromWei:ER,getStorageSlotNumForLongString:WR,hexToAscii:gv,hexToBytes:Qe,hexToNumber:Oa,hexToNumberString:xR,hexToString:kR,hexToUtf8:Yc,isAddress:$R,isBatchRequest:Gn,isBatchResponse:Sa,isBloom:MR,isContractAddressInBloom:LR,isContractInitOptions:Fi,isDataFormat:fi,isHex:IR,isHexStrict:CR,isInBloom:BR,isNullish:ee,isPromise:_v,isResponseRpcError:Bd,isResponseWithError:Wi,isResponseWithNotification:eh,isResponseWithResult:Hi,isSubscriptionResult:Iv,isTopic:NR,isTopicInBloom:DR,isUint8Array:Gi,isUserEthereumAddressInBloom:ZR,isValidResponse:Zd,jsonRpc:JR,keccak256:Ts,keccak256Wrapper:Ts,leftPad:ba,mergeDeep:Vi,numberToHex:Je,padLeft:Ps,padRight:wv,pollTillDefined:KR,pollTillDefinedAndReturnIntervalId:Rd,processSolidityEncodePackedArgs:Ev,randomBytes:xa,randomHex:YR,rejectIfConditionAtInterval:Cv,rejectIfTimeout:$d,rightPad:xv,setRequestIdStart:Rv,sha3:wa,sha3Raw:Ht,soliditySha3:VR,soliditySha3Raw:HR,stringToHex:SR,toAscii:TR,toBatchPayload:Ld,toBigInt:wr,toBool:Ov,toChecksumAddress:Xn,toDecimal:vR,toHex:ui,toNumber:Zt,toPayload:xr,toTwosComplement:Sv,toUtf8:AR,toWei:_R,uint8ArrayConcat:Tt,uint8ArrayEquals:Wc,utf8ToBytes:Ed,utf8ToHex:On,uuidV4:Md,validateResponse:th,waitWithTimeout:Qv},Symbol.toStringTag,{value:"Module"}));class rh{constructor(){this._emitter=new Qd}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var Sr;(function(n){n.CONFIG_CHANGE="CONFIG_CHANGE"})(Sr||(Sr={}));class n$ extends rh{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:750*1e3,transactionReceiptPollingInterval:void 0,transactionSendTimeout:750*1e3,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:ui(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:xt,ignoreGasPricing:!1},this.setConfig(e!=null?e:{})}setConfig(e){const t=Object.keys(e);for(const i of t)this._triggerConfigChange(i,e[i]),!ee(e[i])&&typeof e[i]=="number"&&i==="maxListenersWarningThreshold"&&this.setMaxListenerWarningThreshold(Number(e[i]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!ee(this.config.defaultCommon)&&!ee(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new $b(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!ee(this.config.defaultCommon)&&!ee(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new Rb(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!ee(this.config.defaultHardfork)&&!ee(e)&&!ee(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new Rb(this.config.defaultHardfork,e.hardfork);if(!ee(this.config.defaultChain)&&!ee(e)&&!ee(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new $b(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,t){this.emit(Sr.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var qd={exports:{}};(function(n,e){var t=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof ya!="undefined"&&ya,i=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s!="undefined"&&s||typeof self!="undefined"&&self||typeof a!="undefined"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(b){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function h(b){return b&&DataView.prototype.isPrototypeOf(b)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(b){return b&&c.indexOf(Object.prototype.toString.call(b))>-1};function f(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(b)||b==="")throw new TypeError('Invalid character in header field name: "'+b+'"');return b.toLowerCase()}function d(b){return typeof b!="string"&&(b=String(b)),b}function p(b){var P={next:function(){var M=b.shift();return{done:M===void 0,value:M}}};return l.iterable&&(P[Symbol.iterator]=function(){return P}),P}function m(b){this.map={},b instanceof m?b.forEach(function(P,M){this.append(M,P)},this):Array.isArray(b)?b.forEach(function(P){this.append(P[0],P[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(P){this.append(P,b[P])},this)}m.prototype.append=function(b,P){b=f(b),P=d(P);var M=this.map[b];this.map[b]=M?M+", "+P:P},m.prototype.delete=function(b){delete this.map[f(b)]},m.prototype.get=function(b){return b=f(b),this.has(b)?this.map[b]:null},m.prototype.has=function(b){return this.map.hasOwnProperty(f(b))},m.prototype.set=function(b,P){this.map[f(b)]=d(P)},m.prototype.forEach=function(b,P){for(var M in this.map)this.map.hasOwnProperty(M)&&b.call(P,this.map[M],M,this)},m.prototype.keys=function(){var b=[];return this.forEach(function(P,M){b.push(M)}),p(b)},m.prototype.values=function(){var b=[];return this.forEach(function(P){b.push(P)}),p(b)},m.prototype.entries=function(){var b=[];return this.forEach(function(P,M){b.push([M,P])}),p(b)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function O(b){return new Promise(function(P,M){b.onload=function(){P(b.result)},b.onerror=function(){M(b.error)}})}function y(b){var P=new FileReader,M=O(P);return P.readAsArrayBuffer(b),M}function w(b){var P=new FileReader,M=O(P);return P.readAsText(b),M}function k(b){for(var P=new Uint8Array(b),M=new Array(P.length),j=0;j<P.length;j++)M[j]=String.fromCharCode(P[j]);return M.join("")}function x(b){if(b.slice)return b.slice(0);var P=new Uint8Array(b.byteLength);return P.set(new Uint8Array(b)),P.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(b){this.bodyUsed=this.bodyUsed,this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:l.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:l.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():l.arrayBuffer&&l.blob&&h(b)?(this._bodyArrayBuffer=x(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||u(b))?this._bodyArrayBuffer=x(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var b=g(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var b=g(this);return b||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(y)}),this.text=function(){var b=g(this);if(b)return b;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(b){var P=b.toUpperCase();return A.indexOf(P)>-1?P:b}function I(b,P){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var M=P.body;if(b instanceof I){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,P.headers||(this.headers=new m(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!M&&b._bodyInit!=null&&(M=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new m(P.headers)),this.method=S(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var j=/([?&])_=[^&]*/;if(j.test(this.url))this.url=this.url.replace(j,"$1_="+new Date().getTime());else{var N=/\?/;this.url+=(N.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function _(b){var P=new FormData;return b.trim().split("&").forEach(function(M){if(M){var j=M.split("="),N=j.shift().replace(/\+/g," "),X=j.join("=").replace(/\+/g," ");P.append(decodeURIComponent(N),decodeURIComponent(X))}}),P}function R(b){var P=new m,M=b.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(j){return j.indexOf(`
`)===0?j.substr(1,j.length):j}).forEach(function(j){var N=j.split(":"),X=N.shift().trim();if(X){var de=N.join(":").trim();P.append(X,de)}}),P}T.call(I.prototype);function C(b,P){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new m(P.headers),this.url=P.url||"",this._initBody(b)}T.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},C.error=function(){var b=new C(null,{status:0,statusText:""});return b.type="error",b};var L=[301,302,303,307,308];C.redirect=function(b,P){if(L.indexOf(P)===-1)throw new RangeError("Invalid status code");return new C(null,{status:P,headers:{location:b}})},o.DOMException=a.DOMException;try{new o.DOMException}catch(b){o.DOMException=function(P,M){this.message=P,this.name=M;var j=Error(P);this.stack=j.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(b,P){return new Promise(function(M,j){var N=new I(b,P);if(N.signal&&N.signal.aborted)return j(new o.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function de(){X.abort()}X.onload=function(){var xe={status:X.status,statusText:X.statusText,headers:R(X.getAllResponseHeaders()||"")};xe.url="responseURL"in X?X.responseURL:xe.headers.get("X-Request-URL");var Ne="response"in X?X.response:X.responseText;setTimeout(function(){M(new C(Ne,xe))},0)},X.onerror=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},X.ontimeout=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},X.onabort=function(){setTimeout(function(){j(new o.DOMException("Aborted","AbortError"))},0)};function we(xe){try{return xe===""&&a.location.href?a.location.href:xe}catch(Ne){return xe}}X.open(N.method,we(N.url),!0),N.credentials==="include"?X.withCredentials=!0:N.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&(l.blob?X.responseType="blob":l.arrayBuffer&&N.headers.get("Content-Type")&&N.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(X.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof m)?Object.getOwnPropertyNames(P.headers).forEach(function(xe){X.setRequestHeader(xe,d(P.headers[xe]))}):N.headers.forEach(function(xe,Ne){X.setRequestHeader(Ne,xe)}),N.signal&&(N.signal.addEventListener("abort",de),X.onreadystatechange=function(){X.readyState===4&&N.signal.removeEventListener("abort",de)}),X.send(typeof N._bodyInit=="undefined"?null:N._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=m,a.Request=I,a.Response=C),o.Headers=m,o.Request=I,o.Response=C,o.fetch=W,o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=t.fetch?t:i;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e})(qd,qd.exports);var i$=qd.exports;const r$=_d(i$);var s$=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class sh extends Vo{constructor(e,t){if(super(),!sh.validateClientUrl(e))throw new id(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return typeof e=="string"?/^http(s)?:\/\//i.test(e):!1}getStatus(){throw new ri}supportsSubscriptions(){return!1}request(e,t){var i;return s$(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},(i=this.httpProviderOptions)===null||i===void 0?void 0:i.providerOptions),t),s=yield r$(this.clientUrl,Object.assign(Object.assign({},r),{method:"POST",headers:Object.assign(Object.assign({},r.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!s.ok)throw new Zn(yield s.json(),void 0,void 0,s.status);return yield s.json()})}on(){throw new ri}removeListener(){throw new ri}once(){throw new ri}removeAllListeners(){throw new ri}connect(){throw new ri}disconnect(){throw new ri}reset(){throw new ri}reconnect(){throw new ri}}var Es=null;typeof WebSocket!="undefined"?Es=WebSocket:typeof MozWebSocket!="undefined"?Es=MozWebSocket:typeof global!="undefined"?Es=global.WebSocket||global.MozWebSocket:typeof window!="undefined"?Es=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(Es=self.WebSocket||self.MozWebSocket);const o$=Es;class Nv extends Zv{constructor(e,t,i){super(e,t,i)}_validateProviderPath(e){return typeof e=="string"?/^ws(s)?:\/\//i.test(e):!1}getStatus(){if(this._socketConnection&&!ee(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new o$(this._socketPath,void 0,this._socketOptions&&Object.keys(this._socketOptions).length===0?void 0:this._socketOptions)}_closeSocketConnection(e,t){var i;(i=this._socketConnection)===null||i===void 0||i.close(e,t)}_sendToSocket(e){var t;if(this.getStatus()==="disconnected")throw new td;(t=this._socketConnection)===null||t===void 0||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,i,r;(e=this._socketConnection)===null||e===void 0||e.addEventListener("open",this._onOpenHandler),(t=this._socketConnection)===null||t===void 0||t.addEventListener("message",this._onMessageHandler),(i=this._socketConnection)===null||i===void 0||i.addEventListener("close",s=>this._onCloseHandler(s)),(r=this._socketConnection)===null||r===void 0||r.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,i;(e=this._socketConnection)===null||e===void 0||e.removeEventListener("message",this._onMessageHandler),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("open",this._onOpenHandler),(i=this._socketConnection)===null||i===void 0||i.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),(t=this._socketConnection)===null||t===void 0||t.removeEventListener("error",this._onErrorHandler)}}const Dv=n=>Vo.isWeb3Provider(n),jv=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="Function",qv=n=>typeof n!="string"&&"request"in n&&n.request.constructor.name==="AsyncFunction",Uv=n=>typeof n!="string"&&"send"in n,Xv=n=>typeof n!="string"&&"sendAsync"in n,oh=n=>n&&(Dv(n)||qv(n)||jv(n)||Xv(n)||Uv(n)),a$=n=>n&&"supportsSubscriptions"in n?n.supportsSubscriptions():!!(n&&typeof n!="string"&&"on"in n);var Ud=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})},_s;(function(n){n.PROVIDER_CHANGED="PROVIDER_CHANGED",n.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"})(_s||(_s={}));const Gv={HttpProvider:sh,WebsocketProvider:Nv};class Ar extends rh{constructor(e,t,i){super(),ee(e)||this.setProvider(e),this.useRpcCallSpecification=t,ee(i)||(this.middleware=i)}static get providers(){return Gv}get provider(){return this._provider}get providers(){return Gv}setProvider(e){let t;if(e&&typeof e=="string"&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))t=new this.providers.WebsocketProvider(e);else throw new xc(`Can't autodetect provider for "${e}"`);else ee(e)?t=void 0:t=e;return this.emit(_s.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(_s.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return Ud(this,void 0,void 0,function*(){const t=Object.assign({},e);let i=yield this._sendRequest(t);if(ee(this.middleware)||(i=yield this.middleware.processResponse(i)),Hi(i))return i.result;throw new Zn(i)})}sendBatch(e){return Ud(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return Ud(this,void 0,void 0,function*(){const{provider:t}=this;if(ee(t))throw new xc("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let i=Gn(e)?Ld(e):xr(e);if(ee(this.middleware)||(i=yield this.middleware.processRequest(i)),Dv(t)){let r;try{r=yield t.request(i)}catch(s){r=s}return this._processJsonRpcResponse(i,r,{legacy:!1,error:!1})}if(qv(t))return t.request(i).then(r=>this._processJsonRpcResponse(i,r,{legacy:!0,error:!1})).catch(r=>this._processJsonRpcResponse(i,r,{legacy:!0,error:!0}));if(jv(t))return new Promise((r,s)=>{const o=h=>{s(this._processJsonRpcResponse(i,h,{legacy:!0,error:!0}))},a=h=>r(this._processJsonRpcResponse(i,h,{legacy:!0,error:!1})),l=t.request(i,(h,c)=>h?o(h):a(c));_v(l)&&l.then(a).catch(c=>{try{const u=this._processJsonRpcResponse(i,c,{legacy:!0,error:!0});s(u)}catch(u){s(u)}})});if(Uv(t))return new Promise((r,s)=>{t.send(i,(o,a)=>{if(o)return s(this._processJsonRpcResponse(i,o,{legacy:!0,error:!0}));if(ee(a))throw new Zn({},'Got a "nullish" response from provider.');return r(this._processJsonRpcResponse(i,a,{legacy:!0,error:!1}))})});if(Xv(t))return t.sendAsync(i).then(r=>this._processJsonRpcResponse(i,r,{legacy:!0,error:!1})).catch(r=>this._processJsonRpcResponse(i,r,{legacy:!0,error:!0}));throw new xc("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,t,{legacy:i,error:r}){if(ee(t))return this._buildResponse(e,null,r);if(Wi(t)){if(this.useRpcCallSpecification&&Bd(t)){const s=t;if(At.get(s.error.code)){const o=At.get(s.error.code).error;throw new o(s)}else throw new Gt(s)}else if(!Ar._isReverted(t))throw new Ac(t,e)}if(Hi(t))return t;if(t instanceof Error)throw Ar._isReverted(t),t;if(!i&&Gn(e)&&Sa(t)||i&&!r&&Gn(e))return t;if(i&&r&&Gn(e))throw t;if(i&&!Wi(t)&&!Hi(t))return this._buildResponse(e,t,r);throw Gn(e)&&!Array.isArray(t)?new Zn(t,"Got normal response for a batch request."):!Gn(e)&&Array.isArray(t)?new Zn(t,"Got batch response for a normal request."):new Zn(t,"Invalid response")}static _isReverted(e){let t;if(Wi(e)?t=e.error:e instanceof Error&&(t=e),t!=null&&t.message.includes("revert"))throw new fr(t);return!1}_buildResponse(e,t,i){const r={jsonrpc:"2.0",id:Gn(e)?e[0].id:"id"in e?e.id:null};return i?Object.assign(Object.assign({},r),{error:t}):Object.assign(Object.assign({},r),{result:t})}}var Aa=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class ah{constructor(e,t,i=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=i,this._subscriptions=new Map,this.requestManager.on(_s.BEFORE_PROVIDER_CHANGE,()=>Aa(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on(_s.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;!this.requestManager.provider||typeof(e==null?void 0:e.supportsSubscriptions)=="function"&&!(e!=null&&e.supportsSubscriptions())||typeof this.requestManager.provider.on=="function"&&(typeof this.requestManager.provider.request=="function"?this.requestManager.provider.on("message",t=>this.messageListener(t)):e.on("data",t=>this.messageListener(t)))}messageListener(e){var t,i,r;if(!e)throw new si("Should not call messageListener with no data. Type was");const s=((t=e.params)===null||t===void 0?void 0:t.subscription)||((i=e.data)===null||i===void 0?void 0:i.subscription)||((r=e.id)===null||r===void 0?void 0:r.toString(16));if(s){const o=this._subscriptions.get(s);o==null||o.processSubscriptionData(e)}}subscribe(e,t){return Aa(this,arguments,void 0,function*(i,r,s=xt){const o=this.registeredSubscriptions[i];if(!o)throw new si("Invalid subscription type");const a=new o(r!=null?r:void 0,{subscriptionManager:this,returnFormat:s});return yield this.addSubscription(a),a})}get subscriptions(){return this._subscriptions}addSubscription(e){return Aa(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new xc("Provider not available");if(!this.supportsSubscriptions())throw new si("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new si(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),ee(e.id))throw new si("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return Aa(this,void 0,void 0,function*(){const{id:t}=e;if(ee(t))throw new si("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new si(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t})}unsubscribe(e){return Aa(this,void 0,void 0,function*(){const t=[];for(const[i,r]of this.subscriptions.entries())(!e||typeof e=="function"&&e({id:i,sub:r}))&&t.push(this.removeSubscription(r));return Promise.all(t)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return ee(this.requestManager.provider)?!1:a$(this.requestManager.provider)}}var ka=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class Pa extends rh{constructor(e,t){var i;super(),this.args=e;const{requestManager:r}=t,{subscriptionManager:s}=t;r?this._subscriptionManager=new ah(r,{},!0):this._subscriptionManager=s,this._returnFormat=(i=t==null?void 0:t.returnFormat)!==null&&i!==void 0?i:xt}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return ka(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var t,i;e!=null&&e.data?this._processSubscriptionResult((i=(t=e==null?void 0:e.data)===null||t===void 0?void 0:t.result)!==null&&i!==void 0?i:e==null?void 0:e.data):e&&eh(e)&&this._processSubscriptionResult(e==null?void 0:e.params.result)}sendSubscriptionRequest(){return ka(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return ka(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return ka(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return ka(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var Qs=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class lh extends tQ{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&!E(e)&&e.length!==0?e:void 0}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if(typeof e=="string")return this.add(this._accountProvider.privateKeyToAccount(e));let i=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),i=(t=this._addressMap.get(e.address.toLowerCase()))!==null&&t!==void 0?t:i),this._addressMap.set(e.address.toLowerCase(),i),this[i]=e,this}get(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return E(t)?void 0:this[t]}return this[e]}remove(e){if(typeof e=="string"){const t=this._addressMap.get(e.toLowerCase());return E(t)?!1:(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return this[e]?(this.splice(e,1),!0):!1}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return Qs(this,void 0,void 0,function*(){return Promise.all(this.map(i=>Qs(this,void 0,void 0,function*(){return i.encrypt(e,t)})))})}decrypt(e,t,i){return Qs(this,void 0,void 0,function*(){const r=yield Promise.all(e.map(s=>Qs(this,void 0,void 0,function*(){return this._accountProvider.decrypt(s,t,i)})));for(const s of r)this.add(s);return this})}save(e,t){return Qs(this,void 0,void 0,function*(){const i=lh.getStorage();if(!i)throw new Error("Local storage not available.");return i.setItem(t!=null?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0})}load(e,t){return Qs(this,void 0,void 0,function*(){const i=lh.getStorage();if(!i)throw new Error("Local storage not available.");const r=i.getItem(t!=null?t:this._defaultKeyName);return r&&(yield this.decrypt(JSON.parse(r)||[],e)),this})}}const Fn={web:Pc};function Fv(n,e,t){if(!t.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${t}`);if(e.length!==16)throw new Error("AES: wrong IV length");if(t.startsWith("aes-128")&&n.length!==16||t.startsWith("aes-256")&&n.length!==32)throw new Error("AES: wrong key length")}function Vv(n,e,t){return We(this,null,function*(){if(!Fn.web)throw new Error("Browser crypto not available.");let i;if(["aes-128-cbc","aes-256-cbc"].includes(n)&&(i="cbc"),["aes-128-ctr","aes-256-ctr"].includes(n)&&(i="ctr"),!i)throw new Error("AES: unsupported mode");return[yield Fn.web.subtle.importKey("raw",e,{name:`AES-${i.toUpperCase()}`,length:e.length*8},!0,["encrypt","decrypt"]),{name:`aes-${i}`,iv:t,counter:t,length:128}]})}function Xd(n,e,t,i="aes-128-ctr",r=!0){return We(this,null,function*(){if(Fv(e,t,i),Fn.web){const[s,o]=yield Vv(i,e,t),a=yield Fn.web.subtle.encrypt(o,s,n);let l=new Uint8Array(a);return!r&&o.name==="aes-cbc"&&!(n.length%16)&&(l=l.slice(0,-16)),l}else if(Fn.node){const s=Fn.node.createCipheriv(i,e,t);return s.setAutoPadding(r),Cc(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")})}function l$(n,e,t,i){return We(this,null,function*(){const r=n.slice(-16);for(let o=0;o<16;o++)r[o]^=t[o]^16;return(yield Xd(r,e,t,i)).slice(0,16)})}function c$(n,e,t,i="aes-128-ctr",r=!0){return We(this,null,function*(){if(Fv(e,t,i),Fn.web){const[s,o]=yield Vv(i,e,t);if(!r&&o.name==="aes-cbc"){const h=yield l$(n,e,t,i);n=Cc(n,h)}const a=yield Fn.web.subtle.decrypt(o,s,n),l=new Uint8Array(a);if(o.name==="aes-cbc"){const h=yield Xd(l,e,t,i);if(!uI(h,n))throw new Error("AES: wrong padding")}return l}else if(Fn.node){const s=Fn.node.createDecipheriv(i,e,t);return s.setAutoPadding(r),Cc(s.update(n),s.final())}else throw new Error("The environment doesn't have AES module")})}class Hv extends ud{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,cd(e);const i=ms(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return dr(this),this.iHash.update(e),this}digestInto(e){dr(this),ds(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:i,finished:r,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gd=(n,e,t)=>new Hv(n,e).update(t).digest();Gd.create=(n,e)=>new Hv(n,e);function h$(n,e,t,i){cd(n);const r=Lb({dkLen:32,asyncTick:10},i),{c:s,dkLen:o,asyncTick:a}=r;if(Bt(s),Bt(o),Bt(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=ms(e),h=ms(t),c=new Uint8Array(o),u=Gd.create(n,l),f=u._cloneInto().update(h);return{c:s,dkLen:o,asyncTick:a,DK:c,PRF:u,PRFSalt:f}}function u$(n,e,t,i,r){return n.destroy(),e.destroy(),i&&i.destroy(),r.fill(0),t}function Fd(n,e,t,i){const{c:r,dkLen:s,DK:o,PRF:a,PRFSalt:l}=h$(n,e,t,i);let h;const c=new Uint8Array(4),u=Ec(c),f=new Uint8Array(a.outputLen);for(let d=1,p=0;p<s;d++,p+=a.outputLen){const m=o.subarray(p,p+a.outputLen);u.setInt32(0,d,!1),(h=l._cloneInto(h)).update(c).digestInto(f),m.set(f.subarray(0,m.length));for(let g=1;g<r;g++){a._cloneInto(h).update(f).digestInto(f);for(let O=0;O<m.length;O++)m[O]^=f[O]}}return u$(a,l,o,h,f)}function f$(n,e,t,i){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,i);const r=BigInt(32),s=BigInt(4294967295),o=Number(t>>r&s),a=Number(t&s),l=i?4:0,h=i?0:4;n.setUint32(e+l,o,i),n.setUint32(e+h,a,i)}const d$=(n,e,t)=>n&e^~n&t,p$=(n,e,t)=>n&e^n&t^e&t;class m$ extends ud{constructor(e,t,i,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ec(this.buffer)}update(e){dr(this);const{view:t,buffer:i,blockLen:r}=this;e=ms(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);if(a===r){const l=Ec(e);for(;r<=s-o;o+=r)this.process(l,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dr(this),hd(e,this),this.finished=!0;const{buffer:t,view:i,blockLen:r,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(i,0),o=0);for(let u=o;u<r;u++)t[u]=0;f$(i,r-8,BigInt(this.length*8),s),this.process(i,0);const a=Ec(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=l/4,c=this.get();if(h>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<h;u++)a.setUint32(4*u,c[u],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:i,length:r,finished:s,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=o,r%t&&e.buffer.set(i),e}}const g$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yi=new Uint32Array(64);class O$ extends m${constructor(){super(64,32,8,!1),this.A=zi[0]|0,this.B=zi[1]|0,this.C=zi[2]|0,this.D=zi[3]|0,this.E=zi[4]|0,this.F=zi[5]|0,this.G=zi[6]|0,this.H=zi[7]|0}get(){const{A:e,B:t,C:i,D:r,E:s,F:o,G:a,H:l}=this;return[e,t,i,r,s,o,a,l]}set(e,t,i,r,s,o,a,l){this.A=e|0,this.B=t|0,this.C=i|0,this.D=r|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let u=0;u<16;u++,t+=4)Yi[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const f=Yi[u-15],d=Yi[u-2],p=Ln(f,7)^Ln(f,18)^f>>>3,m=Ln(d,17)^Ln(d,19)^d>>>10;Yi[u]=m+Yi[u-7]+p+Yi[u-16]|0}let{A:i,B:r,C:s,D:o,E:a,F:l,G:h,H:c}=this;for(let u=0;u<64;u++){const f=Ln(a,6)^Ln(a,11)^Ln(a,25),d=c+f+d$(a,l,h)+g$[u]+Yi[u]|0,m=(Ln(i,2)^Ln(i,13)^Ln(i,22))+p$(i,r,s)|0;c=h,h=l,l=a,a=o+d|0,o=s,s=r,r=i,i=d+m|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(i,r,s,o,a,l,h,c)}roundClean(){Yi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ch=Nb(()=>new O$);function Wv(n,e,t,i,r){if(!["sha256","sha512"].includes(r))throw new Error("Only sha256 and sha512 are supported");return Ic(n),Ic(e),Fd(ch,n,e,{c:t,dkLen:i})}function zv(n,e,t,i,r,s){let o=n[e++]^t[i++],a=n[e++]^t[i++],l=n[e++]^t[i++],h=n[e++]^t[i++],c=n[e++]^t[i++],u=n[e++]^t[i++],f=n[e++]^t[i++],d=n[e++]^t[i++],p=n[e++]^t[i++],m=n[e++]^t[i++],g=n[e++]^t[i++],O=n[e++]^t[i++],y=n[e++]^t[i++],w=n[e++]^t[i++],k=n[e++]^t[i++],x=n[e++]^t[i++],T=o,A=a,S=l,I=h,_=c,R=u,C=f,L=d,W=p,b=m,P=g,M=O,j=y,N=w,X=k,de=x;for(let we=0;we<8;we+=2)_^=ve(T+j|0,7),W^=ve(_+T|0,9),j^=ve(W+_|0,13),T^=ve(j+W|0,18),b^=ve(R+A|0,7),N^=ve(b+R|0,9),A^=ve(N+b|0,13),R^=ve(A+N|0,18),X^=ve(P+C|0,7),S^=ve(X+P|0,9),C^=ve(S+X|0,13),P^=ve(C+S|0,18),I^=ve(de+M|0,7),L^=ve(I+de|0,9),M^=ve(L+I|0,13),de^=ve(M+L|0,18),A^=ve(T+I|0,7),S^=ve(A+T|0,9),I^=ve(S+A|0,13),T^=ve(I+S|0,18),C^=ve(R+_|0,7),L^=ve(C+R|0,9),_^=ve(L+C|0,13),R^=ve(_+L|0,18),M^=ve(P+b|0,7),W^=ve(M+P|0,9),b^=ve(W+M|0,13),P^=ve(b+W|0,18),j^=ve(de+X|0,7),N^=ve(j+de|0,9),X^=ve(N+j|0,13),de^=ve(X+N|0,18);r[s++]=o+T|0,r[s++]=a+A|0,r[s++]=l+S|0,r[s++]=h+I|0,r[s++]=c+_|0,r[s++]=u+R|0,r[s++]=f+C|0,r[s++]=d+L|0,r[s++]=p+W|0,r[s++]=m+b|0,r[s++]=g+P|0,r[s++]=O+M|0,r[s++]=y+j|0,r[s++]=w+N|0,r[s++]=k+X|0,r[s++]=x+de|0}function Vd(n,e,t,i,r){let s=i+0,o=i+16*r;for(let a=0;a<16;a++)t[o+a]=n[e+(2*r-1)*16+a];for(let a=0;a<r;a++,s+=16,e+=16)zv(t,o,n,e,t,s),a>0&&(o+=16),zv(t,s,n,e+=16,t,o)}function y$(n,e,t){const i=Lb({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:r,r:s,p:o,dkLen:a,asyncTick:l,maxmem:h,onProgress:c}=i;if(Bt(r),Bt(s),Bt(o),Bt(a),Bt(l),Bt(h),c!==void 0&&typeof c!="function")throw new Error("progressCb should be function");const u=128*s,f=u/4;if(r<=1||r&r-1||r>=Yn(2,u/8)||r>Yn(2,32))throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(Yn(2,32)-1)*32/u)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(Yn(2,32)-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const d=u*(r+o);if(d>h)throw new Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${h} (maxmem)`);const p=Fd(ch,n,e,{c:1,dkLen:u*o}),m=Tc(p),g=Tc(new Uint8Array(u*r)),O=Tc(new Uint8Array(u));let y=()=>{};if(c){const w=2*r*o,k=Math.max(Math.floor(w/1e4),1);let x=0;y=()=>{x++,c&&(!(x%k)||x===w)&&c(x/w)}}return{N:r,r:s,p:o,dkLen:a,blockSize32:f,V:g,B32:m,B:p,tmp:O,blockMixCb:y,asyncTick:l}}function b$(n,e,t,i,r){const s=Fd(ch,n,t,{c:1,dkLen:e});return t.fill(0),i.fill(0),r.fill(0),s}function v$(n,e,t){const{N:i,r,p:s,dkLen:o,blockSize32:a,V:l,B32:h,B:c,tmp:u,blockMixCb:f}=y$(n,e,t);_c||Qc(h);for(let d=0;d<s;d++){const p=a*d;for(let m=0;m<a;m++)l[m]=h[p+m];for(let m=0,g=0;m<i-1;m++)Vd(l,g,l,g+=a,r),f();Vd(l,(i-1)*a,h,p,r),f();for(let m=0;m<i;m++){const g=h[p+a-16]%i;for(let O=0;O<a;O++)u[O]=h[p+O]^l[g*a+O];Vd(u,0,h,p,r),f()}}return _c||Qc(h),b$(n,o,c,l,u)}function Yv(n,e,t,i,r,s,o){return Ic(n),Ic(e),v$(n,e,{N:t,r,p:i,dkLen:s,onProgress:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kv=BigInt(0),hh=BigInt(1),w$=BigInt(2);function kr(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Ta(n){if(!kr(n))throw new Error("Uint8Array expected")}const x$=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Cs(n){Ta(n);let e="";for(let t=0;t<n.length;t++)e+=x$[n[t]];return e}function Jv(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function Hd(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const di={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ew(n){if(n>=di._0&&n<=di._9)return n-di._0;if(n>=di._A&&n<=di._F)return n-(di._A-10);if(n>=di._a&&n<=di._f)return n-(di._a-10)}function Is(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(t);for(let r=0,s=0;r<t;r++,s+=2){const o=ew(n.charCodeAt(s)),a=ew(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}i[r]=o*16+a}return i}function Pr(n){return Hd(Cs(n))}function Wd(n){return Ta(n),Hd(Cs(Uint8Array.from(n).reverse()))}function Rs(n,e){return Is(n.toString(16).padStart(e*2,"0"))}function zd(n,e){return Rs(n,e).reverse()}function S$(n){return Is(Jv(n))}function yn(n,e,t){let i;if(typeof e=="string")try{i=Is(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(kr(e))i=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const r=i.length;if(typeof t=="number"&&r!==t)throw new Error(`${n} expected ${t} bytes, got ${r}`);return i}function Ea(...n){let e=0;for(let i=0;i<n.length;i++){const r=n[i];Ta(r),e+=r.length}const t=new Uint8Array(e);for(let i=0,r=0;i<n.length;i++){const s=n[i];t.set(s,r),r+=s.length}return t}function A$(n,e){if(n.length!==e.length)return!1;let t=0;for(let i=0;i<n.length;i++)t|=n[i]^e[i];return t===0}function k$(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function P$(n){let e;for(e=0;n>Kv;n>>=hh,e+=1);return e}function T$(n,e){return n>>BigInt(e)&hh}function E$(n,e,t){return n|(t?hh:Kv)<<BigInt(e)}const Yd=n=>(w$<<BigInt(n-1))-hh,Kd=n=>new Uint8Array(n),tw=n=>Uint8Array.from(n);function nw(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let i=Kd(n),r=Kd(n),s=0;const o=()=>{i.fill(1),r.fill(0),s=0},a=(...u)=>t(r,i,...u),l=(u=Kd())=>{r=a(tw([0]),u),i=a(),u.length!==0&&(r=a(tw([1]),u),i=a())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){i=a();const d=i.slice();f.push(d),u+=i.length}return Ea(...f)};return(u,f)=>{o(),l(u);let d;for(;!(d=f(h()));)l();return o(),d}}const _$={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||kr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function _a(n,e,t={}){const i=(r,s,o)=>{const a=_$[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[r];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(r)}=${l} (${typeof l}), expected ${s}`)};for(const[r,s]of Object.entries(e))i(r,s,!1);for(const[r,s]of Object.entries(t))i(r,s,!0);return n}const Q$=Object.freeze(Object.defineProperty({__proto__:null,abytes:Ta,bitGet:T$,bitLen:P$,bitMask:Yd,bitSet:E$,bytesToHex:Cs,bytesToNumberBE:Pr,bytesToNumberLE:Wd,concatBytes:Ea,createHmacDrbg:nw,ensureBytes:yn,equalBytes:A$,hexToBytes:Is,hexToNumber:Hd,isBytes:kr,numberToBytesBE:Rs,numberToBytesLE:zd,numberToHexUnpadded:Jv,numberToVarBytesBE:S$,utf8ToBytes:k$,validateObject:_a},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const st=BigInt(0),Ge=BigInt(1),Tr=BigInt(2),C$=BigInt(3),Jd=BigInt(4),iw=BigInt(5),rw=BigInt(8);BigInt(9),BigInt(16);function Lt(n,e){const t=n%e;return t>=st?t:e+t}function I$(n,e,t){if(t<=st||e<st)throw new Error("Expected power/modulo > 0");if(t===Ge)return st;let i=Ge;for(;e>st;)e&Ge&&(i=i*n%t),n=n*n%t,e>>=Ge;return i}function on(n,e,t){let i=n;for(;e-- >st;)i*=i,i%=t;return i}function ep(n,e){if(n===st||e<=st)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Lt(n,e),i=e,r=st,s=Ge;for(;t!==st;){const a=i/t,l=i%t,h=r-s*a;i=t,t=l,r=s,s=h}if(i!==Ge)throw new Error("invert: does not exist");return Lt(r,e)}function R$(n){const e=(n-Ge)/Tr;let t,i,r;for(t=n-Ge,i=0;t%Tr===st;t/=Tr,i++);for(r=Tr;r<n&&I$(r,e,n)!==n-Ge;r++);if(i===1){const o=(n+Ge)/Jd;return function(l,h){const c=l.pow(h,o);if(!l.eql(l.sqr(c),h))throw new Error("Cannot find square root");return c}}const s=(t+Ge)/Tr;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let h=i,c=a.pow(a.mul(a.ONE,r),t),u=a.pow(l,s),f=a.pow(l,t);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let d=1;for(let m=a.sqr(f);d<h&&!a.eql(m,a.ONE);d++)m=a.sqr(m);const p=a.pow(c,Ge<<BigInt(h-d-1));c=a.sqr(p),u=a.mul(u,p),f=a.mul(f,c),h=d}return u}}function $$(n){if(n%Jd===C$){const e=(n+Ge)/Jd;return function(i,r){const s=i.pow(r,e);if(!i.eql(i.sqr(s),r))throw new Error("Cannot find square root");return s}}if(n%rw===iw){const e=(n-iw)/rw;return function(i,r){const s=i.mul(r,Tr),o=i.pow(s,e),a=i.mul(r,o),l=i.mul(i.mul(a,Tr),o),h=i.mul(a,i.sub(l,i.ONE));if(!i.eql(i.sqr(h),r))throw new Error("Cannot find square root");return h}}return R$(n)}const M$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function B$(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=M$.reduce((i,r)=>(i[r]="function",i),e);return _a(n,t)}function Z$(n,e,t){if(t<st)throw new Error("Expected power > 0");if(t===st)return n.ONE;if(t===Ge)return e;let i=n.ONE,r=e;for(;t>st;)t&Ge&&(i=n.mul(i,r)),r=n.sqr(r),t>>=Ge;return i}function L$(n,e){const t=new Array(e.length),i=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),r=n.inv(i);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),r),t}function sw(n,e){const t=e!==void 0?e:n.toString(2).length,i=Math.ceil(t/8);return{nBitLength:t,nByteLength:i}}function N$(n,e,t=!1,i={}){if(n<=st)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:r,nByteLength:s}=sw(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=$$(n),a=Object.freeze({ORDER:n,BITS:r,BYTES:s,MASK:Yd(r),ZERO:st,ONE:Ge,create:l=>Lt(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return st<=l&&l<n},is0:l=>l===st,isOdd:l=>(l&Ge)===Ge,neg:l=>Lt(-l,n),eql:(l,h)=>l===h,sqr:l=>Lt(l*l,n),add:(l,h)=>Lt(l+h,n),sub:(l,h)=>Lt(l-h,n),mul:(l,h)=>Lt(l*h,n),pow:(l,h)=>Z$(a,l,h),div:(l,h)=>Lt(l*ep(h,n),n),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>ep(l,n),sqrt:i.sqrt||(l=>o(a,l)),invertBatch:l=>L$(a,l),cmov:(l,h,c)=>c?h:l,toBytes:l=>t?zd(l,s):Rs(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?Wd(l):Pr(l)}});return Object.freeze(a)}function ow(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function aw(n){const e=ow(n);return e+Math.ceil(e/2)}function D$(n,e,t=!1){const i=n.length,r=ow(e),s=aw(e);if(i<16||i<s||i>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${i}`);const o=t?Pr(n):Wd(n),a=Lt(o,e-Ge)+Ge;return t?zd(a,r):Rs(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const j$=BigInt(0),tp=BigInt(1);function q$(n,e){const t=(r,s)=>{const o=s.negate();return r?o:s},i=r=>{const s=Math.ceil(e/r)+1,o=Yn(2,r-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(r,s){let o=n.ZERO,a=r;for(;s>j$;)s&tp&&(o=o.add(a)),a=a.double(),s>>=tp;return o},precomputeWindow(r,s){const{windows:o,windowSize:a}=i(s),l=[];let h=r,c=h;for(let u=0;u<o;u++){c=h,l.push(c);for(let f=1;f<a;f++)c=c.add(h),l.push(c);h=c.double()}return l},wNAF(r,s,o){const{windows:a,windowSize:l}=i(r);let h=n.ZERO,c=n.BASE;const u=BigInt(Yn(2,r)-1),f=Yn(2,r),d=BigInt(r);for(let p=0;p<a;p++){const m=p*l;let g=Number(o&u);o>>=d,g>l&&(g-=f,o+=tp);const O=m,y=m+Math.abs(g)-1,w=p%2!==0,k=g<0;g===0?c=c.add(t(w,s[O])):h=h.add(t(k,s[y]))}return{p:h,f:c}},wNAFCached(r,s,o,a){const l=r._WINDOW_SIZE||1;let h=s.get(r);return h||(h=this.precomputeWindow(r,l),l!==1&&s.set(r,a(h))),this.wNAF(l,h,o)}}}function lw(n){return B$(n.Fp),_a(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(J(Q(Q({},sw(n.n,n.nBitLength)),n),{p:n.Fp.ORDER}))}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function U$(n){const e=lw(n);_a(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:i,a:r}=e;if(t){if(!i.eql(r,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(Q({},e))}const{bytesToNumberBE:X$,hexToBytes:G$}=Q$,Er={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Er;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],i=n.subarray(2,t+2);if(!t||i.length!==t)throw new e("Invalid signature integer: wrong length");if(i[0]&128)throw new e("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:X$(i),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Er,t=typeof n=="string"?G$(n):n;Ta(t);let i=t.length;if(i<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==i-2)throw new e("Invalid signature: incorrect length");const{d:r,l:s}=Er._parseInt(t.subarray(2)),{d:o,l:a}=Er._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(n){const e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,t=h=>{const c=h.toString(16);return c.length&1?`0${c}`:c},i=e(t(n.s)),r=e(t(n.r)),s=i.length/2,o=r.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${r}02${a}${i}`}},pi=BigInt(0),an=BigInt(1);BigInt(2);const cw=BigInt(3);BigInt(4);function F$(n){const e=U$(n),{Fp:t}=e,i=e.toBytes||((p,m,g)=>{const O=m.toAffine();return Ea(Uint8Array.from([4]),t.toBytes(O.x),t.toBytes(O.y))}),r=e.fromBytes||(p=>{const m=p.subarray(1),g=t.fromBytes(m.subarray(0,t.BYTES)),O=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:g,y:O}});function s(p){const{a:m,b:g}=e,O=t.sqr(p),y=t.mul(O,p);return t.add(t.add(y,t.mul(p,m)),g)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&pi<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(p){const{allowedPrivateKeyLengths:m,nByteLength:g,wrapPrivateKey:O,n:y}=e;if(m&&typeof p!="bigint"){if(kr(p)&&(p=Cs(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(g*2,"0")}let w;try{w=typeof p=="bigint"?p:Pr(yn("private key",p,g))}catch(k){throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof p}`)}return O&&(w=Lt(w,y)),a(w),w}const h=new Map;function c(p){if(!(p instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(m,g,O){if(this.px=m,this.py=g,this.pz=O,m==null||!t.isValid(m))throw new Error("x required");if(g==null||!t.isValid(g))throw new Error("y required");if(O==null||!t.isValid(O))throw new Error("z required")}static fromAffine(m){const{x:g,y:O}=m||{};if(!m||!t.isValid(g)||!t.isValid(O))throw new Error("invalid affine point");if(m instanceof u)throw new Error("projective point not allowed");const y=w=>t.eql(w,t.ZERO);return y(g)&&y(O)?u.ZERO:new u(g,O,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const g=t.invertBatch(m.map(O=>O.pz));return m.map((O,y)=>O.toAffine(g[y])).map(u.fromAffine)}static fromHex(m){const g=u.fromAffine(r(yn("pointHex",m)));return g.assertValidity(),g}static fromPrivateKey(m){return u.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:g}=this.toAffine();if(!t.isValid(m)||!t.isValid(g))throw new Error("bad point: x or y not FE");const O=t.sqr(g),y=s(m);if(!t.eql(O,y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(t.isOdd)return!t.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){c(m);const{px:g,py:O,pz:y}=this,{px:w,py:k,pz:x}=m,T=t.eql(t.mul(g,x),t.mul(w,y)),A=t.eql(t.mul(O,x),t.mul(k,y));return T&&A}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:g}=e,O=t.mul(g,cw),{px:y,py:w,pz:k}=this;let x=t.ZERO,T=t.ZERO,A=t.ZERO,S=t.mul(y,y),I=t.mul(w,w),_=t.mul(k,k),R=t.mul(y,w);return R=t.add(R,R),A=t.mul(y,k),A=t.add(A,A),x=t.mul(m,A),T=t.mul(O,_),T=t.add(x,T),x=t.sub(I,T),T=t.add(I,T),T=t.mul(x,T),x=t.mul(R,x),A=t.mul(O,A),_=t.mul(m,_),R=t.sub(S,_),R=t.mul(m,R),R=t.add(R,A),A=t.add(S,S),S=t.add(A,S),S=t.add(S,_),S=t.mul(S,R),T=t.add(T,S),_=t.mul(w,k),_=t.add(_,_),S=t.mul(_,R),x=t.sub(x,S),A=t.mul(_,I),A=t.add(A,A),A=t.add(A,A),new u(x,T,A)}add(m){c(m);const{px:g,py:O,pz:y}=this,{px:w,py:k,pz:x}=m;let T=t.ZERO,A=t.ZERO,S=t.ZERO;const I=e.a,_=t.mul(e.b,cw);let R=t.mul(g,w),C=t.mul(O,k),L=t.mul(y,x),W=t.add(g,O),b=t.add(w,k);W=t.mul(W,b),b=t.add(R,C),W=t.sub(W,b),b=t.add(g,y);let P=t.add(w,x);return b=t.mul(b,P),P=t.add(R,L),b=t.sub(b,P),P=t.add(O,y),T=t.add(k,x),P=t.mul(P,T),T=t.add(C,L),P=t.sub(P,T),S=t.mul(I,b),T=t.mul(_,L),S=t.add(T,S),T=t.sub(C,S),S=t.add(C,S),A=t.mul(T,S),C=t.add(R,R),C=t.add(C,R),L=t.mul(I,L),b=t.mul(_,b),C=t.add(C,L),L=t.sub(R,L),L=t.mul(I,L),b=t.add(b,L),R=t.mul(C,b),A=t.add(A,R),R=t.mul(P,b),T=t.mul(W,T),T=t.sub(T,R),R=t.mul(W,C),S=t.mul(P,S),S=t.add(S,R),new u(T,A,S)}subtract(m){return this.add(m.negate())}is0(){return this.equals(u.ZERO)}wNAF(m){return d.wNAFCached(this,h,m,g=>{const O=t.invertBatch(g.map(y=>y.pz));return g.map((y,w)=>y.toAffine(O[w])).map(u.fromAffine)})}multiplyUnsafe(m){const g=u.ZERO;if(m===pi)return g;if(a(m),m===an)return this;const{endo:O}=e;if(!O)return d.unsafeLadder(this,m);let{k1neg:y,k1:w,k2neg:k,k2:x}=O.splitScalar(m),T=g,A=g,S=this;for(;w>pi||x>pi;)w&an&&(T=T.add(S)),x&an&&(A=A.add(S)),S=S.double(),w>>=an,x>>=an;return y&&(T=T.negate()),k&&(A=A.negate()),A=new u(t.mul(A.px,O.beta),A.py,A.pz),T.add(A)}multiply(m){a(m);let g=m,O,y;const{endo:w}=e;if(w){const{k1neg:k,k1:x,k2neg:T,k2:A}=w.splitScalar(g);let{p:S,f:I}=this.wNAF(x),{p:_,f:R}=this.wNAF(A);S=d.constTimeNegate(k,S),_=d.constTimeNegate(T,_),_=new u(t.mul(_.px,w.beta),_.py,_.pz),O=S.add(_),y=I.add(R)}else{const{p:k,f:x}=this.wNAF(g);O=k,y=x}return u.normalizeZ([O,y])[0]}multiplyAndAddUnsafe(m,g,O){const y=u.BASE,w=(x,T)=>T===pi||T===an||!x.equals(y)?x.multiplyUnsafe(T):x.multiply(T),k=w(this,g).add(w(m,O));return k.is0()?void 0:k}toAffine(m){const{px:g,py:O,pz:y}=this,w=this.is0();m==null&&(m=w?t.ONE:t.inv(y));const k=t.mul(g,m),x=t.mul(O,m),T=t.mul(y,m);if(w)return{x:t.ZERO,y:t.ZERO};if(!t.eql(T,t.ONE))throw new Error("invZ was invalid");return{x:k,y:x}}isTorsionFree(){const{h:m,isTorsionFree:g}=e;if(m===an)return!0;if(g)return g(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:g}=e;return m===an?this:g?g(u,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),i(u,this,m)}toHex(m=!0){return Cs(this.toRawBytes(m))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,d=q$(u,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function V$(n){const e=lw(n);return _a(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(Q({lowS:!0},e))}function H$(n){const e=V$(n),{Fp:t,n:i}=e,r=t.BYTES+1,s=2*t.BYTES+1;function o(b){return pi<b&&b<t.ORDER}function a(b){return Lt(b,i)}function l(b){return ep(b,i)}const{ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:f}=F$(J(Q({},e),{toBytes(b,P,M){const j=P.toAffine(),N=t.toBytes(j.x),X=Ea;return M?X(Uint8Array.from([P.hasEvenY()?2:3]),N):X(Uint8Array.from([4]),N,t.toBytes(j.y))},fromBytes(b){const P=b.length,M=b[0],j=b.subarray(1);if(P===r&&(M===2||M===3)){const N=Pr(j);if(!o(N))throw new Error("Point is not on curve");const X=u(N);let de;try{de=t.sqrt(X)}catch(Ne){const Et=Ne instanceof Error?": "+Ne.message:"";throw new Error("Point is not on curve"+Et)}const we=(de&an)===an;return(M&1)===1!==we&&(de=t.neg(de)),{x:N,y:de}}else if(P===s&&M===4){const N=t.fromBytes(j.subarray(0,t.BYTES)),X=t.fromBytes(j.subarray(t.BYTES,2*t.BYTES));return{x:N,y:X}}else throw new Error(`Point of length ${P} was invalid. Expected ${r} compressed bytes or ${s} uncompressed bytes`)}})),d=b=>Cs(Rs(b,e.nByteLength));function p(b){const P=i>>an;return b>P}function m(b){return p(b)?a(-b):b}const g=(b,P,M)=>Pr(b.slice(P,M));class O{constructor(P,M,j){this.r=P,this.s=M,this.recovery=j,this.assertValidity()}static fromCompact(P){const M=e.nByteLength;return P=yn("compactSignature",P,M*2),new O(g(P,0,M),g(P,M,2*M))}static fromDER(P){const{r:M,s:j}=Er.toSig(yn("DER",P));return new O(M,j)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new O(this.r,this.s,P)}recoverPublicKey(P){const{r:M,s:j,recovery:N}=this,X=A(yn("msgHash",P));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const de=N===2||N===3?M+e.n:M;if(de>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const we=N&1?"03":"02",xe=h.fromHex(we+d(de)),Ne=l(de),Et=a(-X*Ne),zn=a(j*Ne),bn=h.BASE.multiplyAndAddUnsafe(xe,Et,zn);if(!bn)throw new Error("point at infinify");return bn.assertValidity(),bn}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Is(this.toDERHex())}toDERHex(){return Er.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Is(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const y={isValidPrivateKey(b){try{return c(b),!0}catch(P){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const b=aw(e.n);return D$(e.randomBytes(b),e.n)},precompute(b=8,P=h.BASE){return P._setWindowSize(b),P.multiply(BigInt(3)),P}};function w(b,P=!0){return h.fromPrivateKey(b).toRawBytes(P)}function k(b){const P=kr(b),M=typeof b=="string",j=(P||M)&&b.length;return P?j===r||j===s:M?j===2*r||j===2*s:b instanceof h}function x(b,P,M=!0){if(k(b))throw new Error("first arg must be private key");if(!k(P))throw new Error("second arg must be public key");return h.fromHex(P).multiply(c(b)).toRawBytes(M)}const T=e.bits2int||function(b){const P=Pr(b),M=b.length*8-e.nBitLength;return M>0?P>>BigInt(M):P},A=e.bits2int_modN||function(b){return a(T(b))},S=Yd(e.nBitLength);function I(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(pi<=b&&b<S))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Rs(b,e.nByteLength)}function _(b,P,M=R){if(["recovered","canonical"].some(Nr=>Nr in M))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:N}=e;let{lowS:X,prehash:de,extraEntropy:we}=M;X==null&&(X=!0),b=yn("msgHash",b),de&&(b=yn("prehashed msgHash",j(b)));const xe=A(b),Ne=c(P),Et=[I(Ne),I(xe)];if(we!=null&&we!==!1){const Nr=we===!0?N(t.BYTES):we;Et.push(yn("extraEntropy",Nr))}const zn=Ea(...Et),bn=xe;function pm(Nr){const Js=T(Nr);if(!f(Js))return;const N1=l(Js),eo=h.BASE.multiply(Js).toAffine(),vn=a(eo.x);if(vn===pi)return;const to=a(N1*a(bn+vn*Ne));if(to===pi)return;let D1=(eo.x===vn?0:2)|Number(eo.y&an),j1=to;return X&&p(to)&&(j1=m(to),D1^=1),new O(vn,j1,D1)}return{seed:zn,k2sig:pm}}const R={lowS:e.lowS,prehash:!1},C={lowS:e.lowS,prehash:!1};function L(b,P,M=R){const{seed:j,k2sig:N}=_(b,P,M),X=e;return nw(X.hash.outputLen,X.nByteLength,X.hmac)(j,N)}h.BASE._setWindowSize(8);function W(b,P,M,j=C){var eo;const N=b;if(P=yn("msgHash",P),M=yn("publicKey",M),"strict"in j)throw new Error("options.strict was renamed to lowS");const{lowS:X,prehash:de}=j;let we,xe;try{if(typeof N=="string"||kr(N))try{we=O.fromDER(N)}catch(vn){if(!(vn instanceof Er.Err))throw vn;we=O.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){const{r:vn,s:to}=N;we=new O(vn,to)}else throw new Error("PARSE");xe=h.fromHex(M)}catch(vn){if(vn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&we.hasHighS())return!1;de&&(P=e.hash(P));const{r:Ne,s:Et}=we,zn=A(P),bn=l(Et),pm=a(zn*bn),Nr=a(Ne*bn),Js=(eo=h.BASE.multiplyAndAddUnsafe(xe,pm,Nr))==null?void 0:eo.toAffine();return Js?a(Js.x)===Ne:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:x,sign:L,verify:W,ProjectivePoint:h,Signature:O,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W$(n){return{hash:n,hmac:(e,...t)=>Gd(n,e,Cc(...t)),randomBytes:Db}}function z$(n,e){const t=i=>H$(Q(Q({},n),W$(i)));return Object.freeze(J(Q({},t(e)),{create:t}))}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hw=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),uw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Y$=BigInt(1),np=BigInt(2),fw=(n,e)=>(n+e/np)/e;function K$(n){const e=hw,t=BigInt(3),i=BigInt(6),r=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),h=n*n*n%e,c=h*h*n%e,u=on(c,t,e)*c%e,f=on(u,t,e)*c%e,d=on(f,np,e)*h%e,p=on(d,r,e)*d%e,m=on(p,s,e)*p%e,g=on(m,a,e)*m%e,O=on(g,l,e)*g%e,y=on(O,a,e)*m%e,w=on(y,t,e)*c%e,k=on(w,o,e)*p%e,x=on(k,i,e)*h%e,T=on(x,np,e);if(!ip.eql(ip.sqr(T),n))throw new Error("Cannot find square root");return T}const ip=N$(hw,void 0,void 0,{sqrt:K$}),rp=z$({a:BigInt(0),b:BigInt(7),Fp:ip,n:uw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=uw,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Y$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=fw(s*n,e),l=fw(-i*n,e);let h=Lt(n-a*t-l*r,e),c=Lt(-a*i-l*s,e);const u=h>o,f=c>o;if(u&&(h=e-h),f&&(c=e-c),h>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:u,k1:h,k2neg:f,k2:c}}}},ch);BigInt(0),rp.ProjectivePoint;const J$=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:rp},Symbol.toStringTag,{value:"Module"}));var sp;const mi=(sp=rp)!==null&&sp!==void 0?sp:J$,dw=BigInt("0xffffffffffffffff"),Qa=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),eM=mi.CURVE.n/BigInt(2),tM={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var uh;(function(n){n[n.Mainnet=1]="Mainnet",n[n.Goerli=5]="Goerli",n[n.Sepolia=11155111]="Sepolia"})(uh||(uh={}));var Ce;(function(n){n.Chainstart="chainstart",n.Homestead="homestead",n.Dao="dao",n.TangerineWhistle="tangerineWhistle",n.SpuriousDragon="spuriousDragon",n.Byzantium="byzantium",n.Constantinople="constantinople",n.Petersburg="petersburg",n.Istanbul="istanbul",n.MuirGlacier="muirGlacier",n.Berlin="berlin",n.London="london",n.ArrowGlacier="arrowGlacier",n.GrayGlacier="grayGlacier",n.MergeForkIdTransition="mergeForkIdTransition",n.Merge="merge",n.Shanghai="shanghai",n.ShardingForkDev="shardingFork"})(Ce||(Ce={}));var pw;(function(n){n.ProofOfStake="pos",n.ProofOfWork="pow",n.ProofOfAuthority="poa"})(pw||(pw={}));var mw;(function(n){n.Ethash="ethash",n.Clique="clique",n.Casper="casper"})(mw||(mw={}));var yt;(function(n){n.PolygonMainnet="polygon-mainnet",n.PolygonMumbai="polygon-mumbai",n.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",n.ArbitrumOne="arbitrum-one",n.xDaiChain="x-dai-chain",n.OptimisticKovan="optimistic-kovan",n.OptimisticEthereum="optimistic-ethereum"})(yt||(yt={}));var ln;(function(n){n[n.Number=0]="Number",n[n.BigInt=1]="BigInt",n[n.Uint8Array=2]="Uint8Array",n[n.PrefixedHexString=3]="PrefixedHexString"})(ln||(ln={}));const gw=n=>{if(typeof n!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof n}`);return vd(n)?n.slice(2):n};function nM(n){return!n||n==="0x0"?"0x0000000000000000":vd(n)?`0x${gw(n).padStart(16,"0")}`:`0x${n.padStart(16,"0")}`}const Ow=function(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Received an invalid integer type: ${n}`);return`0x${n.toString(16)}`};function iM(n,e=!0){var t,i;const{name:r,config:s,difficulty:o,mixHash:a,gasLimit:l,coinbase:h,baseFeePerGas:c}=n;let{extraData:u,timestamp:f,nonce:d}=n;const p=Number(f),{chainId:m}=s;if(u===""&&(u="0x"),vd(f)||(f=Ow(parseInt(f))),d.length!==18&&(d=nM(d)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const g={name:r,chainId:m,networkId:m,genesis:{timestamp:f,gasLimit:parseInt(l),difficulty:parseInt(o),nonce:d,extraData:u,mixHash:a,coinbase:h,baseFeePerGas:c},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:s.clique!==void 0?{type:"poa",algorithm:"clique",clique:{period:(t=s.clique.period)!==null&&t!==void 0?t:s.clique.blockperiodseconds,epoch:(i=s.clique.epoch)!==null&&i!==void 0?i:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},O={[Ce.Homestead]:{name:"homesteadBlock"},[Ce.Dao]:{name:"daoForkBlock"},[Ce.TangerineWhistle]:{name:"eip150Block"},[Ce.SpuriousDragon]:{name:"eip155Block"},[Ce.Byzantium]:{name:"byzantiumBlock"},[Ce.Constantinople]:{name:"constantinopleBlock"},[Ce.Petersburg]:{name:"petersburgBlock"},[Ce.Istanbul]:{name:"istanbulBlock"},[Ce.MuirGlacier]:{name:"muirGlacierBlock"},[Ce.Berlin]:{name:"berlinBlock"},[Ce.London]:{name:"londonBlock"},[Ce.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:e},[Ce.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[Ce.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},y=Object.keys(O).reduce((x,T)=>(x[O[T].name]=T,x),{}),w=Object.keys(s).filter(x=>y[x]!==void 0&&s[x]!==void 0&&s[x]!==null);if(g.hardforks=w.map(x=>({name:y[x],block:O[y[x]].isTimestamp===!0||typeof s[x]!="number"?null:s[x],timestamp:O[y[x]].isTimestamp===!0&&typeof s[x]=="number"?s[x]:void 0})).filter(x=>x.block!==null||x.timestamp!==void 0),g.hardforks.sort((x,T)=>{var A,S;return((A=x.block)!==null&&A!==void 0?A:1/0)-((S=T.block)!==null&&S!==void 0?S:1/0)}),g.hardforks.sort((x,T)=>{var A,S;return((A=x.timestamp)!==null&&A!==void 0?A:p)-((S=T.timestamp)!==null&&S!==void 0?S:p)}),s.terminalTotalDifficulty!==void 0){const x={name:Ce.Merge,ttd:s.terminalTotalDifficulty,block:null},T=g.hardforks.findIndex(A=>{var S;return((S=O[A.name])===null||S===void 0?void 0:S.postMerge)===!0});T!==-1?g.hardforks.splice(T,0,x):g.hardforks.push(x)}const k=g.hardforks.length>0?g.hardforks.slice(-1)[0]:void 0;return g.hardfork=k==null?void 0:k.name,g.hardforks.unshift({name:Ce.Chainstart,block:0}),g}function rM(n,e,t){try{if(["config","difficulty","gasLimit","alloc"].some(i=>!(i in n)))throw new Error("Invalid format, expected geth genesis fields missing");return e!==void 0&&(n.name=e),iM(n,t)}catch(i){throw new Error(`Error parsing parameters file: ${i.message}`)}}function yw(n){let e=n;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}const sM=function(n){const e=Ow(n);return Qe(`0x${yw(e.slice(2))}`)},Ze=function(n){var e;if(n==null)return new Uint8Array;if(n instanceof Uint8Array)return n;if(((e=n==null?void 0:n.constructor)===null||e===void 0?void 0:e.name)==="Uint8Array"||Array.isArray(n))return Uint8Array.from(n);if(typeof n=="string"){if(!av(n))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${n}`);return Qe(yw(gw(n)))}if(typeof n=="number")return Ze(Je(n));if(typeof n=="bigint"){if(n<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${n}`);let t=n.toString(16);return t.length%2&&(t=`0${t}`),Ze(`0x${t}`)}if(n.toArray)return Uint8Array.from(n.toArray());throw new Error("invalid type")};function Te(n){const e=fe(n);return BigInt(e==="0x"?0:e)}function oM(n){return Ze(`0x${n.toString(16)}`)}const bw=function(n){return new Uint8Array(n).fill(0)},aM=function(n,e,t){const i=bw(e);return n.length<e?(i.set(n,e-n.length),i):n.subarray(-e)};function op(n){if(!Gi(n)){const e=`This method only supports Uint8Array but input was: ${n}`;throw new Error(e)}}const vw=function(n,e){return op(n),aM(n,e)};function lM(n){let e=n[0];for(;n.length>0&&e.toString()==="0";)n=n.slice(1),e=n[0];return n}const fh=function(n){return op(n),lM(n)},Le=n=>`0x${n.toString(16)}`;function Oe(n){return fh(oM(n))}function cM(n,e){return n===BigInt(0)||n===BigInt(1)?n:e===void 0?n-BigInt(27):n-(e*BigInt(2)+BigInt(35))}function hM(n){return n===BigInt(0)||n===BigInt(1)}const ap=function(n,e,t,i,r){const s=cM(e,r);if(!hM(s))throw new Error("Invalid signature v value");return new mi.Signature(Te(t),Te(i)).addRecoveryBit(Number(s)).recoverPublicKey(n).toRawBytes(!1).slice(1)};function $s(n,e){if(n===null)return null;if(n===void 0)return;if(typeof n=="string"&&!av(n))throw new Error(`A string must be provided with a 0x-prefix, given: ${n}`);if(typeof n=="number"&&!Number.isSafeInteger(n))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const t=Ze(n);switch(e){case ln.Uint8Array:return t;case ln.BigInt:return Te(t);case ln.Number:{const i=Te(t);if(i>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(i)}case ln.PrefixedHexString:return fe(t);default:throw new Error("unknown outputType")}}var gi={};Object.defineProperty(gi,"__esModule",{value:!0});var Wt=gi.RLP=gi.utils=gi.decode=gi.encode=void 0;function lp(n){if(Array.isArray(n)){const t=[];let i=0;for(let r=0;r<n.length;r++){const s=lp(n[r]);t.push(s),i+=s.length}return hp(xw(i,192),...t)}const e=Ew(n);return e.length===1&&e[0]<128?e:hp(xw(e.length,128),e)}gi.encode=lp;function Ms(n,e,t){if(t>n.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return n.slice(e,t)}function ww(n){if(n[0]===0)throw new Error("invalid RLP: extra zeros");return kw(Aw(n))}function xw(n,e){if(n<56)return Uint8Array.from([n+e]);const t=up(n),i=t.length/2,r=up(e+55+i);return Uint8Array.from(dh(r+t))}function Sw(n,e=!1){if(typeof n=="undefined"||n===null||n.length===0)return Uint8Array.from([]);const t=Ew(n),i=cp(t);if(e)return i;if(i.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return i.data}gi.decode=Sw;function cp(n){let e,t,i,r,s;const o=[],a=n[0];if(a<=127)return{data:n.slice(0,1),remainder:n.slice(1)};if(a<=183){if(e=a-127,a===128?i=Uint8Array.from([]):i=Ms(n,1,e),e===2&&i[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:i,remainder:n.slice(e)}}else if(a<=191){if(t=a-182,n.length-1<t)throw new Error("invalid RLP: not enough bytes for string length");if(e=ww(Ms(n,1,t)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return i=Ms(n,t,e+t),{data:i,remainder:n.slice(e+t)}}else if(a<=247){for(e=a-191,r=Ms(n,1,e);r.length;)s=cp(r),o.push(s.data),r=s.remainder;return{data:o,remainder:n.slice(e)}}else{if(t=a-246,e=ww(Ms(n,1,t)),e<56)throw new Error("invalid RLP: encoded list too short");const l=t+e;if(l>n.length)throw new Error("invalid RLP: total length is larger than the data");for(r=Ms(n,t,l);r.length;)s=cp(r),o.push(s.data),r=s.remainder;return{data:o,remainder:n.slice(l)}}}const uM=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Aw(n){let e="";for(let t=0;t<n.length;t++)e+=uM[n[t]];return e}function kw(n){const e=Number.parseInt(n,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function dh(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){const i=t*2;e[t]=kw(n.slice(i,i+2))}return e}function hp(...n){if(n.length===1)return n[0];const e=n.reduce((i,r)=>i+r.length,0),t=new Uint8Array(e);for(let i=0,r=0;i<n.length;i++){const s=n[i];t.set(s,r),r+=s.length}return t}function Pw(n){return new TextEncoder().encode(n)}function up(n){if(n<0)throw new Error("Invalid integer as argument, must be unsigned!");const e=n.toString(16);return e.length%2?`0${e}`:e}function fM(n){return n.length%2?`0${n}`:n}function Tw(n){return n.length>=2&&n[0]==="0"&&n[1]==="x"}function dM(n){return typeof n!="string"?n:Tw(n)?n.slice(2):n}function Ew(n){if(n instanceof Uint8Array)return n;if(typeof n=="string")return Tw(n)?dh(fM(dM(n))):Pw(n);if(typeof n=="number"||typeof n=="bigint")return n?dh(up(n)):Uint8Array.from([]);if(n==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof n)}gi.utils={bytesToHex:Aw,concatBytes:hp,hexToBytes:dh,utf8ToBytes:Pw},Wt=gi.RLP={encode:lp,decode:Sw};var _w={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(n){(function(e){e(typeof DO_NOT_EXPORT_CRC=="undefined"?n:{})})(function(e){e.version="1.2.2";function t(){for(var S=0,I=new Array(256),_=0;_!=256;++_)S=_,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,I[_]=S;return typeof Int32Array!="undefined"?new Int32Array(I):I}var i=t();function r(S){var I=0,_=0,R=0,C=typeof Int32Array!="undefined"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)C[R]=S[R];for(R=0;R!=256;++R)for(_=S[R],I=256+R;I<4096;I+=256)_=C[I]=_>>>8^S[_&255];var L=[];for(R=1;R!=16;++R)L[R-1]=typeof Int32Array!="undefined"?C.subarray(R*256,R*256+256):C.slice(R*256,R*256+256);return L}var s=r(i),o=s[0],a=s[1],l=s[2],h=s[3],c=s[4],u=s[5],f=s[6],d=s[7],p=s[8],m=s[9],g=s[10],O=s[11],y=s[12],w=s[13],k=s[14];function x(S,I){for(var _=I^-1,R=0,C=S.length;R<C;)_=_>>>8^i[(_^S.charCodeAt(R++))&255];return~_}function T(S,I){for(var _=I^-1,R=S.length-15,C=0;C<R;)_=k[S[C++]^_&255]^w[S[C++]^_>>8&255]^y[S[C++]^_>>16&255]^O[S[C++]^_>>>24]^g[S[C++]]^m[S[C++]]^p[S[C++]]^d[S[C++]]^f[S[C++]]^u[S[C++]]^c[S[C++]]^h[S[C++]]^l[S[C++]]^a[S[C++]]^o[S[C++]]^i[S[C++]];for(R+=15;C<R;)_=_>>>8^i[(_^S[C++])&255];return~_}function A(S,I){for(var _=I^-1,R=0,C=S.length,L=0,W=0;R<C;)L=S.charCodeAt(R++),L<128?_=_>>>8^i[(_^L)&255]:L<2048?(_=_>>>8^i[(_^(192|L>>6&31))&255],_=_>>>8^i[(_^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,W=S.charCodeAt(R++)&1023,_=_>>>8^i[(_^(240|L>>8&7))&255],_=_>>>8^i[(_^(128|L>>2&63))&255],_=_>>>8^i[(_^(128|W>>6&15|(L&3)<<4))&255],_=_>>>8^i[(_^(128|W&63))&255]):(_=_>>>8^i[(_^(224|L>>12&15))&255],_=_>>>8^i[(_^(128|L>>6&63))&255],_=_>>>8^i[(_^(128|L&63))&255]);return~_}e.table=i,e.bstr=x,e.buf=T,e.str=A})})(_w);const pM=_d(_w),mM={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},gM={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},OM={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},Bs={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},yM={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:bM}=pM;class et extends Qd{static custom(e,t={}){var i;const r=(i=t.baseChain)!==null&&i!==void 0?i:"mainnet",s=Object.assign({},et._getChainParams(r));if(s.name="custom-chain",typeof e!="string")return new et(Object.assign({chain:Object.assign(Object.assign({},s),e)},t));if(e===yt.PolygonMainnet)return et.custom({name:yt.PolygonMainnet,chainId:137,networkId:137},t);if(e===yt.PolygonMumbai)return et.custom({name:yt.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===yt.ArbitrumRinkebyTestnet)return et.custom({name:yt.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===yt.ArbitrumOne)return et.custom({name:yt.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===yt.xDaiChain)return et.custom({name:yt.xDaiChain,chainId:100,networkId:100},t);if(e===yt.OptimisticKovan)return et.custom({name:yt.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:Ce.Berlin},t));if(e===yt.OptimisticEthereum)return et.custom({name:yt.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:Ce.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:i,genesisHash:r,hardfork:s,mergeForkIdPostMerge:o}){var a;const l=rM(e,t,o),h=new et({chain:(a=l.name)!==null&&a!==void 0?a:"custom",customChains:[l],eips:i,hardfork:s!=null?s:l.hardfork});return r!==void 0&&h.setForkHashes(r),h}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,t){let i=e;const r=this._getInitializedChains(t);if(typeof i=="number"||typeof i=="bigint"){if(i=i.toString(),r.names[i]){const s=r.names[i];return r[s]}throw new Error(`Chain with ID ${i} not supported`)}if(r[i]!==void 0)return r[i];throw new Error(`Chain with name ${i} not supported`)}constructor(e){var t,i;super(),this._eips=[],this._customChains=(t=e.customChains)!==null&&t!==void 0?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=(i=this._chainParams.defaultHardfork)!==null&&i!==void 0?i:Ce.Merge,this.HARDFORK_CHANGES=this.hardforks().map(r=>[r.name,yM[r.name]]),this._hardfork=this.DEFAULT_HARDFORK,e.hardfork!==void 0&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if(typeof e=="number"||typeof e=="bigint"||typeof e=="string")this._chainParams=et._getChainParams(e,this._customChains);else if(typeof e=="object"){if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const i of t)if(!(i in e))throw new Error(`Missing required chain parameter: ${i}`);this._chainParams=e}else throw new Error("Wrong input format");for(const t of this.hardforks())if(t.block===void 0)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const i of this.HARDFORK_CHANGES)i[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,i){const r=$s(e,ln.BigInt),s=$s(t,ln.BigInt),o=$s(i,ln.Number),a=this.hardforks().filter(d=>d.block!==null||d.ttd!==null&&d.ttd!==void 0||d.timestamp!==void 0),l=a.findIndex(d=>d.ttd!==null&&d.ttd!==void 0);if(a.slice(l+1).findIndex(d=>d.ttd!==null&&d.ttd!==void 0)>=0)throw Error("More than one merge hardforks found with ttd specified");let c=a.findIndex(d=>d.block!==null&&d.block>r||o!==void 0&&Number(d.timestamp)>o);if(c===-1)c=a.length;else if(c===0)throw Error("Must have at least one hardfork at block 0");if(o===void 0){const d=a.slice(0,c).reverse().findIndex(p=>p.block!==null||p.ttd!==void 0);c-=d}if(c-=1,a[c].block===null&&a[c].timestamp===void 0)(s==null||BigInt(a[c].ttd)>s)&&(c-=1);else if(l>=0&&s!==void 0&&s!==null){if(c>=l&&BigInt(a[l].ttd)>s)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<l&&BigInt(a[l].ttd)<=s)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const u=c;for(;c<a.length-1&&!(a[c].block!==a[c+1].block||a[c].timestamp!==a[c+1].timestamp);c+=1);if(o){if(a.slice(0,u).reduce((m,g)=>{var O;return Math.max(Number((O=g.timestamp)!==null&&O!==void 0?O:"0"),m)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(a.slice(c+1).reduce((m,g)=>{var O;return Math.min(Number((O=g.timestamp)!==null&&O!==void 0?O:o),m)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return a[c].name}setHardforkByBlockNumber(e,t,i){const r=this.getHardforkByBlockNumber(e,t,i);return this.setHardfork(r),r}_getHardfork(e){const t=this.hardforks();for(const i of t)if(i.name===e)return i;return null}setEIPs(e=[]){for(const t of e){if(!(t in Bs))throw new Error(`${t} not supported`);const i=this.gteHardfork(Bs[t].minimumHardfork);if(!i)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${i}`);if(Bs[t].requiredEIPs!==void 0){for(const r of Bs[t].requiredEIPs)if(!(e.includes(r)||this.isActivatedEIP(r)))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}}this._eips=e}param(e,t){let i;for(const r of this._eips)if(i=this.paramByEIP(e,t,r),i!==void 0)return i;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,i){let r=null;for(const s of this.HARDFORK_CHANGES){if("eips"in s[1]){const o=s[1].eips;for(const a of o){const l=this.paramByEIP(e,t,a);r=typeof l=="bigint"?l:r}}else{if(s[1][e]===void 0)throw new Error(`Topic ${e} not defined`);s[1][e][t]!==void 0&&(r=s[1][e][t].v)}if(s[0]===i)break}return BigInt(r!=null?r:0)}paramByEIP(e,t,i){if(!(i in Bs))throw new Error(`${i} not supported`);const r=Bs[i];if(!(e in r))throw new Error(`Topic ${e} not defined`);if(r[e][t]===void 0)return;const s=r[e][t].v;return BigInt(s)}paramByBlock(e,t,i,r,s){const o=this.getHardforkByBlockNumber(i,r,s);return this.paramByHardfork(e,t,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const i=t[1];if(this.gteHardfork(i.name)&&"eips"in i&&i.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const i=$s(t,ln.BigInt),r=e!=null?e:this._hardfork,s=this.hardforkBlock(r);return typeof s=="bigint"&&s!==BigInt(0)&&i>=s}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const i=e!=null?e:this._hardfork,r=this.hardforks();let s=-1,o=-1,a=0;for(const l of r)l.name===i&&(s=a),l.name===t&&(o=a),a+=1;return s>=o&&o!==-1}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const i=e!=null?e:this._hardfork,r=(t=this._getHardfork(i))===null||t===void 0?void 0:t.block;return r==null?null:BigInt(r)}hardforkTimestamp(e){var t;const i=e!=null?e:this._hardfork,r=(t=this._getHardfork(i))===null||t===void 0?void 0:t.timestamp;return r==null?null:BigInt(r)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const i=t[1];if("eips"in i&&i.eips.includes(e))return this.hardforkBlock(typeof t[0]=="number"?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const i=e!=null?e:this._hardfork,r=(t=this._getHardfork(i))===null||t===void 0?void 0:t.ttd;return r==null?null:BigInt(r)}isHardforkBlock(e,t){const i=$s(e,ln.BigInt),r=t!=null?t:this._hardfork,s=this.hardforkBlock(r);return typeof s=="bigint"&&s!==BigInt(0)?s===i:!1}nextHardforkBlockOrTimestamp(e){var t,i,r;const s=(t=e)!==null&&t!==void 0?t:this._hardfork,o=this.hardforks();let a=o.findIndex(u=>u.name===s);if(s===Ce.Merge&&(a-=1),a<0)return null;let l=(i=o[a].timestamp)!==null&&i!==void 0?i:o[a].block;l=l!=null?Number(l):null;const h=o.slice(a+1).find(u=>{var f;let d=(f=u.timestamp)!==null&&f!==void 0?f:u.block;return d=d!=null?Number(d):null,u.name!==Ce.Merge&&d!==null&&d!==void 0&&d!==l});if(h===void 0)return null;const c=(r=h.timestamp)!==null&&r!==void 0?r:h.block;return c==null?null:BigInt(c)}nextHardforkBlock(e){var t;const i=(t=e)!==null&&t!==void 0?t:this._hardfork;let r=this.hardforkBlock(i);if(r===null&&i===Ce.Merge){const o=this.hardforks(),a=o.findIndex(l=>l.ttd!==null&&l.ttd!==void 0);if(a<0)throw Error("Merge hardfork should have been found");r=this.hardforkBlock(o[a-1].name)}return r===null?null:this.hardforks().reduce((o,a)=>{const l=BigInt(a.block===null||a.ttd!==void 0&&a.ttd!==null?0:a.block);return l>r&&o===null?l:o},null)}isNextHardforkBlock(e,t){const i=$s(e,ln.BigInt),r=t!=null?t:this._hardfork,s=this.nextHardforkBlock(r);return s===null?!1:s===i}_calcForkHash(e,t){let i=new Uint8Array,r=0;for(const a of this.hardforks()){const{block:l,timestamp:h,name:c}=a;let u=h!=null?h:l;if(u=u!==null?Number(u):null,typeof u=="number"&&u!==0&&u!==r&&c!==Ce.Merge){const f=Qe(u.toString(16).padStart(16,"0"));i=Tt(i,f),r=u}if(a.name===e)break}const s=Tt(t,i);return fe(sM(bM(s)>>>0))}forkHash(e,t){const i=e!=null?e:this._hardfork,r=this._getHardfork(i);if(r===null||(r==null?void 0:r.block)===null&&(r==null?void 0:r.timestamp)===void 0&&(r==null?void 0:r.ttd)===void 0){const s="No fork hash calculation possible for future hardfork";throw new Error(s)}if((r==null?void 0:r.forkHash)!==null&&(r==null?void 0:r.forkHash)!==void 0)return r.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(i,t)}hardforkForForkHash(e){const t=this.hardforks().filter(i=>i.forkHash===e);return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const i of this.hardforks()){const r=(t=i.timestamp)!==null&&t!==void 0?t:i.block;(i.forkHash===null||i.forkHash===void 0)&&(r!=null||typeof i.ttd!="undefined")&&(i.forkHash=this.forkHash(i.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const i of this.HARDFORK_CHANGES)if("consensus"in i[1]&&(t=i[1].consensus.type),i[0]===e)break;return t!=null?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const i of this.HARDFORK_CHANGES)if("consensus"in i[1]&&(t=i[1].consensus.algorithm),i[0]===e)break;return t!=null?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let i;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(i=r[1].consensus[r[1].consensus.algorithm]),r[0]===t)break;return(e=i!=null?i:this._chainParams.consensus[this.consensusAlgorithm()])!==null&&e!==void 0?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[r,s]of Object.entries(uh))t[s]=r.toLowerCase();const i={mainnet:gM,goerli:mM,sepolia:OM};if(e)for(const r of e){const{name:s}=r;t[r.chainId.toString()]=s,i[s]=r}return i.names=t,i}}var Vn;(function(n){n[n.EIP155ReplayProtection=155]="EIP155ReplayProtection",n[n.EIP1559FeeMarket=1559]="EIP1559FeeMarket",n[n.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",n[n.EIP2930AccessLists=2930]="EIP2930AccessLists"})(Vn||(Vn={}));function vM(n){if(n.length===0)return!0;const e=n[0];return!!Array.isArray(e)}function wM(n){return!vM(n)}class Zs{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new Zs(bw(20))}equals(e){return Wc(this.buf,e.buf)}isZero(){return this.equals(Zs.zero())}toString(){return fe(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let i=e;if(op(i),t&&i.length!==64&&(i=mi.ProjectivePoint.fromHex(i).toRawBytes(!1).slice(1)),i.length!==64)throw new Error("Expected pubKey to be of length 64");return kt(i).slice(-20)}}const xM=(n,e)=>{const t=n.param("vm","maxInitCodeSize");if(t&&BigInt(e)>t)throw new Error(`the initcode size of this transaction is too large: it is ${e} while the max is ${n.param("vm","maxInitCodeSize")}`)},Qw=n=>{let e,t;if(wM(n)){e=n;const i=[];for(let r=0;r<n.length;r+=1){const s=n[r],o=Ze(s.address),a=[];for(let l=0;l<s.storageKeys.length;l+=1)a.push(Ze(s.storageKeys[l]));i.push([o,a])}t=i}else{t=n!=null?n:[];const i=[];for(let r=0;r<t.length;r+=1){const s=t[r],o=fe(s[0]),a=[];for(let h=0;h<s[1].length;h+=1)a.push(fe(s[1][h]));const l={address:o,storageKeys:a};i.push(l)}e=i}return{AccessListJSON:e,accessList:t}},Cw=n=>{for(let e=0;e<n.length;e+=1){const t=n[e],i=t[0],r=t[1];if(t[2]!==void 0)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(i.length!==20)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let s=0;s<r.length;s+=1)if(r[s].length!==32)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},Iw=n=>{const e=[];for(let t=0;t<n.length;t+=1){const i=n[t],r={address:fe(vw(i[0],20)),storageKeys:[]},s=i&&i[1];for(let o=0;o<s.length;o+=1){const a=s[o];r.storageKeys.push(fe(vw(a,32)))}e.push(r)}return e},Rw=(n,e)=>{const t=e.param("gasPrices","accessListStorageKeyCost"),i=e.param("gasPrices","accessListAddressCost");let r=0;for(let o=0;o<n.length;o+=1){const l=n[o][1];r+=l.length}return n.length*Number(i)+r*Number(t)};class Ls{constructor(e,t){var i,r;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=uh.Mainnet,this.DEFAULT_HARDFORK=Ce.Merge;const{nonce:s,gasLimit:o,to:a,value:l,data:h,v:c,r:u,s:f,type:d}=e;this._type=Number(Te(Ze(d))),this.txOptions=t;const p=Ze(a===""?"0x":a),m=Ze(c===""?"0x":c),g=Ze(u===""?"0x":u),O=Ze(f===""?"0x":f);this.nonce=Te(Ze(s===""?"0x":s)),this.gasLimit=Te(Ze(o===""?"0x":o)),this.to=p.length>0?new Zs(p):void 0,this.value=Te(Ze(l===""?"0x":l)),this.data=Ze(h===""?"0x":h),this.v=m.length>0?Te(m):void 0,this.r=g.length>0?Te(g):void 0,this.s=O.length>0?Te(O):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=this.to===void 0||this.to===null,w=(i=t.allowUnlimitedInitCodeSize)!==null&&i!==void 0?i:!1,k=(r=t.common)!==null&&r!==void 0?r:this._getCommon();y&&k.isActivatedEIP(3860)&&!w&&xM(k,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:t.length===0}_validateYParity(){const{v:e}=this;if(e!==void 0&&e!==BigInt(0)&&e!==BigInt(1)){const t=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==void 0&&e>eM){const t=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const i=this.common.param("gasPrices","txCreation");i&&(t+=i)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let i=BigInt(0);for(let r=0;r<this.data.length;r+=1)this.data[r]===0?i+=e:i+=t;if((this.to===void 0||this.to===null)&&this.common.isActivatedEIP(3860)){const r=BigInt(Math.ceil(this.data.length/32)),s=this.common.param("gasPrices","initCodeWordCost")*r;i+=s}return i}toCreationAddress(){return this.to===void 0||this.to.buf.length===0}isSigned(){const{v:e,r:t,s:i}=this;return!(e===void 0||t===void 0||i===void 0)}verifySignature(){try{const e=this.getSenderPublicKey();return fh(e).length!==0}catch(e){return!1}}getSenderAddress(){return new Zs(Zs.publicToAddress(this.getSenderPublicKey()))}sign(e){if(e.length!==32){const l=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(l)}let t=!1;this.type===0&&this.common.gteHardfork("spuriousDragon")&&!this.supports(Vn.EIP155ReplayProtection)&&(this.activeCapabilities.push(Vn.EIP155ReplayProtection),t=!0);const i=this.getMessageToSign(!0),{v:r,r:s,s:o}=this._ecsign(i,e),a=this._processSignature(r,s,o);if(t){const l=this.activeCapabilities.indexOf(Vn.EIP155ReplayProtection);l>-1&&this.activeCapabilities.splice(l,1)}return a}_getCommon(e,t){var i,r,s,o;if(t!==void 0){const a=Te(Ze(t));if(e){if(e.chainId()!==a){const l=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(l)}return e.copy()}return et.isSupportedChainId(a)?new et({chain:a,hardfork:this.DEFAULT_HARDFORK}):et.custom({name:"custom-chain",networkId:a,chainId:a},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if(e!=null&&e.copy&&typeof(e==null?void 0:e.copy)=="function")return e.copy();if(e){const a=typeof e.hardfork=="function"?e.hardfork():e.hardfork;return et.custom({name:"custom-chain",networkId:e.networkId?e.networkId():(r=BigInt((i=e.customChain)===null||i===void 0?void 0:i.networkId))!==null&&r!==void 0?r:void 0,chainId:e.chainId?e.chainId():(o=BigInt((s=e.customChain)===null||s===void 0?void 0:s.chainId))!==null&&o!==void 0?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:a||this.DEFAULT_HARDFORK})}return new et({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,i=!1){for(const[r,s]of Object.entries(e))switch(t){case 64:if(i){if(s!==void 0&&s>=dw){const o=this._errorMsg(`${r} cannot equal or exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>dw){const o=this._errorMsg(`${r} cannot exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(o)}break;case 256:if(i){if(s!==void 0&&s>=Qa){const o=this._errorMsg(`${r} cannot equal or exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}}else if(s!==void 0&&s>Qa){const o=this._errorMsg(`${r} cannot exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(o)}break;default:{const o=this._errorMsg("unimplemented bits value");throw new Error(o)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[i,r]of Object.entries(e))if(t.includes(i)&&Array.isArray(r))throw new Error(`${i} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?fe(this.hash()):"not available (unsigned)"}catch(s){e="error"}let t="";try{t=this.isSigned().toString()}catch(s){e="error"}let i="";try{i=this.common.hardfork()}catch(s){i="error"}let r=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return r+=`signed=${t} hf=${i}`,r}_ecsign(e,t,i){const r=mi.sign(e,t),s=r.toCompactRawBytes(),o=s.subarray(0,32),a=s.subarray(32,64),l=i===void 0?BigInt(r.recovery+27):BigInt(r.recovery+35)+BigInt(i)*BigInt(2);return{r:o,s:a,v:l}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const fp=2,dp=Qe(fp.toString(16).padStart(2,"0"));class _r extends Ls{static fromTxData(e,t={}){return new _r(e,t)}static fromSerializedTx(e,t={}){if(!Wc(e.subarray(0,1),dp))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${fp}, received: ${fe(e.subarray(0,1))}`);const i=Wt.decode(e.subarray(1));if(!Array.isArray(i))throw new Error("Invalid serialized tx input: must be array");return _r.fromValuesArray(i,t)}static fromValuesArray(e,t={}){if(e.length!==9&&e.length!==12)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[i,r,s,o,a,l,h,c,u,f,d,p]=e;return this._validateNotArray({chainId:i,v:f}),wd({nonce:r,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,value:h,v:f,r:d,s:p}),new _r({chainId:Te(i),nonce:r,maxPriorityFeePerGas:s,maxFeePerGas:o,gasLimit:a,to:l,value:h,data:c,accessList:u!=null?u:[],v:f!==void 0?Te(f):void 0,r:d,s:p},t)}constructor(e,t={}){var i;super(Object.assign(Object.assign({},e),{type:fp}),t),this.DEFAULT_HARDFORK="london";const{chainId:r,accessList:s,maxFeePerGas:o,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const l=Qw(s!=null?s:[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,Cw(this.accessList),this.maxFeePerGas=Te(Ze(o===""?"0x":o)),this.maxPriorityFeePerGas=Te(Ze(a===""?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),Ls._validateNotArray(e),this.gasLimit*this.maxFeePerGas>Qa){const c=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(c)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const c=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(c)}this._validateYParity(),this._validateHighS(),((i=t==null?void 0:t.freeze)!==null&&i!==void 0?i:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(Rw(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,i=this.maxFeePerGas-e,s=(t<i?t:i)+e;return this.gasLimit*s+this.value}raw(){return[Oe(this.chainId),Oe(this.nonce),Oe(this.maxPriorityFeePerGas),Oe(this.maxFeePerGas),Oe(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Oe(this.value),this.data,this.accessList,this.v!==void 0?Oe(this.v):Uint8Array.from([]),this.r!==void 0?Oe(this.r):Uint8Array.from([]),this.s!==void 0?Oe(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Tt(dp,Wt.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),i=Tt(dp,Wt.encode(t));return e?kt(i):i}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kt(this.serialize())),this.cache.hash):kt(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r:i,s:r}=this;this._validateHighS();try{return ap(e,t+BigInt(27),Oe(i),Oe(r))}catch(s){const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,i){const r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return _r.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:Te(t),s:Te(i)},r)}toJSON(){const e=Iw(this.accessList);return{chainId:Le(this.chainId),nonce:Le(this.nonce),maxPriorityFeePerGas:Le(this.maxPriorityFeePerGas),maxFeePerGas:Le(this.maxFeePerGas),gasLimit:Le(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Le(this.value),data:fe(this.data),accessList:e,v:this.v!==void 0?Le(this.v):void 0,r:this.r!==void 0?Le(this.r):void 0,s:this.s!==void 0?Le(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const pp=1,mp=Qe(pp.toString(16).padStart(2,"0"));class Qr extends Ls{static fromTxData(e,t={}){return new Qr(e,t)}static fromSerializedTx(e,t={}){if(!Wc(e.subarray(0,1),mp))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${pp}, received: ${fe(e.subarray(0,1))}`);const i=Wt.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(i))throw new Error("Invalid serialized tx input: must be array");return Qr.fromValuesArray(i,t)}static fromValuesArray(e,t={}){if(e.length!==8&&e.length!==11)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[i,r,s,o,a,l,h,c,u,f,d]=e;this._validateNotArray({chainId:i,v:u}),wd({nonce:r,gasPrice:s,gasLimit:o,value:l,v:u,r:f,s:d});const p=[];return new Qr({chainId:Te(i),nonce:r,gasPrice:s,gasLimit:o,to:a,value:l,data:h,accessList:c!=null?c:p,v:u!==void 0?Te(u):void 0,r:f,s:d},t)}constructor(e,t={}){var i;super(Object.assign(Object.assign({},e),{type:pp}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:r,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=Qw(s!=null?s:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,Cw(this.accessList),this.gasPrice=Te(Ze(o===""?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),Ls._validateNotArray(e),this.gasPrice*this.gasLimit>Qa){const h=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(h)}this._validateYParity(),this._validateHighS(),((i=t==null?void 0:t.freeze)!==null&&i!==void 0?i:!0)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(Rw(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[Oe(this.chainId),Oe(this.nonce),Oe(this.gasPrice),Oe(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Oe(this.value),this.data,this.accessList,this.v!==void 0?Oe(this.v):Uint8Array.from([]),this.r!==void 0?Oe(this.r):Uint8Array.from([]),this.s!==void 0?Oe(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Tt(mp,Wt.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),i=Tt(mp,Wt.encode(t));return e?kt(i):i}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kt(this.serialize())),this.cache.hash):kt(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const s=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(s)}const e=this.getMessageToVerifySignature(),{v:t,r:i,s:r}=this;this._validateHighS();try{return ap(e,t+BigInt(27),Oe(i),Oe(r))}catch(s){const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,i){const r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Qr.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:Te(t),s:Te(i)},r)}toJSON(){const e=Iw(this.accessList);return{chainId:Le(this.chainId),nonce:Le(this.nonce),gasPrice:Le(this.gasPrice),gasLimit:Le(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Le(this.value),data:fe(this.data),accessList:e,v:this.v!==void 0?Le(this.v):void 0,r:this.r!==void 0?Le(this.r):void 0,s:this.s!==void 0?Le(this.s):void 0}}errorStr(){var e,t;let i=this._getSharedErrorPostfix();return i+=` gasPrice=${this.gasPrice} accessListCount=${(t=(e=this.accessList)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}`,i}_errorMsg(e){return`${e} (${this.errorStr()})`}}const SM=0;function $w(n,e){const t=Number(n),i=Number(e)*2;return t===i+35||t===i+36}class Ki extends Ls{static fromTxData(e,t={}){return new Ki(e,t)}static fromSerializedTx(e,t={}){const i=Wt.decode(e);if(!Array.isArray(i))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(i,t)}static fromValuesArray(e,t={}){if(e.length!==6&&e.length!==9)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[i,r,s,o,a,l,h,c,u]=e;return wd({nonce:i,gasPrice:r,gasLimit:s,value:a,v:h,r:c,s:u}),new Ki({nonce:i,gasPrice:r,gasLimit:s,to:o,value:a,data:l,v:h,r:c,s:u},t)}constructor(e,t={}){var i;if(super(Object.assign(Object.assign({},e),{type:SM}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=Te(Ze(e.gasPrice===""?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>Qa){const s=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(s)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),Ls._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?$w(this.v,this.common.chainId())&&this.activeCapabilities.push(Vn.EIP155ReplayProtection):this.activeCapabilities.push(Vn.EIP155ReplayProtection)),((i=t==null?void 0:t.freeze)!==null&&i!==void 0?i:!0)&&Object.freeze(this)}raw(){return[Oe(this.nonce),Oe(this.gasPrice),Oe(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Oe(this.value),this.data,this.v!==void 0?Oe(this.v):Uint8Array.from([]),this.r!==void 0?Oe(this.r):Uint8Array.from([]),this.s!==void 0?Oe(this.s):Uint8Array.from([])]}serialize(){return Wt.encode(this.raw())}_getMessageToSign(){const e=[Oe(this.nonce),Oe(this.gasPrice),Oe(this.gasLimit),this.to!==void 0?this.to.buf:Uint8Array.from([]),Oe(this.value),this.data];return this.supports(Vn.EIP155ReplayProtection)&&(e.push(Ze(this.common.chainId())),e.push(fh(Ze(0))),e.push(fh(Ze(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?kt(Wt.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=kt(Wt.encode(this.raw()))),this.cache.hash):kt(Wt.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const t=this._errorMsg("This transaction is not signed");throw new Error(t)}const e=this._getMessageToSign();return kt(Wt.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:i,s:r}=this;this._validateHighS();try{return ap(e,t,Oe(i),Oe(r),this.supports(Vn.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(s){const o=this._errorMsg("Invalid Signature");throw new Error(o)}}_processSignature(e,t,i){let r=e;this.supports(Vn.EIP155ReplayProtection)&&(r+=this.common.chainId()*BigInt(2)+BigInt(8));const s=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Ki.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:r,r:Te(t),s:Te(i)},s)}toJSON(){return{nonce:Le(this.nonce),gasPrice:Le(this.gasPrice),gasLimit:Le(this.gasLimit),to:this.to!==void 0?this.to.toString():void 0,value:Le(this.value),data:fe(this.data),v:this.v!==void 0?Le(this.v):void 0,r:this.r!==void 0?Le(this.r):void 0,s:this.s!==void 0?Le(this.s):void 0}}_validateTxV(e,t){let i;const r=e!==void 0?Number(e):void 0;if(r!==void 0&&r<37&&r!==27&&r!==28)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${r}`);if(r!==void 0&&r!==0&&(!t||t.gteHardfork("spuriousDragon"))&&r!==27&&r!==28)if(t){if(!$w(BigInt(r),t.chainId()))throw new Error(`Incompatible EIP155-based V ${r} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let s;(r-35)%2===0?s=35:s=36,i=BigInt(r-s)/BigInt(2)}return this._getCommon(t,i)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const gp=new Map;class Cr{constructor(){}static typeToInt(e){return Number(Te(Ze(e)))}static registerTransactionType(e,t){const i=Cr.typeToInt(e);gp.set(i,t)}static fromTxData(e,t={}){if(!("type"in e)||e.type===void 0)return Ki.fromTxData(e,t);const i=Cr.typeToInt(e.type);if(i===0)return Ki.fromTxData(e,t);if(i===1)return Qr.fromTxData(e,t);if(i===2)return _r.fromTxData(e,t);const r=gp.get(i);if(r!=null&&r.fromTxData)return r.fromTxData(e,t);throw new Error(`Tx instantiation with type ${i} not supported`)}static fromSerializedData(e,t={}){if(e[0]<=127)switch(e[0]){case 1:return Qr.fromSerializedTx(e,t);case 2:return _r.fromSerializedTx(e,t);default:{const i=gp.get(Number(e[0]));if(i!=null&&i.fromSerializedTx)return i.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}else return Ki.fromSerializedTx(e,t)}static fromBlockBodyData(e,t={}){if(Gi(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return Ki.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var ph=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const Ns=(n,e)=>{let t;if(!e&&typeof n=="string"&&Se(n)&&n.length!==66)throw new fb;try{t=Gi(n)?n:Un(n)}catch(i){throw new D2}if(!e&&t.byteLength!==32)throw new fb;return t},Op=(n,e=!1)=>{const t=Se(n)?n:On(n),i=Qe(t),r=Qe(pv(`Ethereum Signed Message:
${i.byteLength}`)),s=e?i:Tt(r,i);return Ht(s)},AM=(n,e)=>{const t=Ns(e),i=mi.sign(n.substring(2),t),r=i.toCompactRawBytes(),s=i.r.toString(16).padStart(64,"0"),o=i.s.toString(16).padStart(64,"0"),a=i.recovery+27;return{messageHash:n,v:Je(a),r:`0x${s}`,s:`0x${o}`,signature:`${fe(r)}${a.toString(16)}`}},Mw=(n,e)=>{const t=Op(n),{messageHash:i,v:r,r:s,s:o,signature:a}=AM(t,e);return{message:n,messageHash:i,v:r,r:s,s:o,signature:a}},kM=(n,e)=>ph(void 0,void 0,void 0,function*(){const t=n.sign(Qe(e));if(E(t.v)||E(t.r)||E(t.s))throw new sd("Signer Error");const i=t.validate(!0);if(i.length>0){let o="Signer Error ";for(const a of i)o+=`${o} ${a}.`;throw new sd(o)}const r=fe(t.serialize()),s=Ht(r);return{messageHash:fe(t.getMessageToSign(!0)),v:`0x${t.v.toString(16)}`,r:`0x${t.r.toString(16).padStart(64,"0")}`,s:`0x${t.s.toString(16).padStart(64,"0")}`,rawTransaction:r,transactionHash:fe(s)}}),PM=n=>{if(E(n))throw new iC;const e=Cr.fromSerializedData(Qe(n));return Xn(e.getSenderAddress().toString())},yp=(n,e,t,i,r)=>{if(typeof n=="object"){const u=`${n.r}${n.s.slice(2)}${n.v.slice(2)}`;return yp(n.messageHash,u,t)}if(typeof e=="string"&&typeof t=="string"&&!E(i)){const u=`${t}${i.slice(2)}${e.slice(2)}`;return yp(n,u,r)}if(E(e))throw new j2("signature string undefined");const s=130,o=t?n:Op(n);let a=parseInt(e.substring(s),16);a>26&&(a-=27);const l=mi.Signature.fromCompact(e.slice(2,s)).addRecoveryBit(a).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),h=Ht(l.subarray(1));return Xn(`0x${h.slice(-40)}`)},mh=n=>{const e=Ns(n),t=mi.getPublicKey(e,!1),r=Ht(t.slice(1)).slice(-40);return Xn(`0x${r}`)},TM=(n,e)=>{const t=Ns(n);return`0x${fe(mi.getPublicKey(t,e)).slice(4)}`},Bw=(n,e,t)=>ph(void 0,void 0,void 0,function*(){var i,r,s,o,a,l,h;const c=Ns(n);let u;if(t!=null&&t.salt?u=typeof t.salt=="string"?Qe(t.salt):t.salt:u=xa(32),!(bd(e)||Gi(e)))throw new X2;const f=typeof e=="string"?Qe(On(e)):e;let d;if(t!=null&&t.iv){if(d=typeof t.iv=="string"?Qe(t.iv):t.iv,d.length!==16)throw new G2}else d=xa(16);const p=(i=t==null?void 0:t.kdf)!==null&&i!==void 0?i:"scrypt";let m,g;if(p==="pbkdf2"){if(g={dklen:(r=t==null?void 0:t.dklen)!==null&&r!==void 0?r:32,salt:fe(u).replace("0x",""),c:(s=t==null?void 0:t.c)!==null&&s!==void 0?s:262144,prf:"hmac-sha256"},g.c<1e3)throw new F2;m=Wv(f,u,g.c,g.dklen,"sha256")}else if(p==="scrypt")g={n:(o=t==null?void 0:t.n)!==null&&o!==void 0?o:8192,r:(a=t==null?void 0:t.r)!==null&&a!==void 0?a:8,p:(l=t==null?void 0:t.p)!==null&&l!==void 0?l:1,dklen:(h=t==null?void 0:t.dklen)!==null&&h!==void 0?h:32,salt:fe(u).replace("0x","")},m=Yv(f,u,g.n,g.p,g.r,g.dklen);else throw new db;const O=yield Xd(c,m.slice(0,16),d,"aes-128-ctr"),y=fe(O).slice(2),w=Ht(Tt(m.slice(16,32),O)).replace("0x","");return{version:3,id:Md(),address:mh(c).toLowerCase().replace("0x",""),crypto:{ciphertext:y,cipherparams:{iv:fe(d).replace("0x","")},cipher:"aes-128-ctr",kdf:p,kdfparams:g,mac:w}}}),bp=(n,e)=>{const t=Ns(n,e);return{address:mh(t),privateKey:fe(t),signTransaction:i=>{throw new sd("Do not have network access to sign the transaction")},sign:i=>Mw(typeof i=="string"?i:JSON.stringify(i),t),encrypt:(i,r)=>ph(void 0,void 0,void 0,function*(){return Bw(t,i,r)})}},EM=()=>{const n=mi.utils.randomPrivateKey();return bp(`${fe(n)}`)},_M=(n,e,t)=>ph(void 0,void 0,void 0,function*(){const i=typeof n=="object"?n:JSON.parse(t?n.toLowerCase():n);if(K.validateJSONSchema(tM,i),i.version!==3)throw new U2;const r=typeof e=="string"?Qe(On(e)):e;K.validate(["bytes"],[r]);let s;if(i.crypto.kdf==="scrypt"){const h=i.crypto.kdfparams,c=typeof h.salt=="string"?Qe(h.salt):h.salt;s=Yv(r,c,h.n,h.p,h.r,h.dklen)}else if(i.crypto.kdf==="pbkdf2"){const h=i.crypto.kdfparams,c=typeof h.salt=="string"?Qe(h.salt):h.salt;s=Wv(r,c,h.c,h.dklen,"sha256")}else throw new db;const o=Qe(i.crypto.ciphertext);if(Ht(Tt(s.slice(16,32),o)).replace("0x","")!==i.crypto.mac)throw new q2;const l=yield c$(Qe(i.crypto.ciphertext),s.slice(0,16),Qe(i.crypto.cipherparams.iv));return bp(l)});var Zw=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const QM=1e3;class CM{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){const t=xr(e),i=new ih;return this._requests.set(t.id,{payload:t,promise:i}),i}execute(e){return Zw(this,void 0,void 0,function*(){var t;if(this.requests.length===0)return Promise.resolve([]);const i=new ih({timeout:(t=e==null?void 0:e.timeout)!==null&&t!==void 0?t:QM,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(i).catch(r=>i.reject(r)),i.catch(r=>{r instanceof gb&&this._abortAllRequests("Batch request timeout"),i.reject(r)}),i})}_processBatchRequest(e){return Zw(this,void 0,void 0,function*(){var t,i;const r=yield this._requestManager.sendBatch([...this._requests.values()].map(a=>a.payload));if(r.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new Zn(r,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${r.length}`);const s=this.requests.map(a=>a.id).map(Number).sort((a,l)=>a-l),o=r.map(a=>a.id).map(Number).sort((a,l)=>a-l);if(JSON.stringify(s)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new Zn(r,`Batch request mismatch the results. Requests: [${s.join()}], Responses: [${o.join()}]`);for(const a of r)Hi(a)?(t=this._requests.get(a.id))===null||t===void 0||t.promise.resolve(a.result):Wi(a)&&((i=this._requests.get(a.id))===null||i===void 0||i.promise.reject(a.error));e.resolve(r)})}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new J2(e))}}var IM=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class Nt extends n${constructor(e){var t;if(super(),this.providers=Ar.providers,ee(e)||typeof e=="string"&&e.trim()!==""||oh(e)){this._requestManager=new Ar(e),this._subscriptionManager=new ah(this._requestManager,{});return}const{config:i,provider:r,requestManager:s,subscriptionManager:o,registeredSubscriptions:a,accountProvider:l,wallet:h,requestManagerMiddleware:c}=e;this.setConfig(i!=null?i:{}),this._requestManager=s!=null?s:new Ar(r,(t=i==null?void 0:i.enableExperimentalFeatures)===null||t===void 0?void 0:t.useSubscriptionWhenCheckingBlockTimeout,c),o?this._subscriptionManager=o:this._subscriptionManager=new ah(this.requestManager,a!=null?a:{}),l&&(this._accountProvider=l),h&&(this._wallet=h)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:(e=this.subscriptionManager)===null||e===void 0?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const i=new e(...t,this.getContextObject());return this.on(Sr.CONFIG_CHANGE,r=>{i.setConfig({[r.name]:r.newValue})}),this[e.name]=i,i}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(Sr.CONFIG_CHANGE,t=>{this.setConfig({[t.name]:t.newValue})})}registerPlugin(e){if(this[e.pluginNamespace]!==void 0)throw new eC(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return Nt.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return CM.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),(t=e.methods)===null||t===void 0||t.forEach(i=>{const r=(...s)=>IM(this,void 0,void 0,function*(){return this.requestManager.send({method:i.call,params:s})});e.property?this[e.property][i.name]=r:this[i.name]=r}),this}}Nt.providers=Ar.providers;class He{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const t=this._iban.slice(4),i=He._parseInt(t,36),r=ba(i,40);return Xn(r)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},He.isIndirect(e)||He.isDirect(e))this._iban=e;else throw new Error("Invalid IBAN was provided")}static isDirect(e){return e.length===34||e.length===35}isDirect(){return He.isDirect(this._iban)}static isIndirect(e){return e.length===20}isIndirect(){return He.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&He._mod9710(He._iso13616Prepare(e))===1}isValid(){return He.isValid(this._iban)}static fromBban(e){const t="XE",r=`0${(98-this._mod9710(this._iso13616Prepare(`${t}00${e}`))).toString()}`.slice(-2);return new He(`${t}${r}${e}`)}static createIndirect(e){return He.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!Vt(e))throw new ad(e);const i=BigInt(Oa(e)).toString(36),r=ba(i,15);return He.fromBban(r.toUpperCase())}static toIban(e){return He.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}He._iso13616Prepare=n=>{const i=n.toUpperCase();return`${i.slice(4)}${i.slice(0,4)}`.split("").map(s=>{const o=s.charCodeAt(0);return o>=65&&o<=90?o-65+10:s}).join("")},He._parseInt=(n,e)=>[...n].reduce((t,i)=>BigInt(parseInt(i,e))+BigInt(e)*t,BigInt(0)),He._mod9710=n=>{let e=n,t;for(;e.length>2;)t=e.slice(0,9),e=`${(parseInt(t,10)%97).toString()}${e.slice(t.length)}`;return parseInt(e,10)%97},He.toAddress=n=>new He(n).toAddress();var vp=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})},Lw;class Nw extends rh{constructor(e){super(),this[Lw]="Promise",this._promise=new Promise(e)}then(e,t){return vp(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return vp(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return vp(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}Lw=Symbol.toStringTag,function(n,e){if(n.setImmediate)return;var t=1,i={},r=!1,s=n.document,o;function a(y){typeof y!="function"&&(y=new Function(""+y));for(var w=new Array(arguments.length-1),k=0;k<w.length;k++)w[k]=arguments[k+1];var x={callback:y,args:w};return i[t]=x,o(t),t++}function l(y){delete i[y]}function h(y){var w=y.callback,k=y.args;switch(k.length){case 0:w();break;case 1:w(k[0]);break;case 2:w(k[0],k[1]);break;case 3:w(k[0],k[1],k[2]);break;default:w.apply(e,k);break}}function c(y){if(r)setTimeout(c,0,y);else{var w=i[y];if(w){r=!0;try{h(w)}finally{l(y),r=!1}}}}function u(){o=function(y){process.nextTick(function(){c(y)})}}function f(){if(n.postMessage&&!n.importScripts){var y=!0,w=n.onmessage;return n.onmessage=function(){y=!1},n.postMessage("","*"),n.onmessage=w,y}}function d(){var y="setImmediate$"+Math.random()+"$",w=function(k){k.source===n&&typeof k.data=="string"&&k.data.indexOf(y)===0&&c(+k.data.slice(y.length))};n.addEventListener?n.addEventListener("message",w,!1):n.attachEvent("onmessage",w),o=function(k){n.postMessage(y+k,"*")}}function p(){var y=new MessageChannel;y.port1.onmessage=function(w){var k=w.data;c(k)},o=function(w){y.port2.postMessage(w)}}function m(){var y=s.documentElement;o=function(w){var k=s.createElement("script");k.onreadystatechange=function(){c(w),k.onreadystatechange=null,y.removeChild(k),k=null},y.appendChild(k)}}function g(){o=function(y){setTimeout(c,0,y)}}var O=Object.getPrototypeOf&&Object.getPrototypeOf(n);O=O&&O.setTimeout?O:n,{}.toString.call(n.process)==="[object process]"?u():f()?d():n.MessageChannel?p():s&&"onreadystatechange"in s.createElement("script")?m():g(),O.setImmediate=a,O.clearImmediate=l}(typeof self=="undefined"?ya:self);var re=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function RM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_protocolVersion",params:[]})})}function Dw(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_syncing",params:[]})})}function $M(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_coinbase",params:[]})})}function MM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_mining",params:[]})})}function BM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_hashrate",params:[]})})}function ZM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_gasPrice",params:[]})})}function LM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_maxPriorityFeePerGas",params:[]})})}function NM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_accounts",params:[]})})}function DM(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_blockNumber",params:[]})})}function jM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getBalance",params:[e,t]})})}function qM(n,e,t,i){return re(this,void 0,void 0,function*(){return K.validate(["address","hex","blockNumberOrTag"],[e,t,i]),n.send({method:"eth_getStorageAt",params:[e,t,i]})})}function UM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getTransactionCount",params:[e,t]})})}function XM(n,e){return re(this,void 0,void 0,function*(){return K.validate(["bytes32"],[e]),n.send({method:"eth_getBlockTransactionCountByHash",params:[e]})})}function GM(n,e){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getBlockTransactionCountByNumber",params:[e]})})}function FM(n,e){return re(this,void 0,void 0,function*(){return K.validate(["bytes32"],[e]),n.send({method:"eth_getUncleCountByBlockHash",params:[e]})})}function VM(n,e){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag"],[e]),n.send({method:"eth_getUncleCountByBlockNumber",params:[e]})})}function HM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["address","blockNumberOrTag"],[e,t]),n.send({method:"eth_getCode",params:[e,t]})})}function WM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["address","hex"],[e,t]),n.send({method:"eth_sign",params:[e,t]})})}function zM(n,e){return re(this,void 0,void 0,function*(){return n.send({method:"eth_signTransaction",params:[e]})})}function YM(n,e){return re(this,void 0,void 0,function*(){return n.send({method:"eth_sendTransaction",params:[e]})})}function jw(n,e){return re(this,void 0,void 0,function*(){return K.validate(["hex"],[e]),n.send({method:"eth_sendRawTransaction",params:[e]})})}function KM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_call",params:[e,t]})})}function JM(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_estimateGas",params:[e,t]})})}function eB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["bytes32","bool"],[e,t]),n.send({method:"eth_getBlockByHash",params:[e,t]})})}function qw(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag","bool"],[e,t]),n.send({method:"eth_getBlockByNumber",params:[e,t]})})}function tB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionByHash",params:[e]})})}function nB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockHashAndIndex",params:[e,t]})})}function iB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[e,t]})})}function rB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["bytes32"],[e]),n.send({method:"eth_getTransactionReceipt",params:[e]})})}function sB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["bytes32","hex"],[e,t]),n.send({method:"eth_getUncleByBlockHashAndIndex",params:[e,t]})})}function oB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag","hex"],[e,t]),n.send({method:"eth_getUncleByBlockNumberAndIndex",params:[e,t]})})}function aB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["filter"],[e]),n.send({method:"eth_newFilter",params:[e]})})}function lB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_newBlockFilter",params:[]})})}function cB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_newPendingTransactionFilter",params:[]})})}function hB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["hex"],[e]),n.send({method:"eth_uninstallFilter",params:[e]})})}function uB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["hex"],[e]),n.send({method:"eth_getFilterChanges",params:[e]})})}function fB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["hex"],[e]),n.send({method:"eth_getFilterLogs",params:[e]})})}function dB(n,e){return re(this,void 0,void 0,function*(){return K.validate(["filter"],[e]),n.send({method:"eth_getLogs",params:[e]})})}function pB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_getWork",params:[]})})}function mB(n,e,t,i){return re(this,void 0,void 0,function*(){return K.validate(["bytes8","bytes32","bytes32"],[e,t,i]),n.send({method:"eth_submitWork",params:[e,t,i]})})}function gB(n,e,t,i){return re(this,void 0,void 0,function*(){K.validate(["hex","blockNumberOrTag"],[e,t]);for(const r of i)K.validate(["number"],[r]);return n.send({method:"eth_feeHistory",params:[e,t,i]})})}function OB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_pendingTransactions",params:[]})})}function yB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_requestAccounts",params:[]})})}function bB(n){return re(this,void 0,void 0,function*(){return n.send({method:"eth_chainId",params:[]})})}function vB(n,e,t,i){return re(this,void 0,void 0,function*(){return K.validate(["address","bytes32[]","blockNumberOrTag"],[e,t,i]),n.send({method:"eth_getProof",params:[e,t,i]})})}function wB(n){return re(this,void 0,void 0,function*(){return n.send({method:"web3_clientVersion",params:[]})})}function xB(n,e,t){return re(this,void 0,void 0,function*(){return K.validate(["blockNumberOrTag"],[t]),n.send({method:"eth_createAccessList",params:[e,t]})})}function SB(n,e,t,i=!1){return re(this,void 0,void 0,function*(){return K.validate(["address"],[e]),n.send({method:`eth_signTypedData${i?"":"_v4"}`,params:[e,t]})})}var wp=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function AB(n){return wp(this,void 0,void 0,function*(){return n.send({method:"net_version",params:[]})})}function kB(n){return wp(this,void 0,void 0,function*(){return n.send({method:"net_peerCount",params:[]})})}function PB(n){return wp(this,void 0,void 0,function*(){return n.send({method:"net_listening",params:[]})})}var Oi=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const TB=n=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_listAccounts",params:[]})}),EB=(n,e)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_newAccount",params:[e]})}),_B=(n,e,t,i)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_unlockAccount",params:[e,t,i]})}),QB=(n,e)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_lockAccount",params:[e]})}),CB=(n,e,t)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_importRawKey",params:[e,t]})}),IB=(n,e,t)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_sendTransaction",params:[e,t]})}),RB=(n,e,t)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_signTransaction",params:[e,t]})}),$B=(n,e,t,i)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_sign",params:[e,t,i]})}),MB=(n,e,t)=>Oi(void 0,void 0,void 0,function*(){return n.send({method:"personal_ecRecover",params:[e,t]})}),Uw={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},Xw={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},Gw={type:"object",properties:{gasPrice:{type:"null"}}},gh=(n,e,t)=>{try{K.validateJSONSchema(n,e)}catch(i){throw i instanceof xs?new TC(i.errors,t):i}},BB=n=>{var e,t;const i=n;if(!E(i.type)){let s;switch(i.type){case"0x0":s=Uw;break;case"0x1":s=Xw;break;case"0x2":s=Gw;break;default:return B({format:"uint"},i.type,se)}return gh(s,i,i.type),B({format:"uint"},i.type,se)}if(!E(i.maxFeePerGas)||!E(i.maxPriorityFeePerGas))return gh(Gw,i,"0x2"),"0x2";if(!E(i.accessList))return gh(Xw,i,"0x1"),"0x1";const r=(e=i.hardfork)!==null&&e!==void 0?e:(t=i.common)===null||t===void 0?void 0:t.hardfork;if(!E(r)){const s=Object.keys(Fo).indexOf(r);if(s>=Object.keys(Fo).indexOf("london"))return E(i.gasPrice)?"0x2":"0x0";if(s===Object.keys(Fo).indexOf("berlin"))return"0x0"}if(!E(i.gasPrice))return gh(Uw,i,"0x0"),"0x0"},ZB=(n,e)=>{var t;return((t=e==null?void 0:e.transactionTypeParser)!==null&&t!==void 0?t:BB)(n)},LB=n=>n[0]>127?"0x0":ui(n[0]),xp={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},NB={type:"object",properties:{accessList:Object.assign({},xp),gasUsed:{type:"string"}}},Fw={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},Vw={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},DB={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},Hw={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},xp),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},Fw),hardfork:Object.assign({},Vw),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},DB),baseChain:Object.assign({},Fw),hardfork:Object.assign({},Vw)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},Sp={type:"object",properties:Object.assign(Object.assign({},Hw.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},xp),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},Ww={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},Oh={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},Sp)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},Ww)},withdrawalsRoot:{format:"bytes32"}}},jB={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},Ww)},withdrawalsRoot:{format:"bytes32"}}},Ds={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},qB={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},js={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},Ds)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},UB={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},XB={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},GB={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function Dt(n,e=xt,t={transactionSchema:Sp,fillInputAndData:!1}){var i,r;let s=Vi({},n);if(E(n==null?void 0:n.common)||(s.common=Object.assign({},n.common),E((i=n.common)===null||i===void 0?void 0:i.customChain)||(s.common.customChain=Object.assign({},n.common.customChain))),s=B((r=t.transactionSchema)!==null&&r!==void 0?r:Sp,s,e),!E(s.data)&&!E(s.input)&&ui(s.data)!==ui(s.input))throw new xb({data:fe(s.data),input:fe(s.input)});return t.fillInputAndData&&(E(s.data)?E(s.input)||(s.data=s.input):s.input=s.data),E(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}function FB(n,e,t={fillInputAndData:!1}){return{raw:B({format:"bytes"},n,e),tx:Dt(Object.assign(Object.assign({},Cr.fromSerializedData(Qe(n)).toJSON()),{hash:fe(Ts(Qe(n))),type:LB(Qe(n))}),e,{fillInputAndData:t.fillInputAndData,transactionSchema:t.transactionSchema})}}var Ap=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function kp(n,e){return Ap(this,void 0,void 0,function*(){const t=yield AB(n.requestManager);return B({format:"uint"},t,e)})}function VB(n,e){return Ap(this,void 0,void 0,function*(){const t=yield kB(n.requestManager);return B({format:"uint"},t,e)})}const HB=n=>Ap(void 0,void 0,void 0,function*(){return PB(n.requestManager)});var Pp=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class zw extends Nt{getId(e=this.defaultReturnFormat){return Pp(this,void 0,void 0,function*(){return kp(this,e)})}getPeerCount(e=this.defaultReturnFormat){return Pp(this,void 0,void 0,function*(){return VB(this,e)})}isListening(){return Pp(this,void 0,void 0,function*(){return HB(this)})}}const qs="ALLEVENTS",Tp={name:qs,signature:"",type:"event",inputs:[]},yh={bytes:ni.HEX,number:sn.NUMBER};var Yw=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function WB(n,e,t){return Yw(this,void 0,void 0,function*(){var i,r,s,o;const a=yield _x(e,e.defaultBlock,!1,se);if(E(a.baseFeePerGas))throw new SC;let l;if(E(n.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(l=yield Fp(e,t)),!E(n.gasPrice)||!E(l)){const h=B({format:"uint"},(i=n.gasPrice)!==null&&i!==void 0?i:l,t);return{maxPriorityFeePerGas:h,maxFeePerGas:h}}return{maxPriorityFeePerGas:B({format:"uint"},(r=n.maxPriorityFeePerGas)!==null&&r!==void 0?r:e.defaultMaxPriorityFeePerGas,t),maxFeePerGas:B({format:"uint"},(s=n.maxFeePerGas)!==null&&s!==void 0?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt((o=n.maxPriorityFeePerGas)!==null&&o!==void 0?o:e.defaultMaxPriorityFeePerGas),t)}})}function Kw(n,e,t){return Yw(this,void 0,void 0,function*(){const i=Jw(n,e);if(!E(i)){if(i.startsWith("-"))throw new wb(i);if(Number(i)<0||Number(i)>127)throw new wb(i);if(E(n.gasPrice)&&(i==="0x0"||i==="0x1"))return{gasPrice:yield Fp(e,t),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if(i==="0x2")return Object.assign({gasPrice:void 0},yield WB(n,e,t))}})}var Ep=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const _p=(n,e,t,i)=>{if(t!==void 0&&n in t&&t[n]!==void 0){if(typeof t[n]=="string"&&Vt(t[n]))return t[n];if(!Se(t[n])&&fv(t[n])){if(e.wallet){const r=e.wallet.get(B({format:"uint"},t[n],yh));if(!E(r))return r.address;throw new Pb}throw new Pb}else throw n==="from"?new rC(t.from):new sC(t.to)}if(n==="from"){if(!E(i))return mh(i);if(!E(e.defaultAccount))return e.defaultAccount}},zB=(n,e,...t)=>Ep(void 0,[n,e,...t],void 0,function*(i,r,s=i.defaultReturnFormat){if(E(r))throw new xC;return Cx(i,r,i.defaultBlock,s)}),Jw=(n,e)=>{const t=ZB(n,e);if(!E(t))return t;if(!E(e.defaultTransactionType))return B({format:"uint"},e.defaultTransactionType,se)};function YB(n){return Ep(this,void 0,void 0,function*(){var e,t;let i=B(Hw,n.transaction,n.web3Context.defaultReturnFormat);if(E(i.from)&&(i.from=_p("from",n.web3Context,void 0,n.privateKey)),E(i.nonce)&&(i.nonce=yield zB(n.web3Context,i.from,se)),E(i.value)&&(i.value="0x0"),E(i.data))E(i.input)?i.input="0x":i.input.startsWith("0x")||(i.input=`0x${i.input}`);else{if(!E(i.input)&&i.data!==i.input)throw new xb({data:fe(i.data),input:fe(i.input)});i.data.startsWith("0x")||(i.data=`0x${i.data}`)}if(E(i.common)){if(n.web3Context.defaultCommon){const r=n.web3Context.defaultCommon,s=r.customChain.chainId,o=r.customChain.networkId,a=r.customChain.name;i.common=Object.assign(Object.assign({},r),{customChain:{chainId:s,networkId:o,name:a}})}E(i.chain)&&(i.chain=n.web3Context.defaultChain),E(i.hardfork)&&(i.hardfork=n.web3Context.defaultHardfork)}if(E(i.chainId)&&E((e=i.common)===null||e===void 0?void 0:e.customChain.chainId)&&(i.chainId=yield Rx(n.web3Context,se)),E(i.networkId)&&(i.networkId=(t=n.web3Context.defaultNetworkId)!==null&&t!==void 0?t:yield kp(n.web3Context,se)),E(i.gasLimit)&&!E(i.gas)&&(i.gasLimit=i.gas),i.type=Jw(i,n.web3Context),E(i.accessList)&&(i.type==="0x1"||i.type==="0x2")&&(i.accessList=[]),n.fillGasPrice&&(i=Object.assign(Object.assign({},i),yield Kw(i,n.web3Context,se))),E(i.gas)&&E(i.gasLimit)&&n.fillGasLimit){const r=yield Wp(n.web3Context,i,"latest",se);i=Object.assign(Object.assign({},i),{gas:B({format:"uint"},r,se)})}return i})}const KB=n=>Ep(void 0,void 0,void 0,function*(){var e;return((e=n.web3Context.transactionBuilder)!==null&&e!==void 0?e:YB)(Object.assign(Object.assign({},n),{transaction:n.transaction}))});var Qp=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function Cp(n,e,t){const i=n.transactionPollingInterval,[r,s]=Cv(()=>Qp(this,void 0,void 0,function*(){let a;try{a=yield Vp(n,yh)}catch(h){console.warn("An error happen while trying to get the block number",h);return}const l=a-e;if(l>=n.transactionBlockTimeout)return new kb({starterBlockNumber:e,numberOfBlocks:l,transactionHash:t})}),i);return[s,{clean:()=>{clearInterval(r)}}]}function JB(n,e,t){return Qp(this,void 0,void 0,function*(){var i;let r=!0,s,o;function a(h,c){c&&console.warn("error happened at subscription. So revert to polling...",c),o.clean(),r=!1;const[u,f]=Cp(n,e,t);o.clean=f.clean,u.catch(d=>h(d))}try{s=yield(i=n.subscriptionManager)===null||i===void 0?void 0:i.subscribe("newHeads"),o={clean:()=>{var h;s.id&&((h=n.subscriptionManager)===null||h===void 0||h.removeSubscription(s).then(()=>{}).catch(()=>{}))}}}catch(h){return Cp(n,e,t)}return[new Promise((h,c)=>{try{s.on("data",u=>{if(r=!1,!(u!=null&&u.number))return;const f=Number(BigInt(u.number)-BigInt(e));f>=n.transactionBlockTimeout&&c(new kb({starterBlockNumber:e,numberOfBlocks:f,transactionHash:t}))}),s.on("error",u=>{a(c,u)})}catch(u){a(c,u)}setTimeout(()=>{r&&a(c)},n.blockHeaderTimeout*1e3)}),o]})}function ex(n,e){return Qp(this,void 0,void 0,function*(){var t,i;const{provider:r}=n.requestManager;let s;const o=yield Vp(n,yh);return!((i=(t=r).supportsSubscriptions)===null||i===void 0)&&i.call(t)&&n.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?s=yield JB(n,o,e):s=Cp(n,o,e),s})}var eZ=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function Ip(n,e,t){return eZ(this,void 0,void 0,function*(){const[i,r]=$d(n.transactionSendTimeout,new AC({numberOfSeconds:n.transactionSendTimeout/1e3,transactionHash:t})),[s,o]=yield ex(n,t);try{return yield Promise.race([e(),r,s])}finally{clearTimeout(i),o.clean()}})}var tx=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function nx(n,e,t,i){return tx(this,void 0,void 0,function*(){var r;const s=(r=n.transactionReceiptPollingInterval)!==null&&r!==void 0?r:n.transactionPollingInterval,[o,a]=Rd(()=>tx(this,void 0,void 0,function*(){try{return(i!=null?i:Qx)(n,e,t)}catch(f){console.warn("An error happen while trying to get the transaction receipt",f);return}}),s),[l,h]=$d(n.transactionPollingTimeout,new Ab({numberOfSeconds:n.transactionPollingTimeout/1e3,transactionHash:e})),[c,u]=yield ex(n,e);try{return yield Promise.race([o,h,c])}finally{l&&clearTimeout(l),a&&clearInterval(a),u.clean()}})}var tZ=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const bh=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:i,returnFormat:r})=>{var s;let o=1;const a=setInterval(()=>{tZ(void 0,void 0,void 0,function*(){if(o>=n.transactionConfirmationBlocks){clearInterval(a);return}const l=yield qw(n.requestManager,Je(BigInt(e.blockNumber)+BigInt(o)),!1);l!=null&&l.hash&&(o+=1,t.emit("confirmation",{confirmations:B({format:"uint"},o,r),receipt:B(i!=null?i:js,e,r),latestBlockHash:B({format:"bytes32"},l.hash,r)}))})},(s=n.transactionReceiptPollingInterval)!==null&&s!==void 0?s:n.transactionPollingInterval)};var ix=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const nZ=({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:i,returnFormat:r})=>{let s=!0,o;setImmediate(()=>{var a;(a=n.subscriptionManager)===null||a===void 0||a.subscribe("newHeads").then(l=>{l.on("data",h=>ix(void 0,void 0,void 0,function*(){var c;if(s=!1,!(h!=null&&h.number)||o===(h==null?void 0:h.parentHash))return;o=h==null?void 0:h.parentHash;const u=BigInt(h.number)-BigInt(e.blockNumber)+BigInt(1);t.emit("confirmation",{confirmations:B({format:"uint"},u,r),receipt:B(i!=null?i:js,e,r),latestBlockHash:B({format:"bytes32"},h.parentHash,r)}),u>=n.transactionConfirmationBlocks&&(yield(c=n.subscriptionManager)===null||c===void 0?void 0:c.removeSubscription(l))})),l.on("error",()=>ix(void 0,void 0,void 0,function*(){var h;yield(h=n.subscriptionManager)===null||h===void 0?void 0:h.removeSubscription(l),s=!1,bh({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,customTransactionReceiptSchema:i,returnFormat:r})}))}).catch(()=>{s=!1,bh({web3Context:n,transactionReceipt:e,customTransactionReceiptSchema:i,transactionPromiEvent:t,returnFormat:r})})}),setTimeout(()=>{s&&bh({web3Context:n,transactionReceipt:e,transactionPromiEvent:t,returnFormat:r})},n.blockHeaderTimeout*1e3)};function iZ(n,e,t,i,r,s){if(E(t)||E(t.blockHash))throw new kC({receipt:t,blockHash:B({format:"bytes32"},t==null?void 0:t.blockHash,r),transactionHash:B({format:"bytes32"},i,r)});if(!t.blockNumber)throw new PC({receipt:t});e.emit("confirmation",{confirmations:B({format:"uint"},1,r),receipt:B(s!=null?s:js,t,r),latestBlockHash:B({format:"bytes32"},t.blockHash,r)});const o=n.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?nZ({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:r}):bh({web3Context:n,transactionReceipt:t,transactionPromiEvent:e,customTransactionReceiptSchema:s,returnFormat:r})}const vh=n=>!ee(n)&&typeof n=="object"&&!ee(n.type)&&n.type==="error",Rp=n=>!ee(n)&&typeof n=="object"&&!ee(n.type)&&n.type==="event",wh=n=>!ee(n)&&typeof n=="object"&&!ee(n.type)&&n.type==="function",rZ=n=>!ee(n)&&typeof n=="object"&&!ee(n.type)&&n.type==="constructor",sZ=n=>typeof n=="object"&&typeof n.components=="undefined"&&typeof n.name=="undefined",rx=n=>n.includes("[]")?{type:"tuple[]",name:n.slice(0,-2)}:{type:"tuple",name:n},sx=n=>{const e=[];for(const t of Object.keys(n)){const i=n[t];typeof i=="object"?e.push(Object.assign(Object.assign({},rx(t)),{components:sx(i)})):e.push({name:t,type:n[t]})}return e},$p=(n,e)=>{const t=[];return e.forEach(i=>{if(typeof i.components=="object"){if(!i.type.startsWith("tuple"))throw new pe(`Invalid value given "${i.type}". Error: components found but type is not tuple.`);const r=i.type.indexOf("["),s=r>=0?i.type.substring(r):"",o=$p(n,i.components);Array.isArray(o)&&n?t.push(`tuple(${o.join(",")})${s}`):t.push(`(${o.join(",")})${s}`)}else t.push(i.type)}),t},yi=n=>{var e,t,i,r;return vh(n)||Rp(n)||wh(n)?!((e=n.name)===null||e===void 0)&&e.includes("(")?n.name:`${(t=n.name)!==null&&t!==void 0?t:""}(${$p(!1,(i=n.inputs)!==null&&i!==void 0?i:[]).join(",")})`:`(${$p(!1,(r=n.inputs)!==null&&r!==void 0?r:[]).join(",")})`},oZ=n=>{if(typeof n!="string"&&!vh(n))throw new pe("Invalid parameter value in encodeErrorSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=yi(n):e=n,Ht(e)},Mp=n=>{if(typeof n!="string"&&!Rp(n))throw new pe("Invalid parameter value in encodeEventSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=yi(n):e=n,Ht(e)};function Bp(n,e){const t=n.exec(e);return t==null?void 0:t.groups}var ox=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ax=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,lx=/^\(.+?\).*?$/,aZ=Object.defineProperty,lZ=(n,e,t)=>e in n?aZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ca=(n,e,t)=>(lZ(n,typeof e!="symbol"?e+"":e,t),t),cZ="abitype",hZ="0.7.1",jt=class extends Error{constructor(n,e={}){var s;const t=e.cause instanceof jt?e.cause.details:(s=e.cause)!=null&&s.message?e.cause.message:e.details,i=e.cause instanceof jt&&e.cause.docsPath||e.docsPath,r=[n||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...t?[`Details: ${t}`]:[],`Version: ${cZ}@${hZ}`].join(`
`);super(r),Ca(this,"details"),Ca(this,"docsPath"),Ca(this,"metaMessages"),Ca(this,"shortMessage"),Ca(this,"name","AbiTypeError"),e.cause&&(this.cause=e.cause),this.details=t,this.docsPath=i,this.metaMessages=e.metaMessages,this.shortMessage=n}},cx=new RegExp("^struct (?<name>[a-zA-Z0-9_]+) \\{(?<properties>.*?)\\}$");function hx(n){return cx.test(n)}function uZ(n){return Bp(cx,n)}var ux=new Set(["memory","indexed","storage","calldata"]),fZ=new Set(["calldata","memory","storage"]);function dZ(n,e){return e?`${e}:${n}`:n}var Zp=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),pZ=new RegExp("^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\\[\\d*?\\])+?)?(?:\\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\\s(?<name>[a-zA-Z0-9_]+))?$"),mZ=new RegExp("^\\((?<type>.+?)\\)(?<array>(?:\\[\\d*?\\])+?)?(?:\\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\\s(?<name>[a-zA-Z0-9_]+))?$"),gZ=/^u?int$/;function xh(n,e){var u,f,d,p;const t=dZ(n,e==null?void 0:e.type);if(Zp.has(t))return Zp.get(t);const i=lx.test(n),r=Bp(i?mZ:pZ,n);if(!r)throw new jt("Invalid ABI parameter.",{details:n});if(r.name&&yZ(r.name))throw new jt("Invalid ABI parameter.",{details:n,metaMessages:[`"${r.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=r.name?{name:r.name}:{},o=r.modifier==="indexed"?{indexed:!0}:{},a=(u=e==null?void 0:e.structs)!=null?u:{};let l,h={};if(i){l="tuple";const m=Us(r.type),g=[],O=m.length;for(let y=0;y<O;y++)g.push(xh(m[y],{structs:a}));h={components:g}}else if(r.type in a)l="tuple",h={components:a[r.type]};else if(gZ.test(r.type))l=`${r.type}256`;else if(l=r.type,(e==null?void 0:e.type)!=="struct"&&!fx(l))throw new jt("Unknown type.",{metaMessages:[`Type "${l}" is not a valid ABI type.`]});if(r.modifier){if(!((d=(f=e==null?void 0:e.modifiers)==null?void 0:f.has)!=null&&d.call(f,r.modifier)))throw new jt("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${r.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`]});if(fZ.has(r.modifier)&&!bZ(l,!!r.array))throw new jt("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${r.modifier}" not allowed${e!=null&&e.type?` in "${e.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r.modifier}" was given.`]})}const c=Q(Q(Q({type:`${l}${(p=r.array)!=null?p:""}`},s),o),h);return Zp.set(t,c),c}function Us(n,e=[],t="",i=0){if(n===""){if(t==="")return e;if(i!==0)throw new jt("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${i>0?"opening":"closing"} parentheses.`],details:`Depth "${i}"`});return[...e,t.trim()]}const r=n.length;for(let s=0;s<r;s++){const o=n[s],a=n.slice(s+1);switch(o){case",":return i===0?Us(a,[...e,t.trim()]):Us(a,e,`${t}${o}`,i);case"(":return Us(a,e,`${t}${o}`,i+1);case")":return Us(a,e,`${t}${o}`,i-1);default:return Us(a,e,`${t}${o}`,i)}}return[]}function fx(n){return n==="address"||n==="bool"||n==="function"||n==="string"||ox.test(n)||ax.test(n)}var OZ=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function yZ(n){return n==="address"||n==="bool"||n==="function"||n==="string"||n==="tuple"||ox.test(n)||ax.test(n)||OZ.test(n)}function bZ(n,e){return e||n==="bytes"||n==="string"||n==="tuple"}function vZ(n){const e={},t=n.length;for(let o=0;o<t;o++){const a=n[o];if(!hx(a))continue;const l=uZ(a);if(!l)throw new jt("Invalid struct signature.",{details:a});const h=l.properties.split(";"),c=[],u=h.length;for(let f=0;f<u;f++){const p=h[f].trim();if(!p)continue;const m=xh(p,{type:"struct"});c.push(m)}if(!c.length)throw new jt("Invalid struct signature.",{details:a,metaMessages:["No properties exist."]});e[l.name]=c}const i={},r=Object.entries(e),s=r.length;for(let o=0;o<s;o++){const[a,l]=r[o];i[a]=dx(l,e)}return i}var wZ=new RegExp("^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\\[\\d*?\\])+?)?$");function dx(n,e,t=new Set){var s;const i=[],r=n.length;for(let o=0;o<r;o++){const a=n[o];if(lx.test(a.type))i.push(a);else{const h=Bp(wZ,a.type);if(!(h!=null&&h.type))throw new jt("Invalid ABI parameter.",{details:JSON.stringify(a,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:c,type:u}=h;if(u in e){if(t.has(u))throw new jt("Circular reference detected.",{metaMessages:[`Struct "${u}" is a circular reference.`]});i.push(J(Q({},a),{type:`tuple${c!=null?c:""}`,components:dx((s=e[u])!=null?s:[],e,new Set([...t,u]))}))}else if(fx(u))i.push(a);else throw new jt("Unknown type.",{metaMessages:[`Type "${u}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]})}}return i}function xZ(n){let e;if(typeof n=="string")e=xh(n,{modifiers:ux});else{const t=vZ(n),i=n.length;for(let r=0;r<i;r++){const s=n[r];if(!hx(s)){e=xh(s,{modifiers:ux,structs:t});break}}}if(!e)throw new jt("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(n,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return e}const je=32;function Lp(n=0){var e;if(((e=globalThis.Buffer)===null||e===void 0?void 0:e.alloc)!==void 0){const t=globalThis.Buffer.alloc(n);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(n)}function px(n){var e,t;return Object.assign(Object.assign({},n),{name:(e=n.name)!==null&&e!==void 0?e:"",components:(t=n.components)===null||t===void 0?void 0:t.map(i=>px(i))})}function SZ(n){return!ee(n)&&typeof n=="object"&&!ee(n.type)&&typeof n.type=="string"}function mx(n){return n.map(e=>{var t;if(SZ(e))return e;if(typeof e=="string")return px(xZ(e.replace(/tuple/,"")));if(sZ(e)){const i=Object.keys(e)[0],r=rx(i);return r.name=(t=r.name)!==null&&t!==void 0?t:"",Object.assign(Object.assign({},r),{components:sx(e[i])})}throw new pe("Invalid abi")})}function Np(n){const e=n.type.lastIndexOf("["),t=n.type.substring(0,e),i=n.type.substring(e);let r=-1;if(i!=="[]"&&(r=Number(i.slice(1,-1)),isNaN(r)))throw new pe("Invalid fixed array size",{size:i});return{param:{type:t,name:"",components:n.components},size:r}}function Sh(n){var e,t;return n.type==="string"||n.type==="bytes"||n.type.endsWith("[]")?!0:n.type==="tuple"?(t=(e=n.components)===null||e===void 0?void 0:e.some(Sh))!==null&&t!==void 0?t:!1:n.type.endsWith("]")?Sh(Np(n).param):!1}const gx=20,Ox=je-gx;function AZ(n,e){if(typeof e!="string")throw new pe("address type expects string as input type",{value:e,name:n.name,type:n.type});let t=e.toLowerCase();if(t.startsWith("0x")||(t=`0x${t}`),!Vt(t))throw new pe("provided input is not valid address",{value:e,name:n.name,type:n.type});const i=yr(t),r=Lp(je);return r.set(i,Ox),{dynamic:!1,encoded:r}}function kZ(n,e){const t=e.subarray(Ox,je);if(t.length!==gx)throw new pe("Invalid decoding input, not enough bytes to decode address",{bytes:e});const i=li(t);return{result:Xn(i),encoded:e.subarray(je),consumed:je}}const Ji=new Map;let Ah=BigInt(256);for(let n=8;n<=256;n+=8)Ji.set(`uint${n}`,{min:BigInt(0),max:Ah-BigInt(1)}),Ji.set(`int${n}`,{min:-Ah/BigInt(2),max:Ah/BigInt(2)-BigInt(1)}),Ah*=BigInt(256);Ji.set("int",Ji.get("int256")),Ji.set("uint",Ji.get("uint256"));const yx=BigInt(1)<<BigInt(256);function PZ(n,e=je){let t;return n<0?t=(yx+n).toString(16):t=n.toString(16),t=Ps(t,e*2),yr(t)}function TZ(n,e){const t=li(n),i=BigInt(t);return i<=e?i:i-yx}function Ia(n,e){let t;try{t=wr(e)}catch(r){throw new pe("provided input is not number value",{type:n.type,value:e,name:n.name})}const i=Ji.get(n.type);if(!i)throw new pe("provided abi contains invalid number datatype",{type:n.type});if(t<i.min)throw new pe("provided input is less then minimum for given type",{type:n.type,value:e,name:n.name,minimum:i.min.toString()});if(t>i.max)throw new pe("provided input is greater then maximum for given type",{type:n.type,value:e,name:n.name,maximum:i.max.toString()});return{dynamic:!1,encoded:PZ(t)}}function Xs(n,e){if(e.length<je)throw new pe("Not enough bytes left to decode",{param:n,bytesLeft:e.length});const t=e.subarray(0,je),i=Ji.get(n.type);if(!i)throw new pe("provided abi contains invalid number datatype",{type:n.type});const r=TZ(t,i.max);if(r<i.min)throw new pe("decoded value is less then minimum for given type",{type:n.type,value:r,name:n.name,minimum:i.min.toString()});if(r>i.max)throw new pe("decoded value is greater then maximum for given type",{type:n.type,value:r,name:n.name,maximum:i.max.toString()});return{result:r,encoded:e.subarray(je),consumed:je}}function EZ(n,e){let t;try{t=Ov(e)}catch(i){if(i instanceof ld)throw new pe("provided input is not valid boolean value",{type:n.type,value:e,name:n.name})}return Ia({type:"uint8",name:""},Number(t))}function _Z(n,e){const t=Xs({type:"uint8",name:""},e);if(t.result>1||t.result<0)throw new pe("Invalid boolean value encoded",{boolBytes:e.subarray(0,je),numberResult:t});return{result:t.result===BigInt(1),encoded:t.encoded,consumed:je}}const QZ=32;function bx(n,e){if(typeof e=="string"&&e.length%2!==0&&(e+="0"),!Xi(e))throw new pe("provided input is not valid bytes value",{type:n.type,value:e,name:n.name});const t=Un(e),[,i]=n.type.split("bytes");if(i){if(Number(i)>QZ||Number(i)<1)throw new pe("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:n.type});if(Number(i)<t.length)throw new pe("provided input size is different than type size",{type:n.type,value:e,name:n.name});const o=Lp(je);return o.set(t),{dynamic:!1,encoded:o}}const r=Math.ceil(t.length/je),s=Lp(je+r*je);return s.set(Ia({type:"uint32",name:""},t.length).encoded),s.set(t,je),{dynamic:!0,encoded:s}}function vx(n,e){const[,t]=n.type.split("bytes");let i=Number(t),r=e,s=1,o=0;if(!i){const a=Xs({type:"uint32",name:""},r);i=Number(a.result),o+=a.consumed,r=a.encoded,s=Math.ceil(i/je)}if(i>e.length)throw new pe("there is not enough data to decode",{type:n.type,encoded:e,size:i});return{result:fe(r.subarray(0,i)),encoded:r.subarray(s*je),consumed:o+s*je}}function CZ(n,e){if(typeof e!="string")throw new pe("invalid input, should be string",{input:e});const t=Ed(e);return bx({type:"bytes",name:""},t)}function IZ(n,e){const t=vx({type:"bytes",name:""},e);return{result:Yc(t.result),encoded:t.encoded,consumed:t.consumed}}function wx(n){let e=0,t=0;const i=[],r=[];for(const s of n)s.dynamic?e+=je:e+=s.encoded.length;for(const s of n)s.dynamic?(i.push(Ia({type:"uint256",name:""},e+t)),r.push(s),t+=s.encoded.length):i.push(s);return Tt(...i.map(s=>s.encoded),...r.map(s=>s.encoded))}function RZ(n,e){if(!Array.isArray(e))throw new pe("Expected value to be array",{abi:n,values:e});const{size:t,param:i}=Np(n),r=e.map(a=>Dp(i,a)),s=t===-1,o=r.length>0&&r[0].dynamic;if(!s&&e.length!==t)throw new pe("Given arguments count doesn't match array length",{arrayLength:t,argumentsLength:e.length});if(s||o){const a=wx(r);if(s){const l=Ia({type:"uint256",name:""},r.length).encoded;return{dynamic:!0,encoded:r.length>0?Tt(l,a):l}}return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Tt(...r.map(a=>a.encoded))}}function $Z(n,e){let{size:t,param:i}=Np(n);const r=t===-1;let s=0;const o=[];let a=e;if(r){const h=Xs({type:"uint32",name:""},e);t=Number(h.result),s=h.consumed,a=h.encoded}if(Sh(i)){for(let h=0;h<t;h+=1){const c=Xs({type:"uint32",name:""},a.subarray(h*je));s+=c.consumed;const u=kh(i,a.subarray(Number(c.result)));s+=u.consumed,o.push(u.result)}return{result:o,encoded:a.subarray(s),consumed:s}}for(let h=0;h<t;h+=1){const c=kh(i,e.subarray(s));s+=c.consumed,o.push(c.result)}return{result:o,encoded:e.subarray(s),consumed:s}}function Dp(n,e){if(n.type==="string")return CZ(n,e);if(n.type==="bool")return EZ(n,e);if(n.type==="address")return AZ(n,e);if(n.type==="tuple")return jp(n,e);if(n.type.endsWith("]"))return RZ(n,e);if(n.type.startsWith("bytes"))return bx(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return Ia(n,e);throw new pe("Unsupported",{param:n,value:e})}function kh(n,e){if(n.type==="string")return IZ(n,e);if(n.type==="bool")return _Z(n,e);if(n.type==="address")return kZ(n,e);if(n.type==="tuple")return xx(n,e);if(n.type.endsWith("]"))return $Z(n,e);if(n.type.startsWith("bytes"))return vx(n,e);if(n.type.startsWith("uint")||n.type.startsWith("int"))return Xs(n,e);throw new pe("Unsupported",{param:n,bytes:e})}function jp(n,e){var t,i,r;let s=!1;if(!Array.isArray(e)&&typeof e!="object")throw new pe("param must be either Array or Object",{param:n,input:e});const o=e,a=[];for(let l=0;l<((i=(t=n.components)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0);l+=1){const h=n.components[l];let c;if(Array.isArray(o)){if(l>=o.length)throw new pe("input param length missmatch",{param:n,input:e});c=Dp(h,o[l])}else{const u=o[(r=h.name)!==null&&r!==void 0?r:""];if(u==null)throw new pe("missing input defined in abi",{param:n,input:e,paramName:h.name});c=Dp(h,u)}c.dynamic&&(s=!0),a.push(c)}return s?{dynamic:!0,encoded:wx(a)}:{dynamic:!1,encoded:Tt(...a.map(l=>l.encoded))}}function xx(n,e){const t={__length__:0};let i=0;if(!n.components)return{result:t,encoded:e,consumed:i};let r=0;for(const[s,o]of n.components.entries()){let a;if(Sh(o)){const l=Xs({type:"uint32",name:""},e.subarray(i));a=kh(o,e.subarray(Number(l.result))),i+=l.consumed,r+=a.consumed}else a=kh(o,e.subarray(i)),i+=a.consumed;t.__length__+=1,t[s]=a.result,o.name&&o.name!==""&&(t[o.name]=a.result)}return{encoded:e.subarray(i+r),result:t,consumed:i+r}}function MZ(n,e,t){const i=mx(n),r=yr(e);return xx({type:"tuple",name:"",components:i},r).result}function Sx(n){const e=[];return n.forEach(t=>{if(Array.isArray(t)){const i=Sx(t);e.push({type:"tuple",components:i,name:""})}else e.push({type:ui(t,!0)})}),e}function Ph(n,e){if((n==null?void 0:n.length)!==e.length)throw new pe("Invalid number of values received for given ABI",{expected:n==null?void 0:n.length,received:e.length});const t=mx(n);return li(jp({type:"tuple",name:"",components:t},e).encoded)}function BZ(n){try{const e=Sx(n);return li(jp({type:"tuple",name:"",components:e},n).encoded)}catch(e){throw new pe("Could not infer types from given params",{params:n})}}const qp=(n,e)=>Ph([n],[e]),Ax=(n,e,t)=>{try{if(n.length>0&&(!e||e==="0x"||e==="0X"))throw new pe("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return MZ(n,`0x${e.replace(/0x/i,"")}`,t)}catch(i){throw new pe(`Parameter decoding error: ${i.message}`,{internalErr:i})}},Ir=(n,e)=>Ax(n,e,!1),kx=(n,e)=>Ir([n],e)[0],Ra=n=>{if(typeof n!="string"&&!wh(n))throw new pe("Invalid parameter value in encodeFunctionSignature");let e;return n&&(typeof n=="function"||typeof n=="object")?e=yi(n):e=n,Ht(e).slice(0,10)},ZZ=(n,e)=>{var t;if(!wh(n))throw new pe("Invalid parameter value in encodeFunctionCall");return`${Ra(n)}${Ph((t=n.inputs)!==null&&t!==void 0?t:[],e!=null?e:[]).replace("0x","")}`},Up=(n,e,t=!0)=>{const i=t&&e&&e.length>=10&&e.startsWith("0x")?e.slice(10):e;if(!n.inputs)throw new St("No inputs found in the ABI");const r=Ir([...n.inputs],i);return Object.assign(Object.assign({},r),{__method__:yi(n)})},LZ=(n,e)=>{if(n.type==="constructor")return e;if(!e)return null;const t=e.length>=2?e.slice(2):e;if(!n.outputs)return null;const i=Ir([...n.outputs],t);return i.__length__===1?i[0]:i},NZ=["bool","string","int","uint","address","fixed","ufixed"],DZ=(n,e)=>n==="string"?e:kx(n,e),Px=(n,e,t)=>{const i=Array.isArray(t)?t:[t],r={},s={};for(const[f,d]of n.entries())d.indexed?r[f]=d:s[f]=d;const o=e?Ax(Object.values(s),e,!0):{__length__:0},a=i.length-Object.keys(r).length,l=Object.values(r).map((f,d)=>NZ.some(p=>f.type.startsWith(p))?DZ(f.type,i[d+a]):i[d+a]),h={__length__:0};let c=0,u=0;for(const[f,d]of n.entries())h[f]=d.type==="string"?"":void 0,r[f]&&(h[f]=l[c],c+=1),s[f]&&(h[f]=o[String(u)],u+=1),d.name&&(h[d.name]=h[f]),h.__length__+=1;return h},Th=(n,e)=>{if(e!=null&&e.data){let t,i,r;try{const s=e.data.slice(0,10),o=n.find(a=>oZ(a).startsWith(s));o!=null&&o.inputs?(t=o.name,i=yi(o),r=Ir([...o.inputs],e.data.substring(10))):e.data.startsWith("0x08c379a0")?(t="Error",i="Error(string)",r=Ir([{name:"message",type:"string"}],e.data.substring(10))):e.data.startsWith("0x4e487b71")?(t="Panic",i="Panic(uint256)",r=Ir([{name:"code",type:"uint256"}],e.data.substring(10))):console.error("No matching error abi found for error data",e.data)}catch(s){console.error(s)}t&&e.setDecodedProperties(t,i,r)}};var jZ=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const qZ=(n,e)=>{var t,i,r,s,o;if(n instanceof fr&&n.cause instanceof wc){if(e!==void 0){const a=e.filter(l=>vh(l));return Th(a,n.cause),{reason:n.cause.message,signature:(t=n.cause.data)===null||t===void 0?void 0:t.slice(0,10),data:(i=n.cause.data)===null||i===void 0?void 0:i.substring(10),customErrorName:n.cause.errorName,customErrorDecodedSignature:n.cause.errorSignature,customErrorArguments:n.cause.errorArgs}}return{reason:n.cause.message,signature:(r=n.cause.data)===null||r===void 0?void 0:r.slice(0,10),data:(s=n.cause.data)===null||s===void 0?void 0:s.substring(10)}}if(n instanceof Ac&&!Array.isArray((o=n.cause)===null||o===void 0?void 0:o.errors)&&n.cause!==void 0)return n.cause.message;throw n};function Tx(n,e,t){return jZ(this,arguments,void 0,function*(i,r,s,o=i.defaultReturnFormat){try{yield Hp(i,r,i.defaultBlock,o);return}catch(a){return qZ(a,s)}})}var UZ=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function Xp(n,e,t,i,r,s){return UZ(this,void 0,void 0,function*(){let o=s;o===void 0&&n.handleRevert&&e!==void 0&&(o=yield Tx(n,e,r));let a;if(o===void 0)a=new yb(t);else if(typeof o=="string")a=new Sc(o,void 0,t);else if(o.customErrorName!==void 0&&o.customErrorDecodedSignature!==void 0&&o.customErrorArguments!==void 0){const l=o;a=new Ob(l.reason,l.customErrorName,l.customErrorDecodedSignature,l.customErrorArguments,l.signature,t,l.data)}else a=new Sc(o.reason,o.signature,t,o.data);return a})}const Gp=(n,e,t,i=xt)=>{var r,s,o,a,l,h;let c=Object.assign({},n);const u=B(Ds,e,i);if([qs,"allEvents"].includes(c.name)){const d=t.find(p=>p.signature===e.topics[0]);d?c=d:c={anonymous:!0}}if(c.inputs=(s=(r=c.inputs)!==null&&r!==void 0?r:n.inputs)!==null&&s!==void 0?s:[],!c.anonymous){let d=0;((o=c.inputs)!==null&&o!==void 0?o:[]).forEach(p=>{p.indexed&&(d+=1)}),d>0&&(e!=null&&e.topics)&&(e==null?void 0:e.topics.length)!==d+1&&(c=Object.assign(Object.assign({},c),{anonymous:!0,inputs:[]}))}const f=c.anonymous?e.topics:((a=e.topics)!==null&&a!==void 0?a:[]).slice(1);return Object.assign(Object.assign({},u),{returnValues:Px([...(l=c.inputs)!==null&&l!==void 0?l:[]],e.data,f),event:c.name,signature:!c.anonymous&&((h=e.topics)===null||h===void 0?void 0:h.length)>0&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var Rr=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class Ex{constructor({options:e,web3Context:t,promiEvent:i,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=i,this.returnFormat=r}getReceiptWithEvents(e){var t,i;const r=Object.assign({},e!=null?e:{});if(!((t=this.options)===null||t===void 0)&&t.contractAbi&&r.logs&&r.logs.length>0){r.events={};for(const s of r.logs){const o=Gp(Tp,s,(i=this.options)===null||i===void 0?void 0:i.contractAbi,this.returnFormat);o.event&&(r.events[o.event]=o)}}return r}checkRevertBeforeSending(e){return Rr(this,void 0,void 0,function*(){if(this.options.checkRevertBeforeSending!==!1){let t=e;E(e.data)&&E(e.input)&&E(e.gas)&&(t=Object.assign(Object.assign({},e),{gas:21e3}));const i=yield Tx(this.web3Context,t,this.options.contractAbi);if(i!==void 0)throw yield Xp(this.web3Context,e,void 0,void 0,this.options.contractAbi,i)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return Rr(this,arguments,void 0,function*({transactionFormatted:t,transaction:i}){var r;let s=t;return!this.web3Context.config.ignoreGasPricing&&!(!((r=this.options)===null||r===void 0)&&r.ignoreGasPricing)&&E(t.gasPrice)&&(E(i.maxPriorityFeePerGas)||E(i.maxFeePerGas))&&(s=Object.assign(Object.assign({},t),yield Kw(t,this.web3Context,se))),s})}signAndSend(e){return Rr(this,arguments,void 0,function*({wallet:t,tx:i}){if(t){const r=yield t.signTransaction(i);return Ip(this.web3Context,()=>Rr(this,void 0,void 0,function*(){return jw(this.web3Context.requestManager,r.rawTransaction)}),r.transactionHash)}return Ip(this.web3Context,()=>Rr(this,void 0,void 0,function*(){return YM(this.web3Context.requestManager,i)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return Rr(this,arguments,void 0,function*({error:t,tx:i}){var r;let s=t;return s instanceof fr&&this.web3Context.handleRevert&&(s=yield Xp(this.web3Context,i,void 0,void 0,(r=this.options)===null||r===void 0?void 0:r.contractAbi)),(s instanceof Ac||s instanceof fr||s instanceof Ob||s instanceof yb||s instanceof Sc||s instanceof Ab)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",s),s})}emitConfirmation({receipt:e,transactionHash:t,customTransactionReceiptSchema:i}){this.promiEvent.listenerCount("confirmation")>0&&iZ(this.web3Context,this.promiEvent,e,t,this.returnFormat,i)}handleResolve(e){return Rr(this,arguments,void 0,function*({receipt:t,tx:i}){var r,s,o;if(!((r=this.options)===null||r===void 0)&&r.transactionResolver)return(s=this.options)===null||s===void 0?void 0:s.transactionResolver(t);if(t.status===BigInt(0)){const a=yield Xp(this.web3Context,i,t,void 0,(o=this.options)===null||o===void 0?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",a),a}else return t})}}var Ae=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})},XZ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const GZ=n=>Ae(void 0,void 0,void 0,function*(){return Dw(n.requestManager)});function FZ(n,e){return Ae(this,void 0,void 0,function*(){const t=yield BM(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function Fp(n,e){return Ae(this,void 0,void 0,function*(){const t=yield ZM(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function VZ(n,e){return Ae(this,void 0,void 0,function*(){const t=yield LM(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function Vp(n,e){return Ae(this,void 0,void 0,function*(){const t=yield DM(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function HZ(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s){const o=rt(r)?r:B({format:"uint"},r,se),a=yield jM(t.requestManager,i,o);return B({format:"uint"},a,s!=null?s:t.defaultReturnFormat)})}function WZ(n,e,t){return Ae(this,arguments,void 0,function*(i,r,s,o=i.defaultBlock,a){const l=B({format:"uint"},s,se),h=rt(o)?o:B({format:"uint"},o,se),c=yield qM(i.requestManager,r,l,h);return B({format:"bytes"},c,a!=null?a:i.defaultReturnFormat)})}function zZ(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s){const o=rt(r)?r:B({format:"uint"},r,se),a=yield HM(t.requestManager,i,o);return B({format:"bytes"},a,s!=null?s:t.defaultReturnFormat)})}function _x(n){return Ae(this,arguments,void 0,function*(e,t=e.defaultBlock,i=!1,r){var s;let o;if(Xi(t)){const l=B({format:"bytes32"},t,se);o=yield eB(e.requestManager,l,i)}else{const l=rt(t)?t:B({format:"uint"},t,se);o=yield qw(e.requestManager,l,i)}const a=B(Oh,o,r!=null?r:e.defaultReturnFormat);return E(a)?a:Object.assign(Object.assign({},a),{transactions:(s=a.transactions)!==null&&s!==void 0?s:[]})})}function YZ(n){return Ae(this,arguments,void 0,function*(e,t=e.defaultBlock,i){let r;if(Xi(t)){const s=B({format:"bytes32"},t,se);r=yield XM(e.requestManager,s)}else{const s=rt(t)?t:B({format:"uint"},t,se);r=yield GM(e.requestManager,s)}return B({format:"uint"},r,i!=null?i:e.defaultReturnFormat)})}function KZ(n){return Ae(this,arguments,void 0,function*(e,t=e.defaultBlock,i){let r;if(Xi(t)){const s=B({format:"bytes32"},t,se);r=yield FM(e.requestManager,s)}else{const s=rt(t)?t:B({format:"uint"},t,se);r=yield VM(e.requestManager,s)}return B({format:"uint"},r,i!=null?i:e.defaultReturnFormat)})}function JZ(n){return Ae(this,arguments,void 0,function*(e,t=e.defaultBlock,i,r){const s=B({format:"uint"},i,se);let o;if(Xi(t)){const a=B({format:"bytes32"},t,se);o=yield sB(e.requestManager,a,s)}else{const a=rt(t)?t:B({format:"uint"},t,se);o=yield oB(e.requestManager,a,s)}return B(Oh,o,r!=null?r:e.defaultReturnFormat)})}function e5(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultReturnFormat){const s=B({format:"bytes32"},i,xt),o=yield tB(t.requestManager,s);return E(o)?o:Dt(o,r,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})})}function t5(n,e){return Ae(this,void 0,void 0,function*(){return(yield OB(n.requestManager)).map(i=>Dt(i,e!=null?e:n.defaultReturnFormat,{transactionSchema:n.config.customTransactionSchema,fillInputAndData:!0}))})}function n5(n){return Ae(this,arguments,void 0,function*(e,t=e.defaultBlock,i,r){const s=B({format:"uint"},i,se);let o;if(Xi(t)){const a=B({format:"bytes32"},t,se);o=yield nB(e.requestManager,a,s)}else{const a=rt(t)?t:B({format:"uint"},t,se);o=yield iB(e.requestManager,a,s)}return E(o)?o:Dt(o,r!=null?r:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})})}function Qx(n,e,t){return Ae(this,void 0,void 0,function*(){const i=B({format:"bytes32"},e,xt);let r;try{r=yield rB(n.requestManager,i)}catch(s){if(typeof s=="object"&&!E(s)&&"message"in s&&s.message==="transaction indexing is in progress")console.warn("Transaction indexing is in progress.");else throw s}return E(r)?r:B(js,r,t!=null?t:n.defaultReturnFormat)})}function Cx(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s){const o=rt(r)?r:B({format:"uint"},r,se),a=yield UM(t.requestManager,i,o);return B({format:"uint"},a,s!=null?s:t.defaultReturnFormat)})}function $a(n,e,t,i={checkRevertBeforeSending:!0},r){const s=new Nw((o,a)=>{setImmediate(()=>{Ae(this,void 0,void 0,function*(){const l=new Ex({web3Context:n,promiEvent:s,options:i,returnFormat:t});let h=Object.assign({},e);E(r)||(h=yield r.processTransaction(h));let c=Dt(Object.assign(Object.assign({},h),{from:_p("from",n,h),to:_p("to",n,h)}),se,{transactionSchema:n.config.customTransactionSchema});try{c=yield l.populateGasPrice({transaction:h,transactionFormatted:c}),yield l.checkRevertBeforeSending(c),l.emitSending(c);let u;n.wallet&&!E(c.from)&&(u=n.wallet.get(c.from));const f=yield l.signAndSend({wallet:u,tx:c}),d=B({format:"bytes32"},f,t!=null?t:n.defaultReturnFormat);l.emitSent(c),l.emitTransactionHash(d);const p=yield nx(n,f,t!=null?t:n.defaultReturnFormat),m=l.getReceiptWithEvents(B(js,p,t!=null?t:n.defaultReturnFormat));l.emitReceipt(m),o(yield l.handleResolve({receipt:m,tx:c})),l.emitConfirmation({receipt:m,transactionHash:f})}catch(u){a(yield l.handleError({error:u,tx:c}))}})})});return s}function i5(n,e,t,i={checkRevertBeforeSending:!0}){const r=new Nw((s,o)=>{setImmediate(()=>{Ae(this,void 0,void 0,function*(){const a=new Ex({web3Context:n,promiEvent:r,options:i,returnFormat:t}),l=B({format:"bytes"},e,se),h=Cr.fromSerializedData(Un(Qe(l))),c=Object.assign(Object.assign({},h.toJSON()),{from:h.getSenderAddress().toString()});try{const{v:u,r:f,s:d}=c,p=XZ(c,["v","r","s"]);yield a.checkRevertBeforeSending(p),a.emitSending(l);const m=yield Ip(n,()=>Ae(this,void 0,void 0,function*(){return jw(n.requestManager,l)}));a.emitSent(l);const g=B({format:"bytes32"},m,t!=null?t:n.defaultReturnFormat);a.emitTransactionHash(g);const O=yield nx(n,m,t!=null?t:n.defaultReturnFormat),y=a.getReceiptWithEvents(B(js,O,t!=null?t:n.defaultReturnFormat));a.emitReceipt(y),s(yield a.handleResolve({receipt:y,tx:c})),a.emitConfirmation({receipt:y,transactionHash:m})}catch(u){o(yield a.handleError({error:u,tx:c}))}})})});return r}function r5(n,e,t){return Ae(this,arguments,void 0,function*(i,r,s,o=i.defaultReturnFormat){var a;const l=B({format:"bytes"},r,xt);if(!((a=i.wallet)===null||a===void 0)&&a.get(s)){const u=i.wallet.get(s).sign(l);return B(UB,u,o)}if(typeof s=="number")throw new nC(r,'RPC method "eth_sign" does not support index signatures');const h=yield WM(i.requestManager,s,l);return B({format:"bytes"},h,o)})}function s5(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultReturnFormat){const s=yield zM(t.requestManager,Dt(i,se,{transactionSchema:t.config.customTransactionSchema}));return bd(s)?FB(s,r,{fillInputAndData:!0}):{raw:B({format:"bytes"},s.raw,r),tx:Dt(s.tx,r,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})}})}function Hp(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s=t.defaultReturnFormat){const o=rt(r)?r:B({format:"uint"},r,se),a=yield KM(t.requestManager,Dt(i,se,{transactionSchema:t.config.customTransactionSchema}),o);return B({format:"bytes"},a,s)})}function Wp(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s){const o=Dt(i,se,{transactionSchema:t.config.customTransactionSchema}),a=rt(r)?r:B({format:"uint"},r,se),l=yield JM(t.requestManager,o,a);return B({format:"uint"},l,s!=null?s:t.defaultReturnFormat)})}function Ix(n,e,t){return Ae(this,void 0,void 0,function*(){let{toBlock:i,fromBlock:r}=e;E(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Je(i)),E(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Je(r));const s=Object.assign(Object.assign({},e),{fromBlock:r,toBlock:i});return(yield dB(n.requestManager,s)).map(l=>typeof l=="string"?l:B(Ds,l,t!=null?t:n.defaultReturnFormat))})}function Rx(n,e){return Ae(this,void 0,void 0,function*(){const t=yield bB(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function o5(n,e,t){return Ae(this,arguments,void 0,function*(i,r,s,o=i.defaultBlock,a){const l=s.map(u=>B({format:"bytes"},u,se)),h=rt(o)?o:B({format:"uint"},o,se),c=yield vB(i.requestManager,r,l,h);return B(GB,c,a!=null?a:i.defaultReturnFormat)})}function a5(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s,o){const a=B({format:"uint"},i,se),l=rt(r)?r:B({format:"uint"},r,se),h=B({type:"array",items:{format:"uint"}},s,yh),c=yield gB(t.requestManager,a,l,h);return B(XB,c,o!=null?o:t.defaultReturnFormat)})}function $x(n,e){return Ae(this,arguments,void 0,function*(t,i,r=t.defaultBlock,s){const o=rt(r)?r:B({format:"uint"},r,se),a=yield xB(t.requestManager,Dt(i,se,{transactionSchema:t.config.customTransactionSchema}),o);return B(NB,a,s!=null?s:t.defaultReturnFormat)})}function l5(n,e,t,i,r){return Ae(this,void 0,void 0,function*(){const s=yield SB(n.requestManager,e,t,i);return B({format:"bytes"},s,r!=null?r:n.defaultReturnFormat)})}var Gs=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};function c5(n,e){return Gs(this,void 0,void 0,function*(){const t=yield cB(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function h5(n,e,t){return Gs(this,void 0,void 0,function*(){let{toBlock:i,fromBlock:r}=e;E(i)||(typeof i=="number"||typeof i=="bigint")&&(i=Je(i)),E(r)||(typeof r=="number"||typeof r=="bigint")&&(r=Je(r));const s=Object.assign(Object.assign({},e),{fromBlock:r,toBlock:i}),o=yield aB(n.requestManager,s);return B({format:"uint"},o,t!=null?t:n.defaultReturnFormat)})}function u5(n,e){return Gs(this,void 0,void 0,function*(){const t=yield lB(n.requestManager);return B({format:"uint"},t,e!=null?e:n.defaultReturnFormat)})}function f5(n,e){return Gs(this,void 0,void 0,function*(){return yield hB(n.requestManager,Je(e))})}function d5(n,e,t){return Gs(this,void 0,void 0,function*(){return(yield uB(n.requestManager,Je(e))).map(s=>typeof s=="string"?s:B(Ds,s,t!=null?t:n.defaultReturnFormat))})}function p5(n,e,t){return Gs(this,void 0,void 0,function*(){return(yield fB(n.requestManager,Je(e))).map(s=>typeof s=="string"?s:B(Ds,s,t!=null?t:n.defaultReturnFormat))})}class Mx extends Pa{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return B(Ds,e,super.returnFormat)}}class Bx extends Pa{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return B({format:"string"},e,super.returnFormat)}}class Eh extends Pa{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return B(jB,e,super.returnFormat)}}class Zx extends Pa{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if(typeof e=="boolean")this.emit("changed",e);else{const t=Object.fromEntries(Object.entries((e==null?void 0:e.status)||e).map(([i,r])=>[i.charAt(0).toLowerCase()+i.substring(1),r]));this.emit("changed",e.syncing),this.emit("data",B(qB,t,super.returnFormat))}}}var ae=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const zp={logs:Mx,newPendingTransactions:Bx,newHeads:Eh,syncing:Zx,pendingTransactions:Bx,newBlockHeaders:Eh};class _h extends Nt{constructor(e){if(typeof e=="string"||oh(e)){super({provider:e,registeredSubscriptions:zp});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:zp})),this.getFeeData=this.calculateFeeData}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return ae(this,void 0,void 0,function*(){return RM(this.requestManager)})}isSyncing(){return ae(this,void 0,void 0,function*(){return Dw(this.requestManager)})}getCoinbase(){return ae(this,void 0,void 0,function*(){return $M(this.requestManager)})}isMining(){return ae(this,void 0,void 0,function*(){return MM(this.requestManager)})}getHashrate(e){return ae(this,void 0,void 0,function*(){var t;return e===void 0&&(e=(t=this.defaultReturnFormat)!==null&&t!==void 0?t:xt),this.getHashRate(e)})}getHashRate(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return FZ(this,e)})}getGasPrice(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Fp(this,e)})}getMaxPriorityFeePerGas(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return VZ(this,e)})}calculateFeeData(){return ae(this,arguments,void 0,function*(e=BigInt(2),t=zc.Gwei){var i;const r=yield this.getBlock(void 0,!1),s=(i=r==null?void 0:r.baseFeePerGas)!==null&&i!==void 0?i:void 0;let o;try{o=yield this.getGasPrice()}catch(h){}let a;try{a=yield this.getMaxPriorityFeePerGas()}catch(h){}let l;if(s){a=a!=null?a:t;let h;typeof e=="number"?h=BigInt(Math.floor(e*1e3))/BigInt(1e3):h=e,l=s*h+a}return{gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:a,baseFeePerGas:s}})}getAccounts(){return ae(this,void 0,void 0,function*(){var e;return((e=yield NM(this.requestManager))!==null&&e!==void 0?e:[]).map(i=>Xn(i))})}getBlockNumber(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Vp(this,e)})}getBalance(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return HZ(this,t,i,r)})}getStorageAt(e,t){return ae(this,arguments,void 0,function*(i,r,s=this.defaultBlock,o=this.defaultReturnFormat){return WZ(this,i,r,s,o)})}getCode(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return zZ(this,t,i,r)})}getBlock(){return ae(this,arguments,void 0,function*(e=this.defaultBlock,t=!1,i=this.defaultReturnFormat){return _x(this,e,t,i)})}getBlockTransactionCount(){return ae(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return YZ(this,e,t)})}getBlockUncleCount(){return ae(this,arguments,void 0,function*(e=this.defaultBlock,t=this.defaultReturnFormat){return KZ(this,e,t)})}getUncle(){return ae(this,arguments,void 0,function*(e=this.defaultBlock,t,i=this.defaultReturnFormat){return JZ(this,e,t,i)})}getTransaction(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){const r=yield e5(this,t,i);if(!r)throw new bb;return r})}getPendingTransactions(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return t5(this,e)})}getTransactionFromBlock(){return ae(this,arguments,void 0,function*(e=this.defaultBlock,t,i=this.defaultReturnFormat){return n5(this,e,t,i)})}getTransactionReceipt(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){const r=yield Qx(this,t,i);if(!r)throw new bb;return r})}getTransactionCount(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return Cx(this,t,i,r)})}sendTransaction(e,t=this.defaultReturnFormat,i){return $a(this,e,t,i,this.transactionMiddleware)}sendSignedTransaction(e,t=this.defaultReturnFormat,i){return i5(this,e,t,i)}sign(e,t){return ae(this,arguments,void 0,function*(i,r,s=this.defaultReturnFormat){return r5(this,i,r,s)})}signTransaction(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){return s5(this,t,i)})}call(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return Hp(this,t,i,r)})}estimateGas(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return Wp(this,t,i,r)})}getPastLogs(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){return Ix(this,t,i)})}getWork(){return ae(this,void 0,void 0,function*(){return pB(this.requestManager)})}submitWork(e,t,i){return ae(this,void 0,void 0,function*(){return mB(this.requestManager,e,t,i)})}requestAccounts(){return ae(this,void 0,void 0,function*(){return yB(this.requestManager)})}getChainId(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return Rx(this,e)})}getNodeInfo(){return ae(this,void 0,void 0,function*(){return wB(this.requestManager)})}getProof(e,t){return ae(this,arguments,void 0,function*(i,r,s=this.defaultBlock,o=this.defaultReturnFormat){return o5(this,i,r,s,o)})}getFeeHistory(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r,s=this.defaultReturnFormat){return a5(this,t,i,r,s)})}createAccessList(e){return ae(this,arguments,void 0,function*(t,i=this.defaultBlock,r=this.defaultReturnFormat){return $x(this,t,i,r)})}signTypedData(e,t,i,r){return ae(this,void 0,void 0,function*(){var s;return i===void 0&&(i=!1),r===void 0&&(r=(s=this.defaultReturnFormat)!==null&&s!==void 0?s:xt),l5(this,e,t,i,r)})}subscribe(e,t,i){return ae(this,void 0,void 0,function*(){var r,s;i===void 0&&(i=(r=this.defaultReturnFormat)!==null&&r!==void 0?r:xt);const o=yield(s=this.subscriptionManager)===null||s===void 0?void 0:s.subscribe(e,t,i);return o instanceof Mx&&e==="logs"&&typeof t=="object"&&!ee(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate(()=>{this.getPastLogs(t).then(a=>{for(const l of a)o._processSubscriptionResult(l)}).catch(a=>{o._processSubscriptionError(a)})}),o})}static shouldClearSubscription({sub:e}){return!(e instanceof Zx)}clearSubscriptions(e=!1){var t;return(t=this.subscriptionManager)===null||t===void 0?void 0:t.unsubscribe(e?_h.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return c5(this,e)})}createNewFilter(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){return h5(this,t,i)})}createNewBlockFilter(){return ae(this,arguments,void 0,function*(e=this.defaultReturnFormat){return u5(this,e)})}uninstallFilter(e){return ae(this,void 0,void 0,function*(){return f5(this,e)})}getFilterChanges(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){return d5(this,t,i)})}getFilterLogs(e){return ae(this,arguments,void 0,function*(t,i=this.defaultReturnFormat){return p5(this,t,i)})}}const m5=n=>{if(!E(n.common)){if(E(n.common.customChain))throw new oC;if(E(n.common.customChain.chainId))throw new aC;if(!E(n.chainId)&&n.chainId!==n.common.customChain.chainId)throw new lC({txChainId:n.chainId,customChainId:n.common.customChain.chainId})}},g5=n=>{if(!E(n.common)&&!E(n.chain)&&!E(n.hardfork))throw new uC;if(!E(n.chain)&&E(n.hardfork)||!E(n.hardfork)&&E(n.chain))throw new fC({chain:n.chain,hardfork:n.hardfork})},O5=n=>{if(!E(n.common)&&!E(n.common.baseChain)&&!E(n.chain)&&n.chain!==n.common.baseChain)throw new cC({txChain:n.chain,baseChain:n.common.baseChain})},y5=n=>{if(!E(n.common)&&!E(n.common.hardfork)&&!E(n.hardfork)&&n.hardfork!==n.common.hardfork)throw new hC({txHardfork:n.hardfork,commonHardfork:n.common.hardfork})},Lx=n=>{if(E(n.gas)||!hi(n.gas)||E(n.gasPrice)||!hi(n.gasPrice))throw new OC({gas:n.gas,gasPrice:n.gasPrice});if(!E(n.maxFeePerGas)||!E(n.maxPriorityFeePerGas))throw new vb({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas})},Nx=n=>{if(!E(n.gasPrice)&&n.type==="0x2")throw new bC(n.gasPrice);if(n.type==="0x0"||n.type==="0x1")throw new vb({maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas});if(E(n.maxFeePerGas)||!hi(n.maxFeePerGas)||E(n.maxPriorityFeePerGas)||!hi(n.maxPriorityFeePerGas))throw new yC({maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},b5=n=>{const e=!E(n.gas)||!E(n.gasLimit),t=e&&!E(n.gasPrice),i=e&&!E(n.maxPriorityFeePerGas)&&!E(n.maxFeePerGas);if(!t&&!i)throw new pC({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});if(t&&i)throw new gC({gas:n.gas,gasPrice:n.gasPrice,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas});(t?Lx:Nx)(n),(!E(n.type)&&n.type>"0x1"?Nx:Lx)(n)},v5=(n,e,t={transactionSchema:void 0})=>{if(!E(e)){e(n);return}if(typeof n!="object"||E(n))throw new vC(n);m5(n),g5(n),O5(n),y5(n);const i=Dt(n,se,{transactionSchema:t.transactionSchema});if(b5(i),E(i.nonce)||E(i.chainId)||i.nonce.startsWith("-")||i.chainId.startsWith("-"))throw new wC({nonce:n.nonce,chainId:n.chainId})};var w5=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const x5=n=>{var e,t;return Object.assign(Object.assign({},n),{nonce:n.nonce,gasPrice:n.gasPrice,gasLimit:(e=n.gasLimit)!==null&&e!==void 0?e:n.gas,to:n.to,value:n.value,data:(t=n.data)!==null&&t!==void 0?t:n.input,type:n.type,chainId:n.chainId,accessList:n.accessList,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas})},S5=(n,e)=>{var t,i,r,s,o,a,l,h,c,u,f,d,p,m,g,O,y,w;const k=!E(n.chain)&&!E(n.hardfork)||!E(n.common);let x;if(!k)e.defaultCommon?(x=Object.assign({},e.defaultCommon),E(x.hardfork)&&(x.hardfork=(t=n.hardfork)!==null&&t!==void 0?t:e.defaultHardfork),E(x.baseChain)&&(x.baseChain=e.defaultChain)):x=et.custom({name:"custom-network",chainId:Zt(n.chainId),networkId:E(n.networkId)?void 0:Zt(n.networkId),defaultHardfork:(i=n.hardfork)!==null&&i!==void 0?i:e.defaultHardfork},{baseChain:e.defaultChain});else{const T=(a=(o=(s=(r=n==null?void 0:n.common)===null||r===void 0?void 0:r.customChain)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:n.chain)!==null&&a!==void 0?a:"custom-network",A=Zt((c=(h=(l=n==null?void 0:n.common)===null||l===void 0?void 0:l.customChain)===null||h===void 0?void 0:h.chainId)!==null&&c!==void 0?c:n==null?void 0:n.chainId),S=Zt((d=(f=(u=n==null?void 0:n.common)===null||u===void 0?void 0:u.customChain)===null||f===void 0?void 0:f.networkId)!==null&&d!==void 0?d:n==null?void 0:n.networkId),I=(g=(m=(p=n==null?void 0:n.common)===null||p===void 0?void 0:p.hardfork)!==null&&m!==void 0?m:n==null?void 0:n.hardfork)!==null&&g!==void 0?g:e.defaultHardfork,_=(w=(y=(O=n.common)===null||O===void 0?void 0:O.baseChain)!==null&&y!==void 0?y:n.chain)!==null&&w!==void 0?w:e.defaultChain;A&&S&&T&&(x=et.custom({name:T,chainId:A,networkId:S,defaultHardfork:I},{baseChain:_}))}return{common:x}},A5=(n,e,t,...i)=>w5(void 0,[n,e,t,...i],void 0,function*(r,s,o,a=!1,l=!0){const h=yield KB({transaction:r,web3Context:s,privateKey:o,fillGasPrice:a,fillGasLimit:l}),c=Dt(h,se,{transactionSchema:s.config.customTransactionSchema});return v5(c,void 0,{transactionSchema:s.config.customTransactionSchema}),Cr.fromTxData(x5(c),S5(c,s))}),Dx=({address:n},e,t)=>{var i,r;const s=t==null?void 0:t.topics,o=(i=t==null?void 0:t.filter)!==null&&i!==void 0?i:{},a={};if(ee(t==null?void 0:t.fromBlock)||(a.fromBlock=B(Oh.properties.number,t==null?void 0:t.fromBlock,{number:sn.HEX,bytes:ni.HEX})),ee(t==null?void 0:t.toBlock)||(a.toBlock=B(Oh.properties.number,t==null?void 0:t.toBlock,{number:sn.HEX,bytes:ni.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],e&&!e.anonymous&&![qs,"allEvents"].includes(e.name)&&a.topics.push((r=e.signature)!==null&&r!==void 0?r:Mp(yi(e))),![qs,"allEvents"].includes(e.name)&&e.inputs)for(const l of e.inputs){if(!l.indexed)continue;const h=o[l.name];if(!h){a.topics.push(null);continue}Array.isArray(h)?a.topics.push(h.map(c=>qp(l.type,c))):l.type==="string"?a.topics.push(Ts(h)):a.topics.push(qp(l.type,h))}return a.topics.length||delete a.topics,n&&(a.address=n.toLowerCase()),a},Ma=(n,e,t)=>{const i=Array.isArray(n.inputs)?n.inputs.length:0;if(n.inputs&&i!==e.length)throw new St(`The number of arguments is not matching the methods required number. You need to pass ${i} arguments.`);let r;if(n.inputs?r=Ph(Array.isArray(n.inputs)?n.inputs:[],e).replace("0x",""):r=BZ(e).replace("0x",""),rZ(n)){if(!t)throw new St("The contract has no contract data option set. This is necessary to append the constructor parameters.");return t.startsWith("0x")?`${t}${r}`:`0x${t}${r}`}return`${Ra(n)}${r}`};class jx extends Pa{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return Gp(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));const Qh=(n,e,t,i)=>{var r,s;const o={};return(!ee(n.data)||i==="both")&&(o.data=Ma(e,t,(r=n.data)!==null&&r!==void 0?r:n.input)),(!ee(n.input)||i==="both")&&(o.input=Ma(e,t,(s=n.input)!==null&&s!==void 0?s:n.data)),ee(o.input)&&ee(o.data)&&(o[i]=Ma(e,t)),{data:o.data,input:o.input}},Yp=({abi:n,params:e,options:t,contractOptions:i})=>{var r,s,o;if(!((o=(s=(r=t==null?void 0:t.input)!==null&&r!==void 0?r:t==null?void 0:t.data)!==null&&s!==void 0?s:i.input)!==null&&o!==void 0?o:i.data)&&!(t!=null&&t.to)&&!i.address)throw new St("Contract address not specified");if(!(t!=null&&t.from)&&!i.from)throw new St('Contract "from" address not specified');let l=Vi({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},t);const h=Qh(l,n,e,t==null?void 0:t.dataInputFill);return l=Object.assign(Object.assign({},l),{data:h.data,input:h.input}),l},k5=({abi:n,params:e,options:t,contractOptions:i})=>{if(!(t!=null&&t.to)&&!i.address)throw new St("Contract address not specified");let r=Vi({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},t);const s=Qh(r,n,e,t==null?void 0:t.dataInputFill);return r=Object.assign(Object.assign({},r),{data:s.data,input:s.input}),r},P5=({abi:n,params:e,options:t,contractOptions:i})=>{let r=Vi({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,data:i.data},t);const s=Qh(r,n,e,t==null?void 0:t.dataInputFill);return r=Object.assign(Object.assign({},r),{data:s.data,input:s.input}),r},qx=n=>typeof n=="object"&&!ee(n)&&Object.keys(n).length!==0&&!Fi(n),T5=({abi:n,params:e,options:t,contractOptions:i})=>{if(!(t!=null&&t.to)&&!i.address)throw new St("Contract address not specified");if(!(t!=null&&t.from)&&!i.from)throw new St('Contract "from" address not specified');let r=Vi({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},t);const s=Qh(r,n,e,t==null?void 0:t.dataInputFill);return r=Object.assign(Object.assign({},r),{data:s.data,input:s.input}),r};var E5=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class _5{_contractMethodDeploySend(e){const t={transactionResolver:i=>{if(i.status===BigInt(0))throw new St("code couldn't be stored",i);const r=this.parent.clone();return r.options.address=i.contractAddress,r},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return E(this.parent.getTransactionMiddleware())?$a(this.parent,e,this.parent.defaultReturnFormat,t):$a(this.parent,e,this.parent.defaultReturnFormat,t,this.parent.getTransactionMiddleware())}constructor(e,t){this.parent=e,this.deployOptions=t;const{args:i,abi:r,contractOptions:s,deployData:o}=this.calculateDeployParams();this.args=i,this.constructorAbi=r,this.contractOptions=s,this.deployData=o}send(e){const t=Object.assign({},e),i=this.populateTransaction(t);return this._contractMethodDeploySend(i)}populateTransaction(e){var t,i;const r=Object.assign(Object.assign({},this.contractOptions),{from:(i=(t=this.contractOptions.from)!==null&&t!==void 0?t:this.parent.defaultAccount)!==null&&i!==void 0?i:void 0}),s=Yp({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:r});return s.dataInputFill&&delete s.dataInputFill,s}calculateDeployParams(){var e,t,i,r,s,o;let a=this.parent.options.jsonInterface.find(d=>d.type==="constructor");a||(a={type:"constructor",stateMutability:""});const l=B({format:"bytes"},(t=(e=this.deployOptions)===null||e===void 0?void 0:e.input)!==null&&t!==void 0?t:this.parent.options.input,xt),h=B({format:"bytes"},(r=(i=this.deployOptions)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:this.parent.options.data,xt);if((!l||l.trim()==="0x")&&(!h||h.trim()==="0x"))throw new St("contract creation without any data provided.");const c=(o=(s=this.deployOptions)===null||s===void 0?void 0:s.arguments)!==null&&o!==void 0?o:[],u=Object.assign(Object.assign({},this.parent.options),{input:l,data:h}),f=l!=null?l:h;return{args:c,abi:a,contractOptions:u,deployData:f}}estimateGas(e){return E5(this,arguments,void 0,function*(t,i=this.parent.defaultReturnFormat){const r=Object.assign({},t);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:i,options:r,contractOptions:this.contractOptions})})}encodeABI(){return Ma(this.constructorAbi,this.args,B({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},Up(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}var Q5=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class C5 extends ah{constructor(e,t){super(e.requestManager,e.registeredSubscriptions),this.parentContract=t}subscribe(e,t){const i=Object.create(null,{subscribe:{get:()=>super.subscribe}});return Q5(this,arguments,void 0,function*(r,s,o=xt){return i.subscribe.call(this,r,s!=null?s:this.parentContract.options,o)})}}var $r=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const I5={logs:jx,newHeads:Eh,newBlockHeaders:Eh};class Mr extends Nt{get subscriptionManager(){return this._subscriptionManager}constructor(e,t,i,r,s){var o,a,l;const h=Fi(t)?t:Fi(i)?i:void 0;let c;qx(t)?c=t:qx(i)?c=i:c=r;let u;if(typeof t=="object"&&"provider"in t?u=t.provider:typeof i=="object"&&"provider"in i?u=i.provider:typeof r=="object"&&"provider"in r?u=r.provider:u=Mr.givenProvider,super(Object.assign(Object.assign({},c),{provider:u,registeredSubscriptions:I5})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new C5(super.subscriptionManager,this),c!=null&&c.wallet&&(this._wallet=c.wallet),c!=null&&c.accountProvider&&(this._accountProvider=c.accountProvider),!E(h)&&!E(h.data)&&!E(h.input)&&this.config.contractDataInputFill!=="both")throw new z2({data:h.data,input:h.input});this._overloadedMethodAbis=new Map;const f=fi(r)?r:fi(i)?i:s!=null?s:this.defaultReturnFormat,d=typeof t=="string"?t:void 0;this.config.contractDataInputFill=(o=h==null?void 0:h.dataInputFill)!==null&&o!==void 0?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,f),this.defaultReturnFormat!==f&&(this.defaultReturnFormat=f),E(d)||this._parseAndSetAddress(d,f),this.options={address:d,jsonInterface:this._jsonInterface,gas:(a=h==null?void 0:h.gas)!==null&&a!==void 0?a:h==null?void 0:h.gasLimit,gasPrice:h==null?void 0:h.gasPrice,from:h==null?void 0:h.from,input:h==null?void 0:h.input,data:h==null?void 0:h.data},this.syncWithContext=(l=h==null?void 0:h.syncWithContext)!==null&&l!==void 0?l:!1,c instanceof Nt&&this.subscribeToContextEvents(c),Object.defineProperty(this.options,"address",{set:p=>this._parseAndSetAddress(p,f),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:p=>this._parseAndSetJsonInterface(p,f),get:()=>this._jsonInterface}),c instanceof Nt&&c.on(Sr.CONFIG_CHANGE,p=>{this.setConfig({[p.name]:p.newValue})})}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return this.options.address?e=new Mr([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):e=new Mr([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new _5(this,e)}getPastEvents(e,t,i){return $r(this,void 0,void 0,function*(){var r;const s=typeof e=="string"?e:qs,o=typeof e!="string"&&!fi(e)?e:fi(t)?{}:t,a=fi(e)?e:fi(t)?t:i!=null?i:this.defaultReturnFormat,l=s==="allEvents"||s===qs?Tp:this._jsonInterface.find(O=>"name"in O&&O.name===s);if(!l)throw new St(`Event ${String(s)} not found.`);const{fromBlock:h,toBlock:c,topics:u,address:f}=Dx(this.options,l,o!=null?o:{}),d=yield Ix(this,{fromBlock:h,toBlock:c,topics:u,address:f},a),p=d?d.map(O=>typeof O=="string"?O:Gp(l,O,this._jsonInterface,a)):[],m=(r=o==null?void 0:o.filter)!==null&&r!==void 0?r:{},g=Object.keys(m);return g.length>0?p.filter(O=>typeof O=="string"?!0:g.every(y=>{var w;if(Array.isArray(m[y]))return m[y].some(x=>String(O.returnValues[y]).toUpperCase()===String(x).toUpperCase());const k=(w=l.inputs)===null||w===void 0?void 0:w.filter(x=>x.name===y)[0];return k!=null&&k.indexed&&k.type==="string"&&Ts(m[y])===String(O.returnValues[y])?!0:String(O.returnValues[y]).toUpperCase()===String(m[y]).toUpperCase()})):p})}_parseAndSetAddress(e,t=this.defaultReturnFormat){this._address=e&&Xn(B({format:"address"},e,t))}decodeMethodData(e){const t=e.slice(0,10),r=this._jsonInterface.filter(s=>s.type!=="error").find(s=>t===Ra(yi(s)));if(!r)throw new St(`The ABI for the provided method signature ${t} was not found.`);return Up(r,e)}_parseAndSetJsonInterface(e,t=this.defaultReturnFormat){var i,r;this._functions={},this._methods={},this._events={};let s=[];const o=e.filter(l=>l.type!=="error"),a=e.filter(l=>vh(l));for(const l of o){const h=Object.assign(Object.assign({},l),{signature:""});if(wh(h)){const c=yi(h),u=Ra(c);h.methodNameWithInputs=c,h.signature=u,h.constant=h.stateMutability==="view"||h.stateMutability==="pure"||h.constant,h.payable=h.stateMutability==="payable"||h.payable,this._overloadedMethodAbis.set(h.name,[...(i=this._overloadedMethodAbis.get(h.name))!==null&&i!==void 0?i:[],h]);const f=(r=this._overloadedMethodAbis.get(h.name))!==null&&r!==void 0?r:[],d=this._createContractMethod(f,a),p=this._createContractMethod(f,a,!0);this._functions[c]={signature:u,method:p},this._methods[h.name]=d,this._methods[c]=p,this._methods[u]=p}else if(Rp(h)){const c=yi(h),u=Mp(c),f=this._createContractEvent(h,t);h.signature=u,(!(c in this._events)||h.name==="bound")&&(this._events[c]=f),this._events[h.name]=f,this._events[u]=f}s=[...s,h]}this._events.allEvents=this._createContractEvent(Tp,t),this._jsonInterface=[...s],this._errorsInterface=a}_getAbiParams(e,t){var i;try{return pa((i=e.inputs)!==null&&i!==void 0?i:[],t)}catch(r){throw new St(`Invalid parameters for method ${e.name}: ${r.message}`)}}_createContractMethod(e,t,i=!1){const r=e[e.length-1];return(...s)=>{var o,a,l;let h;const c=(a=i?(o=this._overloadedMethodAbis.get(r.name))===null||o===void 0?void 0:o.filter(m=>m.signature===r.signature):this._overloadedMethodAbis.get(r.name))!==null&&a!==void 0?a:[];let u=c[0];const f=t,d=c.filter(m=>{var g;return((g=m.inputs)!==null&&g!==void 0?g:[]).length===s.length});if(c.length===1||d.length===0)h=this._getAbiParams(u,s),K.validate((l=r.inputs)!==null&&l!==void 0?l:[],h);else{const m=[],g=[];for(const O of d)try{h=this._getAbiParams(O,s),K.validate(O.inputs,h),g.push(O)}catch(y){m.push(y)}if(g.length===1?[u]=g:g.length>1&&([u]=g,console.warn(`Multiple methods found that is compatible with the given inputs.
	Found ${g.length} compatible methods: ${JSON.stringify(g.map(O=>`${O.methodNameWithInputs} (signature: ${O.signature})`))} 
	The first one will be used: ${u.methodNameWithInputs}`)),m.length===d.length)throw new xs(m)}const p={arguments:h,call:(m,g)=>$r(this,void 0,void 0,function*(){return this._contractMethodCall(u,h,f,m,g)}),send:m=>this._contractMethodSend(u,h,f,m),populateTransaction:(m,g)=>{var O,y;let w=g!=null?g:this.options;w=Object.assign(Object.assign({},w),{input:void 0,from:(y=(O=w==null?void 0:w.from)!==null&&O!==void 0?O:this.defaultAccount)!==null&&y!==void 0?y:void 0});const k=Yp({abi:r,params:s,options:Object.assign(Object.assign({},m),{dataInputFill:this.config.contractDataInputFill}),contractOptions:w});return k.dataInputFill&&delete k.dataInputFill,k},estimateGas:(m,...g)=>$r(this,[m,...g],void 0,function*(O,y=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:u,params:h,returnFormat:y,options:O})}),encodeABI:()=>Ma(u,h),decodeData:m=>Up(u,m),createAccessList:(m,g)=>$r(this,void 0,void 0,function*(){return this._contractMethodCreateAccessList(u,h,f,m,g)})};return u.stateMutability==="payable",p}}_contractMethodCall(e,t,i,r,s){return $r(this,void 0,void 0,function*(){var o;const a=k5({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{const l=yield Hp(this,a,s,this.defaultReturnFormat);return LZ(e,l)}catch(l){throw l instanceof fr&&Th(i,l.cause),l}})}_contractMethodCreateAccessList(e,t,i,r,s){return $r(this,void 0,void 0,function*(){var o;const a=T5({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:(o=this.options.from)!==null&&o!==void 0?o:this.config.defaultAccount})});try{return $x(this,a,s,this.defaultReturnFormat)}catch(l){throw l instanceof fr&&Th(i,l.cause),l}})}_contractMethodSend(e,t,i,r,s){var o,a;let l=s!=null?s:this.options;l=Object.assign(Object.assign({},l),{input:void 0,from:(a=(o=l.from)!==null&&o!==void 0?o:this.defaultAccount)!==null&&a!==void 0?a:void 0});const h=Yp({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:l}),c=E(this.transactionMiddleware)?$a(this,h,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):$a(this,h,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return c.on("error",u=>{u instanceof fr&&Th(i,u.cause)}),c}contractMethodEstimateGas(e){return $r(this,arguments,void 0,function*({abi:t,params:i,returnFormat:r,options:s,contractOptions:o}){const a=P5({abi:t,params:i,options:Object.assign(Object.assign({},s),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o!=null?o:this.options});return Wp(this,a,ii.LATEST,r!=null?r:this.defaultReturnFormat)})}_createContractEvent(e,t=this.defaultReturnFormat){return(...i)=>{var r;const{topics:s,fromBlock:o}=Dx(this.options,e,i[0]),a=new jx({address:this.options.address,topics:s,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return E(o)||this.getPastEvents(e.name,{fromBlock:o,topics:s},t).then(l=>{l&&l.forEach(h=>a.emit("data",h))}).catch(l=>{a.emit("error",new si("Failed to get past events.",l))}),(r=this.subscriptionManager)===null||r===void 0||r.addSubscription(a).catch(l=>{a.emit("error",new si("Failed to subscribe.",l))}),a}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(Sr.CONFIG_CHANGE,i=>{t.setConfig({[i.name]:i.newValue})})}}const Ux={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},Fs={setAddr:"addr",addr:"addr",setPubkey:"pubkey",pubkey:"pubkey",setContenthash:"contenthash",contenthash:"contenthash",text:"text",name:"name"},Ch={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},R5={"0x1":"main","0x5":"goerli"},$5=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],M5=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}];var B5="AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28";const Xx=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Gx=4;function Z5(n){let e=0;function t(){return n[e++]<<8|n[e++]}let i=t(),r=1,s=[0,1];for(let x=1;x<i;x++)s.push(r+=t());let o=t(),a=e;e+=o;let l=0,h=0;function c(){return l==0&&(h=h<<8|n[e++],l=8),h>>--l&1}const u=31,f=Yn(2,u),d=f>>>1,p=d>>1,m=f-1;let g=0;for(let x=0;x<u;x++)g=g<<1|c();let O=[],y=0,w=f;for(;;){let x=Math.floor(((g-y+1)*r-1)/w),T=0,A=i;for(;A-T>1;){let _=T+A>>>1;x<s[_]?A=_:T=_}if(T==0)break;O.push(T);let S=y+Math.floor(w*s[T]/r),I=y+Math.floor(w*s[T+1]/r)-1;for(;!((S^I)&d);)g=g<<1&m|c(),S=S<<1&m,I=I<<1&m|1;for(;S&~I&p;)g=g&d|g<<1&m>>>1|c(),S=S<<1^d,I=(I^d)<<1|d|1;y=S,w=1+I-S}let k=i-4;return O.map(x=>{switch(x-k){case 3:return k+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return k+256+(n[a++]<<8|n[a++]);case 1:return k+n[a++];default:return x-1}})}function L5(n){let e=0;return()=>n[e++]}function Fx(n){return L5(Z5(N5(n)))}function N5(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,s)=>e[r.charCodeAt(0)]=s);let t=n.length,i=new Uint8Array(6*t>>3);for(let r=0,s=0,o=0,a=0;r<t;r++)a=a<<6|e[n.charCodeAt(r)],o+=6,o>=8&&(i[s++]=a>>(o-=8));return i}function D5(n){return n&1?~n>>1:n>>1}function j5(n,e){let t=Array(n);for(let i=0,r=0;i<n;i++)t[i]=r+=D5(e());return t}function Ba(n,e=0){let t=[];for(;;){let i=n(),r=n();if(!r)break;e+=i;for(let s=0;s<r;s++)t.push(e+s);e+=r+1}return t}function Vx(n){return Za(()=>{let e=Ba(n);if(e.length)return e})}function Hx(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(q5(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(U5(t,n))}return e.flat()}function Za(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function Wx(n,e,t){let i=Array(n).fill().map(()=>[]);for(let r=0;r<e;r++)j5(n,t).forEach((s,o)=>i[o].push(s));return i}function q5(n,e){let t=1+e(),i=e(),r=Za(e);return Wx(r.length,1+n,e).flatMap((o,a)=>{let[l,...h]=o;return Array(r[a]).fill().map((c,u)=>{let f=u*i;return[l+u*t,h.map(d=>d+f)]})})}function U5(n,e){let t=1+e();return Wx(t,1+n,e).map(r=>[r[0],r.slice(1)])}function X5(n){let e=[],t=Ba(n);return r(i([]),[]),e;function i(s){let o=n(),a=Za(()=>{let l=Ba(n).map(h=>t[h]);if(l.length)return i(l)});return{S:o,B:a,Q:s}}function r({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let h of o)for(let c of h.Q)r(h,[...a,c],l)}}}function G5(n){return n.toString(16).toUpperCase().padStart(2,"0")}function zx(n){return`{${G5(n)}}`}function F5(n){let e=[];for(let t=0,i=n.length;t<i;){let r=n.codePointAt(t);t+=r<65536?1:2,e.push(r)}return e}function Vs(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let i=[];for(let r=0;r<t;)i.push(String.fromCodePoint(...n.slice(r,r+=4096)));return i.join("")}function V5(n,e){let t=n.length,i=t-e.length;for(let r=0;i==0&&r<t;r++)i=n[r]-e[r];return i}var H5="AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA";const La=44032,Ih=4352,Rh=4449,$h=4519,Yx=19,Kx=21,Hs=28,Mh=Kx*Hs,W5=Yx*Mh,z5=La+W5,Y5=Ih+Yx,K5=Rh+Kx,J5=$h+Hs;function Na(n){return n>>24&255}function Jx(n){return n&16777215}let Kp,e1,Jp,Bh;function eL(){let n=Fx(H5);Kp=new Map(Vx(n).flatMap((e,t)=>e.map(i=>[i,t+1<<24]))),e1=new Set(Ba(n)),Jp=new Map,Bh=new Map;for(let[e,t]of Hx(n)){if(!e1.has(e)&&t.length==2){let[i,r]=t,s=Bh.get(i);s||(s=new Map,Bh.set(i,s)),s.set(r,e)}Jp.set(e,t.reverse())}}function t1(n){return n>=La&&n<z5}function tL(n,e){if(n>=Ih&&n<Y5&&e>=Rh&&e<K5)return La+(n-Ih)*Mh+(e-Rh)*Hs;if(t1(n)&&e>$h&&e<J5&&(n-La)%Hs==0)return n+(e-$h);{let t=Bh.get(n);return t&&(t=t.get(e),t)?t:-1}}function n1(n){Kp||eL();let e=[],t=[],i=!1;function r(s){let o=Kp.get(s);o&&(i=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(t1(s)){let o=s-La,a=o/Mh|0,l=o%Mh/Hs|0,h=o%Hs;r(Ih+a),r(Rh+l),h>0&&r($h+h)}else{let o=Jp.get(s);o?t.push(...o):r(s)}if(!t.length)break;s=t.pop()}if(i&&e.length>1){let s=Na(e[0]);for(let o=1;o<e.length;o++){let a=Na(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let h=e[l+1];if(e[l+1]=e[l],e[l]=h,!l||(s=Na(e[--l]),s<=a))break}s=Na(e[o])}}return e}function nL(n){let e=[],t=[],i=-1,r=0;for(let s of n){let o=Na(s),a=Jx(s);if(i==-1)o==0?i=a:e.push(a);else if(r>0&&r>=o)o==0?(e.push(i,...t),t.length=0,i=a):t.push(a),r=o;else{let l=tL(i,a);l>=0?i=l:r==0&&o==0?(e.push(i),i=a):(t.push(a),r=o)}}return i>=0&&e.push(i,...t),e}function i1(n){return n1(n).map(Jx)}function iL(n){return nL(n1(n))}const r1=45,s1=".",o1=65039,a1=1,Zh=n=>Array.from(n);function Da(n,e){return n.P.has(e)||n.Q.has(e)}class rL extends Array{get is_emoji(){return!0}}let em,l1,Br,tm,c1,Ws,nm,zs,Zr,h1,im;function rm(){if(em)return;let n=Fx(B5);const e=()=>Ba(n),t=()=>new Set(e()),i=(c,u)=>u.forEach(f=>c.add(f));em=new Map(Hx(n)),l1=t(),Br=e(),tm=new Set(e().map(c=>Br[c])),Br=new Set(Br),c1=t(),t();let r=Vx(n),s=n();const o=()=>{let c=new Set;return e().forEach(u=>i(c,r[u])),i(c,e()),c};Ws=Za(c=>{let u=Za(n).map(f=>f+96);if(u.length){let f=c>=s;u[0]-=32,u=Vs(u),f&&(u=`Restricted[${u}]`);let d=o(),p=o(),m=!n();return{N:u,P:d,Q:p,M:m,R:f}}}),nm=t(),zs=new Map;let a=e().concat(Zh(nm)).sort((c,u)=>c-u);a.forEach((c,u)=>{let f=n(),d=a[u]=f?a[u-f]:{V:[],M:new Map};d.V.push(c),nm.has(c)||zs.set(c,d)});for(let{V:c,M:u}of new Set(zs.values())){let f=[];for(let p of c){let m=Ws.filter(O=>Da(O,p)),g=f.find(({G:O})=>m.some(y=>O.has(y)));g||(g={G:new Set,V:[]},f.push(g)),g.V.push(p),i(g.G,m)}let d=f.flatMap(p=>Zh(p.G));for(let{G:p,V:m}of f){let g=new Set(d.filter(O=>!p.has(O)));for(let O of m)u.set(O,g)}}Zr=new Set;let l=new Set;const h=c=>Zr.has(c)?l.add(c):Zr.add(c);for(let c of Ws){for(let u of c.P)h(u);for(let u of c.Q)h(u)}for(let c of Zr)!zs.has(c)&&!l.has(c)&&zs.set(c,a1);i(Zr,i1(Zr)),h1=X5(n).map(c=>rL.from(c)).sort(V5),im=new Map;for(let c of h1){let u=[im];for(let f of c){let d=u.map(p=>{let m=p.get(f);return m||(m=new Map,p.set(f,m)),m});f===o1?u.push(...d):u=d}for(let f of u)f.V=c}}function sm(n){return(u1(n)?"":`${om(Lh([n]))} `)+zx(n)}function om(n){return`"${n}"‎`}function sL(n){if(n.length>=4&&n[2]==r1&&n[3]==r1)throw new Error(`invalid label extension: "${Vs(n.slice(0,4))}"`)}function oL(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function aL(n){let e=n[0],t=Xx.get(e);if(t)throw ja(`leading ${t}`);let i=n.length,r=-1;for(let s=1;s<i;s++){e=n[s];let o=Xx.get(e);if(o){if(r==s)throw ja(`${t} + ${o}`);r=s+1,t=o}}if(r==i)throw ja(`trailing ${t}`)}function Lh(n,e=1/0,t=zx){let i=[];lL(n[0])&&i.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let r=0,s=n.length;for(let o=0;o<s;o++){let a=n[o];u1(a)&&(i.push(Vs(n.slice(r,o))),i.push(t(a)),r=o+1)}return i.push(Vs(n.slice(r,s))),i.join("")}function lL(n,e){return rm(),Br.has(n)}function u1(n){return rm(),c1.has(n)}function cL(n){return dL(hL(n,iL,gL))}function hL(n,e,t){if(!n)return[];rm();let i=0;return n.split(s1).map(r=>{let s=F5(r),o={input:s,offset:i};i+=s.length+1;try{let a=o.tokens=mL(s,e,t),l=a.length,h;if(!l)throw new Error("empty label");let c=o.output=a.flat();if(oL(c),!(o.emoji=l>1||a[0].is_emoji)&&c.every(f=>f<128))sL(c),h="ASCII";else{let f=a.flatMap(d=>d.is_emoji?[]:d);if(!f.length)h="Emoji";else{if(Br.has(c[0]))throw ja("leading combining mark");for(let m=1;m<l;m++){let g=a[m];if(!g.is_emoji&&Br.has(g[0]))throw ja(`emoji + combining mark: "${Vs(a[m-1])} + ${Lh([g[0]])}"`)}aL(c);let d=Zh(new Set(f)),[p]=fL(d);pL(p,f),uL(p,d),h=p.N}}o.type=h}catch(a){o.error=a}return o})}function uL(n,e){let t,i=[];for(let r of e){let s=zs.get(r);if(s===a1)return;if(s){let o=s.M.get(r);if(t=t?t.filter(a=>o.has(a)):Zh(o),!t.length)return}else i.push(r)}if(t){for(let r of t)if(i.every(s=>Da(r,s)))throw new Error(`whole-script confusable: ${n.N}/${r.N}`)}}function fL(n){let e=Ws;for(let t of n){let i=e.filter(r=>Da(r,t));if(!i.length)throw Ws.some(r=>Da(r,t))?d1(e[0],t):f1(t);if(e=i,i.length==1)break}return e}function dL(n){return n.map(({input:e,error:t,output:i})=>{if(t){let r=t.message;throw new Error(n.length==1?r:`Invalid label ${om(Lh(e,63))}: ${r}`)}return Vs(i)}).join(s1)}function f1(n){return new Error(`disallowed character: ${sm(n)}`)}function d1(n,e){let t=sm(e),i=Ws.find(r=>r.P.has(e));return i&&(t=`${i.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function ja(n){return new Error(`illegal placement: ${n}`)}function pL(n,e){for(let t of e)if(!Da(n,t))throw d1(n,t);if(n.M){let t=i1(e);for(let i=1,r=t.length;i<r;i++)if(tm.has(t[i])){let s=i+1;for(let o;s<r&&tm.has(o=t[s]);s++)for(let a=i;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${sm(o)}`);if(s-i>Gx)throw new Error(`excessive non-spacing marks: ${om(Lh(t.slice(i-1,s)))} (${s-i}/${Gx})`);i=s}}}function mL(n,e,t){let i=[],r=[];for(n=n.slice().reverse();n.length;){let s=OL(n);if(s)r.length&&(i.push(e(r)),r=[]),i.push(t(s));else{let o=n.pop();if(Zr.has(o))r.push(o);else{let a=em.get(o);if(a)r.push(...a);else if(!l1.has(o))throw f1(o)}}}return r.length&&i.push(e(r)),i}function gL(n){return n.filter(e=>e!=o1)}function OL(n,e){let t=im,i,r=n.length;for(;r&&(t=t.get(n[--r]),!!t);){let{V:s}=t;s&&(i=s,n.length=r)}return i}const yL=n=>cL(n),Hn=n=>{let e="";for(let t=0;t<32;t+=1)e+="00";if(n){const i=yL(n).split(".");for(let r=i.length-1;r>=0;r-=1){const s=Ht(i[r]).slice(2);e=Ht(`0x${e}${s}`).slice(2)}}return`0x${e}`};var Nh=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class bL{constructor(e,t){this.contract=new Mr($5,t!=null?t:Ch.main,e),this.context=e}getOwner(e){return Nh(this,void 0,void 0,function*(){try{return this.contract.methods.owner(Hn(e)).call()}catch(t){throw new Error}})}getTTL(e){return Nh(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(Hn(e)).call()}catch(t){throw new Error}})}recordExists(e){return Nh(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(Hn(e)).call()}catch(t){throw new Error}})}getResolver(e){return Nh(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(Hn(e)).call().then(t=>{if(typeof t=="string")return new Mr(M5,t,this.context);throw new Error})}catch(t){throw new Error}})}get events(){return this.contract.events}}var bi=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class vL{constructor(e){this.registry=e}getResolverContractAdapter(e){return bi(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,t){var i,r;return bi(this,void 0,void 0,function*(){if(ee(Ux[t]))throw new pb((i=e.options.address)!==null&&i!==void 0?i:"",t);if(!(yield e.methods.supportsInterface(Ux[t]).call()))throw new pb((r=e.options.address)!==null&&r!==void 0?r:"",t)})}supportsInterface(e,t){var i;return bi(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);let s=t;if(!Se(s)){if(s=(i=wa(t))!==null&&i!==void 0?i:"",t==="")throw new Error("Invalid interface Id");s=s.slice(0,10)}return r.methods.supportsInterface(s).call()})}getAddress(e,t=60){return bi(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(i,Fs.addr),i.methods.addr(Hn(e),t).call()})}getPubkey(e){return bi(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,Fs.pubkey),t.methods.pubkey(Hn(e)).call()})}getContenthash(e){return bi(this,void 0,void 0,function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,Fs.contenthash),t.methods.contenthash(Hn(e)).call()})}setAddress(e,t,i){return bi(this,void 0,void 0,function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,Fs.setAddr),r.methods.setAddr(Hn(e),t).send(i)})}getText(e,t){return bi(this,void 0,void 0,function*(){const i=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(i,Fs.text),i.methods.text(Hn(e),t).call()})}getName(e,t=!0){return bi(this,void 0,void 0,function*(){const i=`${e.toLowerCase().substring(2)}.addr.reverse`,r=yield this.getResolverContractAdapter(i);return t&&(yield this.checkInterfaceSupport(r,Fs.name)),r.methods.name(Hn(i)).call()})}}var cn=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class p1 extends Nt{constructor(e,t){super(t!=null?t:""),this.registryAddress=e!=null?e:Ch.main,this._registry=new bL(this.getContextObject(),e),this._resolver=new vL(this._registry)}getResolver(e){return cn(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return cn(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return cn(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return cn(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e,t=60){return cn(this,void 0,void 0,function*(){return this._resolver.getAddress(e,t)})}getText(e,t){return cn(this,void 0,void 0,function*(){return Vt(e)?this._resolver.getText(yield this._resolver.getName(e,!1),t):this._resolver.getText(e,t)})}getName(e,t=!0){return cn(this,void 0,void 0,function*(){return this._resolver.getName(e,t)})}getPubkey(e){return cn(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return cn(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return cn(this,void 0,void 0,function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const r=yield GZ(this);if(!(typeof r=="boolean"&&!r))throw new K2;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const t=yield kp(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:sn.HEX})),i=Ch[R5[t]];if(typeof i=="undefined")throw new Y2(t);return this._detectedAddress=i,this._detectedAddress})}supportsInterface(e,t){return cn(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,t)})}get events(){return this._registry.events}setAddress(e,t,i){return cn(this,void 0,void 0,function*(){return this._resolver.setAddress(e,t,i)})}}var vi=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const wL=n=>vi(void 0,void 0,void 0,function*(){return(yield TB(n)).map(Xn)}),xL=(n,e)=>vi(void 0,void 0,void 0,function*(){K.validate(["string"],[e]);const t=yield EB(n,e);return Xn(t)}),SL=(n,e,t,i)=>vi(void 0,void 0,void 0,function*(){return K.validate(["address","string","uint"],[e,t,i]),_B(n,e,t,i)}),AL=(n,e)=>vi(void 0,void 0,void 0,function*(){return K.validate(["address"],[e]),QB(n,e)}),kL=(n,e,t)=>vi(void 0,void 0,void 0,function*(){return K.validate(["string","string"],[e,t]),CB(n,e,t)}),PL=(n,e,t,i)=>vi(void 0,void 0,void 0,function*(){const r=Dt(e,se,{transactionSchema:i==null?void 0:i.customTransactionSchema});return IB(n,r,t)}),TL=(n,e,t,i)=>vi(void 0,void 0,void 0,function*(){const r=Dt(e,se,{transactionSchema:i==null?void 0:i.customTransactionSchema});return RB(n,r,t)}),EL=(n,e,t,i)=>vi(void 0,void 0,void 0,function*(){K.validate(["string","address","string"],[e,t,i]);const r=Se(e)?e:On(e);return $B(n,r,t,i)}),_L=(n,e,t)=>vi(void 0,void 0,void 0,function*(){K.validate(["string","string"],[e,t]);const i=Se(e)?e:On(e);return MB(n,i,t)});var wi=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class m1 extends Nt{getAccounts(){return wi(this,void 0,void 0,function*(){return wL(this.requestManager)})}newAccount(e){return wi(this,void 0,void 0,function*(){return xL(this.requestManager,e)})}unlockAccount(e,t,i){return wi(this,void 0,void 0,function*(){return SL(this.requestManager,e,t,i)})}lockAccount(e){return wi(this,void 0,void 0,function*(){return AL(this.requestManager,e)})}importRawKey(e,t){return wi(this,void 0,void 0,function*(){return kL(this.requestManager,e,t)})}sendTransaction(e,t){return wi(this,void 0,void 0,function*(){return PL(this.requestManager,e,t,this.config)})}signTransaction(e,t){return wi(this,void 0,void 0,function*(){return TL(this.requestManager,e,t,this.config)})}sign(e,t,i){return wi(this,void 0,void 0,function*(){return EL(this.requestManager,e,t,i)})}ecRecover(e,t){return wi(this,void 0,void 0,function*(){return _L(this.requestManager,e,t)})}}var Wn;(function(n){n.HTTPS="https",n.WebSocket="wss"})(Wn||(Wn={}));var F;(function(n){n.ETH_MAINNET="eth_mainnet",n.ETH_SEPOLIA="eth_sepolia",n.ETH_HOLESKY="eth_holesky",n.POLYGON_MAINNET="polygon_mainnet",n.POLYGON_AMOY="polygon_amoy",n.AVALANCHE_C_MAINNET="avalanche_c_mainnet",n.AVALANCHE_P_MAINNET="avalanche_p_mainnet",n.AVALANCHE_X_MAINNET="avalanche_x_mainnet",n.ARBITRUM_MAINNET="arbitrum_mainnet",n.ARBITRUM_SEPOLIA="arbitrum_sepolia",n.BASE_MAINNET="base_mainnet",n.BASE_SEPOLIA="base_sepolia",n.OPTIMISM_MAINNET="optimism_mainnet",n.OPTIMISM_SEPOLIA="optimism_sepolia",n.FANTOM_MAINNET="fantom_mainnet",n.FANTOM_TESTNET="fantom_testnet",n.DYMENSION_MAINNET="dymension_mainnet",n.DYMENSION_TESTNET="dymension_testnet",n.BNB_MAINNET="bnb_mainnet",n.BNB_TESTNET="bnb_testnet",n.BSC_MAINNET="bsc_mainnet",n.BSC_TESTNET="bsc_testnet",n.ARBITRUM_ONE="arbitrum_one",n.ARBITRUM_NOVA="arbitrum_nova",n.AVALANCHE_FUJI_C="avalanche_fuji_c",n.AVALANCHE_FUJI_P="avalanche_fuji_p",n.AVALANCHE_FUJI_X="avalanche_fuji_x",n.BLAST_MAINNET="blast_mainnet",n.OPBNB_MAINNET="opbnb_mainnet",n.OPBNB_TESTNET="opbnb_testnet",n.GNOSIS_MAINNET="gnosis_mainnet",n.GNOSIS_CHIADO="gnosis_chiado",n.PULSECHAIN_MAINNET="pulsechain_mainnet",n.PULSECHAIN_TESTNET="pulsechain_testnet",n.KAVA_MAINNET="kava_mainnet",n.CRONOS_MAINNET="cronos_mainnet",n.MANTLE_MAINNET="mantle_mainnet",n.CHILIZ_MAINNET="chiliz_mainnet",n.CHILIZ_SPICY="chiliz_spicy",n.MOONBEAM_MAINNET="moonbeam_mainnet",n.TAIKO_MAINNET="taiko_mainnet",n.TAIKO_HEKLA="taiko_hekla",n.LINEA_MAINNET="linea_mainnet",n.LINEA_SEPOLIA="linea_sepolia",n.BAHAMUT_MAINNET="bahamut_mainnet",n.SCROLL_MAINNET="scroll_mainnet",n.SCROLL_SEPOLIA="scroll_sepolia",n.TRON_MAINNET="tron_mainnet",n.SYSCOIN_MAINNET="syscoin_mainnet",n.SYSCOIN_TANENBAUM="syscoin_tanenbaum",n.MOONRIVER_MAINNET="moonriver_mainnet",n.HAQQ_MAINNET="haqq_mainnet",n.EVMOS_MAINNET="evmos_mainnet",n.EVMOS_TESTNET="evmos_testnet",n.BERACHAIN_TESTNET="berachain_testnet"})(F||(F={}));const QL=1300;class CL extends ne{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=QL}}const IL=1301;class g1 extends ne{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=IL}}var RL=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};class O1 extends Dd{constructor(e,t,i,r,s){if(super(),s!==void 0&&t===Wn.HTTPS&&!("providerOptions"in s))throw new g1("HTTP Provider");if(s!==void 0&&t===Wn.WebSocket&&!("socketOptions"in s||"reconnectOptions"in s))throw new g1("Websocket Provider");this.transport=t,t===Wn.HTTPS?this.provider=new sh(this.getRPCURL(e,t,i,r),s):t===Wn.WebSocket&&(this.provider=new Nv(this.getRPCURL(e,t,i,r),s==null?void 0:s.socketOptions,s==null?void 0:s.reconnectOptions))}request(e,t){return RL(this,void 0,void 0,function*(){return this.transport===Wn.HTTPS?yield this.provider.request(e,t):this.provider.request(e)})}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,t){var i;!((i=this.provider)===null||i===void 0)&&i.once&&this.provider.once(e,t)}removeAllListeners(e){var t;!((t=this.provider)===null||t===void 0)&&t.removeAllListeners&&this.provider.removeAllListeners(e)}connect(){var e;!((e=this.provider)===null||e===void 0)&&e.connect&&this.provider.connect()}disconnect(e,t){var i;!((i=this.provider)===null||i===void 0)&&i.disconnect&&this.provider.disconnect(e,t)}reset(){var e;!((e=this.provider)===null||e===void 0)&&e.reset&&this.provider.reset()}on(e,t){this.provider&&this.provider.on(e,t)}removeListener(e,t){this.provider&&this.provider.removeListener(e,t)}}var $L=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const ot=n=>n!==void 0&&n.trim().length>0;class ML extends O1{constructor(e=F.ETH_MAINNET,t=Wn.HTTPS,i="",r="",s){super(e,t,i,r,s)}request(e,t){const i=Object.create(null,{request:{get:()=>super.request}});return $L(this,void 0,void 0,function*(){try{return yield i.request.call(this,e,t)}catch(r){throw r instanceof Zn&&r.statusCode===429?new CL(r):r}})}getRPCURL(e,t,i,r){let s="",o="";switch(e){case F.ETH_MAINNET:s=ot(r)?r:"powerful-holy-bush.quiknode.pro",o=ot(i)?i:"3240624a343867035925ff7561eb60dfdba2a668";break;case F.ETH_SEPOLIA:s=ot(r)?r:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",o=ot(i)?i:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case F.ETH_HOLESKY:s=ot(r)?r:"yolo-morning-card.ethereum-holesky.quiknode.pro",o=ot(i)?i:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case F.ARBITRUM_MAINNET:s=ot(r)?r:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",o=ot(i)?i:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case F.ARBITRUM_SEPOLIA:s=ot(r)?r:"few-patient-pond.arbitrum-sepolia.quiknode.pro",o=ot(i)?i:"3be985450970628c860b959c65cd2642dcafe53c";break;case F.BNB_MAINNET:s=ot(r)?r:"purple-empty-reel.bsc.quiknode.pro",o=ot(i)?i:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case F.BNB_TESTNET:s=ot(r)?r:"floral-rough-scion.bsc-testnet.quiknode.pro",o=ot(i)?i:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case F.POLYGON_MAINNET:s=ot(r)?r:"small-chaotic-moon.matic.quiknode.pro",o=ot(i)?i:"847569f8a017e84d985e10d0f44365d965a951f1";break;case F.POLYGON_AMOY:s=ot(r)?r:"prettiest-side-shape.matic-amoy.quiknode.pro",o=ot(i)?i:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${t}://${s}/${o}`}}const BL=n=>n!==void 0&&n.trim().length>0,ZL=[F.DYMENSION_MAINNET,F.DYMENSION_TESTNET,F.KAVA_MAINNET,F.CRONOS_MAINNET,F.POLYGON_MAINNET];class Dh extends O1{constructor(e=F.ETH_MAINNET,t=Wn.HTTPS,i="",r){super(e,t,"",i,r)}getRPCURL(e,t,i,r){if(!Dh.networkHostMap[e])throw new Error("Network info not avalible.");const s=`${Dh.networkHostMap[e]}.publicnode.com`,o=BL(r)?r:s;return ZL.includes(e)&&t===Wn.WebSocket?`${t}://${o}/websocket`:`${t}://${o}`}}Dh.networkHostMap={[F.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[F.DYMENSION_MAINNET]:"dymension-evm-rpc",[F.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[F.BLAST_MAINNET]:"blast-rpc",[F.GNOSIS_MAINNET]:"gnosis-rpc",[F.PULSECHAIN_MAINNET]:"pulsechain-rpc",[F.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[F.KAVA_MAINNET]:"kava-evm-rpc",[F.CRONOS_MAINNET]:"cronos-evm-rpc",[F.MANTLE_MAINNET]:"mantle-rpc",[F.TAIKO_MAINNET]:"taiko-rpc",[F.TAIKO_HEKLA]:"taiko-hekla-rpc",[F.LINEA_MAINNET]:"linea-rpc",[F.LINEA_SEPOLIA]:"linea-sepolia-rpc",[F.SCROLL_MAINNET]:"scroll-rpc",[F.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[F.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[F.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[F.HAQQ_MAINNET]:"haqq-evm-rpc",[F.EVMOS_MAINNET]:"evmos-evm-rpc",[F.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[F.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[F.ETH_MAINNET]:"ethereum-rpc",[F.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[F.ETH_HOLESKY]:"ethereum-holesky-rpc",[F.BSC_MAINNET]:"bsc-rpc",[F.BSC_TESTNET]:"bsc-testnet-rpc",[F.POLYGON_MAINNET]:"polygon-bor-rpc",[F.BASE_MAINNET]:"base-rpc",[F.BASE_SEPOLIA]:"base-sepolia-rpc",[F.ARBITRUM_ONE]:"arbitrum-one-rpc",[F.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[F.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[F.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[F.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[F.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[F.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[F.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[F.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[F.OPTIMISM_MAINNET]:"optimism-rpc",[F.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[F.FANTOM_MAINNET]:"fantom-rpc",[F.FANTOM_TESTNET]:"fantom-testnet-rpc",[F.OPBNB_MAINNET]:"opbnb-rpc",[F.OPBNB_TESTNET]:"opbnb-testnet-rpc",[F.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[F.CHILIZ_MAINNET]:"chiliz-rpc",[F.CHILIZ_SPICY]:"chiliz-spicy-rpc",[F.MOONBEAM_MAINNET]:"moonbeam-rpc",[F.BAHAMUT_MAINNET]:"bahamut-rpc",[F.TRON_MAINNET]:"tron-evm-rpc",[F.MOONRIVER_MAINNET]:"moonriver-rpc"};const LL=new ML,NL={encodeEventSignature:Mp,encodeFunctionCall:ZZ,encodeFunctionSignature:Ra,encodeParameter:qp,encodeParameters:Ph,decodeParameter:kx,decodeParameters:Ir,decodeLog:Px};var qa=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})};const DL=n=>{const e=(o,a)=>qa(void 0,void 0,void 0,function*(){const l=yield A5(o,n),h=B({format:"bytes"},a,se);return kM(l,h)}),t=o=>{const a=bp(o);return Object.assign(Object.assign({},a),{signTransaction:l=>qa(void 0,void 0,void 0,function*(){return e(l,a.privateKey)})})},i=(o,a,l)=>qa(void 0,void 0,void 0,function*(){var h;const c=yield _M(o,a,(h=l==null?void 0:l.nonStrict)!==null&&h!==void 0?h:!0);return Object.assign(Object.assign({},c),{signTransaction:u=>qa(void 0,void 0,void 0,function*(){return e(u,c.privateKey)})})}),r=()=>{const o=EM();return Object.assign(Object.assign({},o),{signTransaction:a=>qa(void 0,void 0,void 0,function*(){return e(a,o.privateKey)})})},s=new lh({create:r,privateKeyToAccount:t,decrypt:i});return{signTransaction:e,create:r,privateKeyToAccount:t,decrypt:i,recoverTransaction:PM,hashMessage:Op,sign:Mw,recover:yp,encrypt:Bw,wallet:s,privateKeyToAddress:mh,parseAndValidatePrivateKey:Ns,privateKeyToPublicKey:TM}},jL={version:"4.16.0"};var qL=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?s(c.value):r(c.value).then(a,l)}h((i=i.apply(n,e||[])).next())})},jh;(function(n){n.eip6963announceProvider="eip6963:announceProvider",n.eip6963requestProvider="eip6963:requestProvider"})(jh||(jh={}));const am=new Map,y1="web3:providersMapUpdated",UL=()=>qL(void 0,void 0,void 0,function*(){return new Promise((n,e)=>{typeof window=="undefined"&&e(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(jh.eip6963announceProvider,t=>{am.set(t.detail.info.uuid,t.detail);const i=new CustomEvent(y1,{detail:am});window.dispatchEvent(i),n(am)}),window.dispatchEvent(new Event(jh.eip6963requestProvider))})}),XL=n=>{if(typeof window=="undefined")throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(y1,n)};class Ys extends Nt{constructor(e=LL){var t;(ee(e)||typeof e=="string"&&e.trim()===""||typeof e!="string"&&!oh(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let i={};typeof e=="string"||oh(e)?i.provider=e:e?i=e:i={},i.registeredSubscriptions=Object.assign(Object.assign({},zp),(t=i.registeredSubscriptions)!==null&&t!==void 0?t:{}),super(i);const r=DL(this);this._wallet=r.wallet,this._accountProvider=r,this.utils=Lv;const s=this;class o extends Mr{constructor(h,c,u,f,d){if(Fi(c)&&Fi(u))throw new mb("Should not provide options at both 2nd and 3rd parameters");let p,m={},g,O;if(!ee(c)&&typeof c!="object"&&typeof c!="string")throw new mb;if(typeof c=="string"&&(p=c),Fi(c)?m=c:Fi(u)?m=u:m={},c instanceof Nt?g=c:u instanceof Nt?g=u:f instanceof Nt?g=f:g=s.getContextObject(),d?O=d:fi(u)?O=u:fi(f)&&(O=f),super(h,p,m,g,O),super.subscribeToContextEvents(s),!ee(a)){const y=a.getTransactionMiddleware();ee(y)||super.setTransactionMiddleware(y)}}}const a=s.use(_h);this.eth=Object.assign(a,{ens:s.use(p1,Ch.main),Iban:He,net:s.use(zw),personal:s.use(m1),Contract:o,abi:NL,accounts:r})}}Ys.version=jL.version,Ys.utils=Lv,Ys.requestEIP6963Providers=UL,Ys.onNewProviderDiscovered=XL,Ys.modules={Web3Eth:_h,Iban:He,Net:zw,ENS:p1,Personal:m1};const GL=()=>We(this,null,function*(){var r;let n=yield window.ethereum.request({method:"eth_requestAccounts"});const e=new Ys(window.ethereum),t=yield(r=e==null?void 0:e.eth)==null?void 0:r.getBalance(n[0]),i=e.utils.fromWei(t,"ether");return{balance:Number(i).toFixed(3),address:n[0],instance:e}});class qh{constructor(e,t,i,r,s,o,a,l,h,c=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new qh(e,[],t,i,i,0,[],0,r?new b1(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-u;if(r<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,d,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let d=this.stack[l-3];this.state=s.getGoto(d,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==i)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new qh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new FL(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[s],o);if(this.stack.length<120)for(let s=0;r.length<8&&s<t.length;s+=2){let o=t[s+1];r.some((a,l)=>l&1&&a==o)||r.push(t[s],o)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let s=t[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,s)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],l,!1)>=0)return a<<19|65536|l}}else{let a=i(o,s+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new b1(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class b1{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class FL{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Uh{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Uh(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Uh(this.stack,this.pos,this.index)}}function Ua(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let s=0;for(;;){let o=n.charCodeAt(i++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[r++]=s:t=new e(s)}return t}class Xh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const v1=new Xh;class VL{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=v1,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=v1,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Ks{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;w1(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ks.prototype.contextual=Ks.prototype.fallback=Ks.prototype.extend=!1;class lm{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?Ua(e):e}token(e,t){let i=e.pos,r=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(w1(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||r++,o==null)break;e.reset(o,e.token)}r&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r))}}lm.prototype.contextual=Ks.prototype.fallback=Ks.prototype.extend=!1;class Xa{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function w1(n,e,t,i,r,s){let o=0,a=1<<i,{dialect:l}=t.p.parser;e:for(;a&n[o];){let h=n[o+1];for(let d=o+3;d<h;d+=2)if((n[d+1]&a)>0){let p=n[d];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||HL(p,e.token.value,r,s))){e.acceptToken(p);break}}let c=e.next,u=0,f=n[o+2];if(e.next<0&&f>u&&n[h+f*3-3]==65535){o=n[h+f*3-1];continue e}for(;u<f;){let d=u+f>>1,p=h+d+(d<<1),m=n[p],g=n[p+1]||65536;if(c<m)f=d;else if(c>=g)u=d+1;else{o=n[p+2],e.advance();continue e}}break}}function x1(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function HL(n,e,t,i){let r=x1(t,i,e);return r<0||x1(t,i,n)<r}const zt=typeof process!="undefined"&&process.env&&/\bparse\b/.test(process.env.LOG);let cm=null;function S1(n,e,t){let i=n.cursor(Ye.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class WL{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?S1(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?S1(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof Ve){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(ue.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class zL{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Xh)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let h=0;h<s.length;h++){if(!(1<<h&o))continue;let c=s[h],u=this.tokens[h];if(!(i&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=a)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=a),u.lookAhead>u.end+25&&(l=Math.max(u.lookAhead,l)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(i=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new Xh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Xh,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let h=o.stateSlot(s,l?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=xi(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(xi(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(xi(a,h+1),t,i,r))}return r}}class YL{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new VL(t,r),this.tokens=new zL(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[qh.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new WL(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],s=[]),r.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!i.length){let o=r&&eN(r);if(o)return zt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw zt&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return zt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((a,l)=>l.score-a.score);i.length>o;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let a=i[o];for(let l=o+1;l<i.length;l++){let h=i[l];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(l--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,o=zt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!h||(u.prop(ue.contextHash)||0)==c))return e.useNode(u,f),zt&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof Ve)||u.children.length==0||u.positions[0]>0)break;let d=u.children[0];if(d instanceof Ve&&u.positions[0]==0)u=d;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),zt&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let h=0;h<l.length;){let c=l[h++],u=l[h++],f=l[h++],d=h==l.length||!i,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,u,m?m.start:p.pos,f),zt&&console.log(o+this.stackID(p)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(u)} @ ${r}${p==e?"":", split"})`),d)return!0;p.pos>r?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return A1(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],h=t[(o<<1)+1],c=zt?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),zt&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let u=a.split(),f=c;for(let d=0;u.forceReduce()&&d<10&&(zt&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));d++)zt&&(f=this.stackID(u)+" -> ");for(let d of a.recoverByInsert(l))zt&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>a.pos?(h==a.pos&&(h++,l=0),a.recoverByDelete(l,h),zt&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),A1(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),Ve.build({buffer:Uh.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(cm||(cm=new WeakMap)).get(e);return t||cm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function A1(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class KL{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const hm=n=>n;class JL{constructor(e){this.start=e.start,this.shift=e.shift||hm,this.reduce=e.reduce||hm,this.reuse=e.reuse||hm,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Gh extends z0{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function s(a,l,h){r[a].push([l,l.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=ue[l]);for(let h=1;h<a.length;){let c=a[h++];if(c>=0)s(c,l,a[h++]);else{let u=a[h+-c];for(let f=-c;f>0;f--)s(a[h++],l,u);h++}}}this.nodeSet=new sf(t.map((a,l)=>Ct.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:r[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=U0;let o=Ua(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(k1),this.states=Ua(e.states,Uint32Array),this.data=Ua(e.stateData),this.goto=Ua(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Ks(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new YL(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let o=r[s++],a=o&1,l=r[s++];if(a&&i)return l;for(let h=s+(o>>1);s<h;s++)if(r[s]==e)return l;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=xi(i,s+2)];else{if(i[s+1]==2)return xi(i,s+2);break}if(o==t||o==0)return xi(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=xi(this.data,s+2);else break;r=t(xi(this.data,s+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xi(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];t.some((s,o)=>o&1&&s==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(Gh.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(a=>a.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[r]=k1(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new KL(e,i,r)}static deserialize(e){return new Gh(e)}}function xi(n,e){return n[e]|n[e+1]<<16}function eN(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function k1(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const tN=314,nN=315,P1=1,iN=2,rN=3,sN=4,oN=316,aN=318,lN=319,cN=5,hN=6,uN=0,um=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],T1=125,fN=59,fm=47,dN=42,pN=43,mN=45,gN=60,ON=44,yN=63,bN=46,vN=91,wN=new JL({start:!1,shift(n,e){return e==cN||e==hN||e==aN?n:e==lN},strict:!1}),xN=new Xa((n,e)=>{let{next:t}=n;(t==T1||t==-1||e.context)&&n.acceptToken(oN)},{contextual:!0,fallback:!0}),SN=new Xa((n,e)=>{let{next:t}=n,i;um.indexOf(t)>-1||t==fm&&((i=n.peek(1))==fm||i==dN)||t!=T1&&t!=fN&&t!=-1&&!e.context&&n.acceptToken(tN)},{contextual:!0}),AN=new Xa((n,e)=>{n.next==vN&&!e.context&&n.acceptToken(nN)},{contextual:!0}),kN=new Xa((n,e)=>{let{next:t}=n;if(t==pN||t==mN){if(n.advance(),t==n.next){n.advance();let i=!e.context&&e.canShift(P1);n.acceptToken(i?P1:iN)}}else t==yN&&n.peek(1)==bN&&(n.advance(),n.advance(),(n.next<48||n.next>57)&&n.acceptToken(rN))},{contextual:!0});function dm(n,e){return n>=65&&n<=90||n>=97&&n<=122||n==95||n>=192||!e&&n>=48&&n<=57}const PN=new Xa((n,e)=>{if(n.next!=gN||!e.dialectEnabled(uN)||(n.advance(),n.next==fm))return;let t=0;for(;um.indexOf(n.next)>-1;)n.advance(),t++;if(dm(n.next,!0)){for(n.advance(),t++;dm(n.next,!1);)n.advance(),t++;for(;um.indexOf(n.next)>-1;)n.advance(),t++;if(n.next==ON)return;for(let i=0;;i++){if(i==7){if(!dm(n.next,!0))return;break}if(n.next!="extends".charCodeAt(i))break;n.advance(),t++}}n.acceptToken(sN,-t)}),TN=Y0({"get set async static":v.modifier,"for while do if else switch try catch finally return throw break continue default case":v.controlKeyword,"in of await yield void typeof delete instanceof":v.operatorKeyword,"let var const using function class extends":v.definitionKeyword,"import export from":v.moduleKeyword,"with debugger as new":v.keyword,TemplateString:v.special(v.string),super:v.atom,BooleanLiteral:v.bool,this:v.self,null:v.null,Star:v.modifier,VariableName:v.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":v.function(v.variableName),VariableDefinition:v.definition(v.variableName),Label:v.labelName,PropertyName:v.propertyName,PrivatePropertyName:v.special(v.propertyName),"CallExpression/MemberExpression/PropertyName":v.function(v.propertyName),"FunctionDeclaration/VariableDefinition":v.function(v.definition(v.variableName)),"ClassDeclaration/VariableDefinition":v.definition(v.className),"NewExpression/VariableName":v.className,PropertyDefinition:v.definition(v.propertyName),PrivatePropertyDefinition:v.definition(v.special(v.propertyName)),UpdateOp:v.updateOperator,"LineComment Hashbang":v.lineComment,BlockComment:v.blockComment,Number:v.number,String:v.string,Escape:v.escape,ArithOp:v.arithmeticOperator,LogicOp:v.logicOperator,BitOp:v.bitwiseOperator,CompareOp:v.compareOperator,RegExp:v.regexp,Equals:v.definitionOperator,Arrow:v.function(v.punctuation),": Spread":v.punctuation,"( )":v.paren,"[ ]":v.squareBracket,"{ }":v.brace,"InterpolationStart InterpolationEnd":v.special(v.brace),".":v.derefOperator,", ;":v.separator,"@":v.meta,TypeName:v.typeName,TypeDefinition:v.definition(v.typeName),"type enum interface implements namespace module declare":v.definitionKeyword,"abstract global Privacy readonly override":v.modifier,"is keyof unique infer asserts":v.operatorKeyword,JSXAttributeValue:v.attributeValue,JSXText:v.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":v.angleBracket,"JSXIdentifier JSXNameSpacedName":v.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":v.attributeName,"JSXBuiltin/JSXIdentifier":v.standard(v.tagName)}),EN={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},_N={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},QN={__proto__:null,"<":189},CN=Gh.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:wN,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[TN],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[SN,AN,kN,PN,2,3,4,5,6,7,8,9,10,11,12,13,14,xN,new lm("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new lm("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:n=>EN[n]||-1},{term:341,get:n=>_N[n]||-1},{term:93,get:n=>QN[n]||-1}],tokenPrec:15116}),E1=[Mt("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Mt("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Mt("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Mt("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Mt("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Mt(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Mt("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Mt(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Mt(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Mt('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Mt('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],IN=E1.concat([Mt("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Mt("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Mt("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),_1=new Vk,Q1=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Ga(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const RN=["FunctionDeclaration"],$N={FunctionDeclaration:Ga("function"),ClassDeclaration:Ga("class"),ClassExpression:()=>!0,EnumDeclaration:Ga("constant"),TypeAliasDeclaration:Ga("type"),NamespaceDeclaration:Ga("namespace"),VariableDefinition(n,e){n.matchContext(RN)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function C1(n,e){let t=_1.get(e);if(t)return t;let i=[],r=!0;function s(o,a){let l=n.sliceString(o.from,o.to);i.push({label:l,type:a})}return e.cursor(Ye.IncludeAnonymous).iterate(o=>{if(r)r=!1;else if(o.name){let a=$N[o.name];if(a&&a(o,s)||Q1.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of C1(n,o.node))i.push(a);return!1}}),_1.set(e,i),i}const I1=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,R1=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function MN(n){let e=Ke(n.state).resolveInner(n.pos,-1);if(R1.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&I1.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let r=e;r;r=r.parent)Q1.has(r.name)&&(i=i.concat(C1(n.state.doc,r)));return{options:i,from:t?e.from:n.pos,validFor:I1}}const Lr=Bl.define({name:"javascript",parser:CN.configure({props:[oO.add({IfStatement:yf({except:/^\s*({|else\b)/}),TryStatement:yf({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:pP,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:dP({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":yf({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),cO.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":yP,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),$1={test:n=>/^JSX/.test(n.name),facet:nO({commentTokens:{block:{open:"{/*",close:"*/}"}}})},BN=Lr.configure({dialect:"ts"},"typescript"),ZN=Lr.configure({dialect:"jsx",props:[pf.add(n=>n.isTop?[$1]:void 0)]}),LN=Lr.configure({dialect:"jsx ts",props:[pf.add(n=>n.isTop?[$1]:void 0)]},"typescript");let M1=n=>({label:n,type:"keyword"});const B1="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(M1),NN=B1.concat(["declare","implements","private","protected","public"].map(M1));function DN(n={}){let e=n.jsx?n.typescript?LN:ZN:n.typescript?BN:Lr,t=n.typescript?IN.concat(NN):E1.concat(B1);return new sP(e,[Lr.data.of({autocomplete:CE(R1,Ty(t))}),Lr.data.of({autocomplete:MN}),n.jsx?UN:[]])}function jN(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function Z1(n,e,t=n.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return n.sliceString(i.from,Math.min(i.to,t));return""}const qN=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),UN=q.inputHandler.of((n,e,t,i,r)=>{if((qN?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!Lr.isActiveAt(n.state,e,-1))return!1;let s=r(),{state:o}=s,a=o.changeByRange(l=>{var h;let{head:c}=l,u=Ke(o).resolveInner(c-1,-1),f;if(u.name=="JSXStartTag"&&(u=u.parent),!(o.doc.sliceString(c-1,c)!=i||u.name=="JSXAttributeValue"&&u.to>c)){if(i==">"&&u.name=="JSXFragmentTag")return{range:l,changes:{from:c,insert:"</>"}};if(i=="/"&&u.name=="JSXStartCloseTag"){let d=u.parent,p=d.parent;if(p&&d.from==c-2&&((f=Z1(o.doc,p.firstChild,c))||((h=p.firstChild)===null||h===void 0?void 0:h.name)=="JSXFragmentTag")){let m=`${f}>`;return{range:$.cursor(c+m.length,-1),changes:{from:c,insert:m}}}}else if(i==">"){let d=jN(u);if(d&&d.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(c,c+2))&&(f=Z1(o.doc,d,c)))return{range:l,changes:{from:c,insert:`</${f}>`}}}}return{range:l}});return a.changes.empty?!1:(n.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),XN=Ie.withDynamicSchemaProps(()=>{const n=Ie.useAPIClient(),{data:e}=Ie.useDataBlockRequest(),[t,i]=Ee.useState(),[r,s]=Ee.useState(),[o,a]=Ee.useState(),[l,h]=Ee.useState([]),[c,u]=Ee.useState(!1),[f,d]=Ee.useState([{label:"Đoạn mới",value:"default"}]),p=()=>We(this,null,function*(){const{address:A,balance:S,instance:I}=yield GL();i(I),a({address:A,balance:S})});Ee.useEffect(()=>{e!=null&&e.data&&e.data.length>0&&h((e==null?void 0:e.data)||[])},[e==null?void 0:e.data]),Ee.useEffect(()=>{l.length>0&&d([{label:"Đoạn mới",value:"default"},...l.map((A,S)=>({label:`Mã ${S+1}`,value:A.id}))])},[l]),Ee.useEffect(()=>{},[f]);const m=`
      pragma solidity ^0.8.0;

      contract SimpleStorage {
          uint256 public storedData;

          function set(uint256 x) public {
              storedData = x;
          }

          function get() public view returns (uint256) {
              return storedData;
          }
      }
        `,[g,O]=Ee.useState("default"),[y,w]=Ee.useState(m),k=()=>We(this,null,function*(){try{if(g==="default"){const A=yield n.resource("smart_contracts").create({values:{script:y}});A.status===201||A.status===200?(qe.message.success("Saved successfully"),h([...l,A.data.data]),O(A.data.data.id)):qe.message.error("Failed to save")}else{const A=yield n.resource("smart_contracts").update({filterByTk:g,values:{script:y}});if(A.status===201||A.status===200){qe.message.success("Saved successfully");const S=l.findIndex(I=>I.id===g);l[S].script=A.data.data[0].script}else qe.message.error("Failed to save")}}catch(A){console.error("Error saving:",A),qe.message.error("Failed to save")}}),x=()=>We(this,null,function*(){try{if(g==="default"){qe.message.error("Please save the contract first");return}yield n.request({url:"solidity:compile",method:"post",data:{contractId:g}})}catch(A){qe.message.success("Please Wait")}}),T=()=>We(this,null,function*(){try{if(g==="default"){qe.message.error("Vui lòng chọn hợp đồng");return}qe.message.loading("Đang triển khai hợp đồng...",0);const A=yield n.request({url:"/contract:get",method:"post",data:{contractId:g}}),{abi:S,bytecode:I}=A.data.data;s(A.data.data);const _=yield t.eth.getTransactionCount(o.address,"latest"),R=(yield t.eth.getGasPrice()).toString(),L=new t.eth.Contract(S).deploy({data:I}),W=yield L.estimateGas({from:o.address}),b=String(Math.min(Math.floor(Number(W.toString())*1.2),5e6)),M=(yield L.send({from:o.address,gas:b,gasPrice:R,nonce:_})).options.address,j=yield t.eth.getCode(M);if(j==="0x"||j==="0x0")throw new Error("Contract deployment failed - no code at address");return yield n.resource("smart_contracts").update({filterByTk:g,values:{contractAddress:M}}),qe.message.destroy(),qe.message.success("Hợp đồng đã được triển khai thành công"),u(!0),A.data}catch(A){qe.message.destroy(),console.error("Error deploying contract:",A),A.message.includes("nonce")?qe.message.error("Vui lòng đợi giao dịch trước hoàn tất"):qe.message.error("Lỗi triển khai hợp đồng: "+A.message)}});return tt.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[tt.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[tt.jsx(qe.Select,{style:{width:200},value:g,placeholder:"Select an option",options:f,onChange:A=>{if(O(A),A==="default")w(m);else{const S=l.find(I=>I.id===A);u(!!(S!=null&&S.contractAddress)),w(S.script)}}}),tt.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o?tt.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c===!1?tt.jsx(qe.Button,{type:"primary",onClick:()=>T(),children:"Triển khai hợp đồng"}):tt.jsxs("div",{style:{display:"flex",color:"green"},children:[" ","Đã Deploy"," "]}),tt.jsx("div",{children:tt.jsxs("span",{children:["Địa chỉ: ",o.address]})}),tt.jsx("div",{children:tt.jsxs("span",{children:["Số dư: ",o.balance," ETH"]})})]}):tt.jsx(qe.Button,{type:"dashed",onClick:()=>p(),children:"Kết nối ví"}),tt.jsx(qe.Button,{type:"default",onClick:k,children:"Lưu"}),tt.jsx(qe.Button,{type:"primary",onClick:()=>x(),children:"Biên dịch hợp đồng"})]})]}),tt.jsx(ab,{value:y,extensions:[DN()],height:"500px",theme:lb({settings:{caret:"#c6c6c6",fontFamily:"monospace"}}),onChange:A=>w(A)})]})},{displayName:Va});class L1 extends Ie.Plugin{load(){return We(this,null,function*(){this.app.addComponents({SolidityEditor:XN}),this.app.schemaSettingsManager.add(wn),this.app.schemaInitializerManager.addItem("page:addBlock",`otherBlocks.${Dr.name}`,Dr),this.app.schemaInitializerManager.addItem("popup:addNew:addBlock",`otherBlocks.${Dr.name}`,Dr),this.app.schemaInitializerManager.addItem("mobilePage:addBlock",`otherBlocks.${Dr.name}`,Dr)})}}Me.SolidityEditorNocobaseClient=L1,Me.default=L1,Object.defineProperties(Me,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
